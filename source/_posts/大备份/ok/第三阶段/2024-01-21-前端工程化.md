---
title: å‰ç«¯å·¥ç¨‹åŒ–
tags:
  - JavaWeb
  - Vue
categories:
  - JavaWeb
copyright_author: å°šç¡…è°·
copyright_author_href: 'https://atguigu.com'
copyright_url: 'https://atguigu.com'
copyright_info: æ­¤æ–‡ç« ç‰ˆæƒå½’å°šç¡…è°·æ‰€æœ‰ï¼Œå¦‚æœ‰è½¬è½½ï¼Œè¯·æ³¨æ˜æ¥è‡ªåŸä½œè€…
abbrlink: 7db00131
date: 2024-01-21 04:56:09
description:

---

### ä¸€ã€Vue3ç®€ä»‹å’Œå¿«é€Ÿä½“éªŒ

#### 1. Vue3ä»‹ç»

![1684487637025](https://blog-resources.this0.com/image/202403301652072.png?x-oss-process=style/this0-blog)

> Vue (å‘éŸ³ä¸º /vjuË/ï¼Œç±»ä¼¼ **view**) æ˜¯ä¸€æ¬¾ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript æ¡†æ¶ã€‚

 **Vueçš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š**

//TODO

-   **å£°æ˜å¼æ¸²æŸ“**ï¼šVue åŸºäºæ ‡å‡† HTML æ‹“å±•äº†ä¸€å¥—æ¨¡æ¿è¯­æ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å£°æ˜å¼åœ°æè¿°æœ€ç»ˆè¾“å‡ºçš„ HTML å’Œ JavaScript çŠ¶æ€ä¹‹é—´çš„å…³ç³»ã€‚
-   **å“åº”æ€§**ï¼šVue ä¼šè‡ªåŠ¨è·Ÿè¸ª JavaScript çŠ¶æ€å¹¶åœ¨å…¶å‘ç”Ÿå˜åŒ–æ—¶å“åº”å¼åœ°æ›´æ–° DOM  

> VUEä½œè€…:å°¤é›¨æºª

#### 2. Vue3å¿«é€Ÿä½“éªŒ(éå·¥ç¨‹åŒ–æ–¹å¼)

```html
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <!-- è¿™é‡Œä¹Ÿå¯ä»¥ç”¨æµè§ˆå™¨æ‰“å¼€è¿æ¥,ç„¶åå°†è·å¾—çš„æ–‡æœ¬å•ç‹¬ä¿å­˜è¿›å…¥ä¸€ä¸ªvue.jsçš„æ–‡ä»¶,å¯¼å…¥vue.jsæ–‡ä»¶å³å¯ -->
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <div id="app">
            <!-- ç»™styleå±æ€§ç»‘å®šcolorStyleæ•°æ® -->
            <!-- {{æ’å€¼è¡¨è¾¾å¼ ç›´æ¥å°†æ•°æ®æ”¾åœ¨è¯¥ä½ç½®}} -->
           <h1 v-bind:style="colorStyle">{{headline}}</h1>
           <!-- v-textè®¾ç½®åŒæ ‡ç­¾ä¸­çš„æ–‡æœ¬ -->
           <p v-text="article"></p>
           <!-- ç»™typeå±æ€§ç»‘å®šinputTypeæ•°æ® -->
           <input v-bind:type ="inputType" value="helloVue3"> <br>
           <!-- ç»™æŒ‰é’®å•å‡»äº‹ä»¶ç»‘å®šå‡½æ•° -->
           <button  @click="sayHello()">hello</button>
        </div>

        <script>
            //ç»„åˆapi
            const app = Vue.createApp({
                // åœ¨setupå†…éƒ¨è‡ªç”±å£°æ˜æ•°æ®å’Œæ–¹æ³•å³å¯!æœ€ç»ˆè¿”å›!
                setup(){
                    //å®šä¹‰æ•°æ®
                    //åœ¨VUEä¸­å®ç°DOMçš„æ€è·¯æ˜¯: é€šè¿‡ä¿®æ”¹ä¿®æ•°æ®è€Œå½±å“é¡µé¢å…ƒç´ 
                    // vue3ä¸­,æ•°æ®é»˜è®¤ä¸æ˜¯å“åº”å¼çš„,éœ€è¦åŠ refæˆ–è€…reactiveå¤„ç†,åé¢ä¼šè¯¦ç»†è®²è§£
                    let inputType ='text'
                    let headline ='hello vue3'
                    let article ='vue is awesome'  
                    let colorStyle ={'color':'red'}        
                    // å®šä¹‰å‡½æ•°
                    let sayHello =()=>{
                        alert("hello Vue")
                    }
                    //åœ¨setupå‡½æ•°ä¸­,returnè¿”å›çš„æ•°æ®å’Œå‡½æ•°å¯ä»¥åœ¨htmlä½¿ç”¨
                    return {
                       inputType,
                       headline,
                       article,
                       colorStyle,
                       sayHello
                    }
                }
            });
            //æŒ‚è½½åˆ°è§†å›¾
            app.mount("#app");
        </script>
    </body>
</html>
```

#### 3. ç¬¬ä¸€æ®µvueä»£ç çš„æµ“ç¼©

```js

<body>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <div id="app">
     ---
    </div>

    <script>
        
        //ç»„åˆapi
        const app1 = Vue.createApp({
            
            // åœ¨setupå†…éƒ¨ï¼šå£°æ˜æ•°æ®å’Œæ–¹æ³•ï¼Œå¹¶è¿”å›å£°æ˜çš„æ•°æ®!
            setup(){
                
                //å®šä¹‰æ•°æ®            
                let inputType ='text'
                      
                // å®šä¹‰å‡½æ•°
                let sayHello =()=>{
                    alert("hello Vue")
                }
                
                //åœ¨setupå‡½æ•°ä¸­,returnè¿”å›çš„æ•°æ®å’Œå‡½æ•°å¯ä»¥åœ¨htmlä½¿ç”¨
                return {
                   inputType
                  
                }
            }
        });
        //æŒ‚è½½åˆ°è§†å›¾
        app1.mount("#app");
    </script>
</body>
```

## äº”ã€Vue3é€šè¿‡Viteå®ç°å·¥ç¨‹åŒ–

### 5.1 Viteçš„ä»‹ç»

<img src="https://blog-resources.this0.com/image/202403301652069.png?x-oss-process=style/this0-blog" alt="1684488376469" style="zoom:50%;" />

<img src="https://blog-resources.this0.com/image/202403301652280.png?x-oss-process=style/this0-blog" />

> Vite çš„ä½œç”¨åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

1.  å¿«é€Ÿåˆ›å»ºé¡¹ç›®ã€‚
2.  ç»Ÿä¸€çš„å·¥ç¨‹åŒ–è§„èŒƒã€‚
3.  ä»£ç æ¨¡æ¿å’Œç»„ä»¶åº“ã€‚
4.  è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ã€‚

### 5.2 Viteåˆ›å»ºVue3å·¥ç¨‹åŒ–é¡¹ç›®

#### 5.2.1 Vite+Vue3é¡¹ç›®çš„åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢

> 1 ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºå·¥ç¨‹

+ åœ¨ç£ç›˜çš„åˆé€‚ä½ç½®ä¸Š,åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ç”¨äºå­˜å‚¨å¤šä¸ªå‰ç«¯é¡¹ç›®
+ ç”¨vscodeæ‰“å¼€è¯¥ç›®å½•
+ åœ¨vocodeä¸­æ‰“å¼€å‘½ä»¤è¡Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤

```shell
npm create vite@latest
```

+ ç¬¬ä¸€æ¬¡ä½¿ç”¨viteæ—¶ä¼šæç¤ºä¸‹è½½vite,è¾“å…¥yå›è½¦å³å¯,ä¸‹æ¬¡ä½¿ç”¨viteå°±ä¸ä¼šå‡ºç°äº†

![1687769339457](https://blog-resources.this0.com/image/202403301652374.png?x-oss-process=style/this0-blog )

+ æ³¨æ„ï¼š é€‰æ‹©vue+JavaScripté€‰é¡¹å³å¯

> 2 å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–

+ cdè¿›å…¥åˆšåˆšåˆ›å»ºçš„é¡¹ç›®ç›®å½•
+ npm installå‘½ä»¤å®‰è£…åŸºç¡€ä¾èµ–

``` shell
cd ./vue3-demo1
npm install
```

> 3 å¯åŠ¨é¡¹ç›®

+ æŸ¥çœ‹é¡¹ç›®ä¸‹çš„package.json

```json
{
  "name": "vue3-demo1",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "bootstrap": "^5.2.3",
    "sass": "^1.62.1",
    "vue": "^3.2.47"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.1.0",
    "vite": "^4.3.2"
  }
}
```

``` shell
npm run dev
```

<img src="https://blog-resources.this0.com/image/202403301652402.png?x-oss-process=style/this0-blog" style="zoom: 33%;" />

> 5 åœæ­¢é¡¹ç›®

+ å‘½ä»¤è¡Œä¸Š ctrl+c

#### 5.2.2 Vite+Vue3é¡¹ç›®çš„ç›®å½•ç»“æ„

//TODO,ç›®å½•ç»“æ„

> 1.ä¸‹é¢æ˜¯ Vite é¡¹ç›®ç»“æ„å’Œå…¥å£çš„è¯¦ç»†è¯´æ˜ï¼š

![1684489112904](https://blog-resources.this0.com/image/202403301652486.png?x-oss-process=style/this0-blog )

-   public/ ç›®å½•ï¼šç”¨äºå­˜æ”¾ä¸€äº›å…¬å…±èµ„æºï¼Œå¦‚ HTML æ–‡ä»¶ã€å›¾åƒã€å­—ä½“ç­‰ï¼Œè¿™äº›èµ„æºä¼šè¢«ç›´æ¥å¤åˆ¶åˆ°æ„å»ºå‡ºçš„ç›®æ ‡ç›®å½•ä¸­ã€‚
-   src/ ç›®å½•ï¼šå­˜æ”¾é¡¹ç›®çš„æºä»£ç ï¼ŒåŒ…æ‹¬ JavaScriptã€CSSã€Vue ç»„ä»¶ã€å›¾åƒå’Œå­—ä½“ç­‰èµ„æºã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢« Vite å®æ—¶ç¼–è¯‘å’Œå¤„ç†ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œå®æ—¶é¢„è§ˆå’Œè°ƒè¯•ã€‚ä»¥ä¸‹æ˜¯srcå†…éƒ¨åˆ’åˆ†å»ºè®®ï¼š
    1.  `assets/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ä¸€äº›é¡¹ç›®ä¸­ç”¨åˆ°çš„é™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ã€å­—ä½“ã€æ ·å¼æ–‡ä»¶ç­‰ã€‚
    2.  `components/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ç»„ä»¶ç›¸å…³çš„æ–‡ä»¶ã€‚ç»„ä»¶æ˜¯ä»£ç å¤ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œç”¨äºæŠ½è±¡å‡ºä¸€ä¸ªå¯å¤ç”¨çš„ UI éƒ¨ä»¶ï¼Œæ–¹ä¾¿åœ¨ä¸åŒçš„åœºæ™¯ä¸­è¿›è¡Œé‡å¤ä½¿ç”¨ã€‚
    3.  `layouts/` ç›®å½•ï¼šç”¨äºå­˜æ”¾å¸ƒå±€ç»„ä»¶çš„æ–‡ä»¶ã€‚å¸ƒå±€ç»„ä»¶é€šå¸¸è´Ÿè´£æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ•´ä½“å¸ƒå±€ï¼Œå¦‚å¤´éƒ¨ã€åº•éƒ¨ã€å¯¼èˆªèœå•ç­‰ã€‚
    4.  `pages/` ç›®å½•ï¼šç”¨äºå­˜æ”¾é¡µé¢çº§åˆ«çš„ç»„ä»¶æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯è·¯ç”±å¯¹åº”çš„ç»„ä»¶æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œå¯ä»¥åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨ä¸åŒçš„é¡µé¢ç»„ä»¶ã€‚
    5.  `plugins/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ Vite æ’ä»¶ç›¸å…³çš„æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½ä¸åŒçš„æ’ä»¶æ¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨åŒ–æµ‹è¯•ã€ä»£ç å‹ç¼©ç­‰ã€‚
    6.  `router/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ Vue.js çš„è·¯ç”±é…ç½®æ–‡ä»¶ï¼Œè´Ÿè´£ç®¡ç†è§†å›¾å’Œ URL ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œæ–¹ä¾¿å®ç°é¡µé¢ä¹‹é—´çš„è·³è½¬å’Œæ•°æ®ä¼ é€’ã€‚
    7.  `store/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ Vuex çŠ¶æ€ç®¡ç†ç›¸å…³çš„æ–‡ä»¶ï¼Œè´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®å’ŒçŠ¶æ€ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†å’Œå…±äº«æ•°æ®ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
    8.  `utils/` ç›®å½•ï¼šç”¨äºå­˜æ”¾ä¸€äº›é€šç”¨çš„å·¥å…·å‡½æ•°ï¼Œå¦‚æ—¥æœŸå¤„ç†å‡½æ•°ã€å­—ç¬¦ä¸²æ“ä½œå‡½æ•°ç­‰ã€‚
-   vite.config.js æ–‡ä»¶ï¼šVite çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡è¯¥æ–‡ä»¶é…ç½®é¡¹ç›®çš„å‚æ•°ã€æ’ä»¶ã€æ‰“åŒ…ä¼˜åŒ–ç­‰ã€‚è¯¥æ–‡ä»¶å¯ä»¥ä½¿ç”¨ CommonJS æˆ– ES6 æ¨¡å—çš„è¯­æ³•è¿›è¡Œé…ç½®ã€‚
-   package.json æ–‡ä»¶ï¼šæ ‡å‡†çš„ Node.js é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº†é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯å’Œä¾èµ–å…³ç³»ã€‚å…¶ä¸­å¯ä»¥é€šè¿‡ scripts å­—æ®µå®šä¹‰å‡ ä¸ªå‘½ä»¤ï¼Œå¦‚ devã€buildã€serve ç­‰ï¼Œç”¨äºå¯åŠ¨å¼€å‘ã€æ„å»ºå’Œå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ç­‰æ“ä½œã€‚
-   Vite é¡¹ç›®çš„å…¥å£ä¸º src/main.js æ–‡ä»¶ï¼Œè¿™æ˜¯ Vue.js åº”ç”¨ç¨‹åºçš„å¯åŠ¨æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æ•´ä¸ªå‰ç«¯åº”ç”¨ç¨‹åºçš„å…¥å£æ–‡ä»¶ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œé€šå¸¸ä¼šå¼•å…¥ Vue.js åŠå…¶ç›¸å…³æ’ä»¶å’Œç»„ä»¶ï¼ŒåŒæ—¶ä¼šåˆ›å»º Vue å®ä¾‹ï¼ŒæŒ‚è½½åˆ° HTML é¡µé¢ä¸ŠæŒ‡å®šçš„ DOM å…ƒç´ ä¸­ã€‚

>  2.viteçš„è¿è¡Œç•Œé¢

+ åœ¨å®‰è£…äº† Vite çš„é¡¹ç›®ä¸­ï¼Œå¯ä»¥åœ¨ npm scripts ä¸­ä½¿ç”¨ `vite` å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ `npx vite` è¿è¡Œå®ƒã€‚ä¸‹é¢æ˜¯é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºçš„ Vite é¡¹ç›®ä¸­é»˜è®¤çš„ npm scriptsï¼š(package.json)

  //TODO,æœ‰ä»€ä¹ˆåŒºåˆ«

```json
{
  "scripts": {
    "dev": "vite", // å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œåˆ«åï¼š`vite dev`ï¼Œ`vite serve`
    "build": "vite build", // ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºäº§ç‰©
    "preview": "vite preview" // æœ¬åœ°é¢„è§ˆç”Ÿäº§æ„å»ºäº§ç‰©
  }
}
```

+ è¿è¡Œè®¾ç½®ç«¯å£å·ï¼š(vite.config.js)

```javascript
//ä¿®æ”¹viteé¡¹ç›®é…ç½®æ–‡ä»¶ vite.config.js
export default defineConfig({
  plugins: [vue()],
  server:{
    port:3000
  }
})
```

#### 5.2.3 HelloWorld

//TODO,SFCæ˜¯ä»€ä¹ˆ

> ä»€ä¹ˆæ˜¯VUEçš„ç»„ä»¶?

+ ä¸€ä¸ªé¡µé¢ä½œä¸ºæ•´ä½“,æ˜¯ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆçš„,æ¯ä¸ªéƒ¨åˆ†åœ¨è¿™é‡Œå°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç»„ä»¶
+ æ¯ä¸ª.vueæ–‡ä»¶å°±å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç»„ä»¶,å¤šä¸ª.vueæ–‡ä»¶å¯ä»¥æ„æˆä¸€ä¸ªæ•´ä½“é¡µé¢
+ ç»„ä»¶åŒ–ç»™æˆ‘ä»¬å¸¦æ¥çš„å¦ä¸€ä¸ªå¥½å¤„å°±æ˜¯ç»„ä»¶çš„å¤ç”¨å’Œç»´æŠ¤éå¸¸çš„æ–¹ä¾¿

<img src="https://blog-resources.this0.com/image/202403301652698.png?x-oss-process=style/this0-blog" style="zoom:40%;" />

> ä»€ä¹ˆæ˜¯.vueæ–‡ä»¶?

+ templateæ ‡ç­¾     ä»£è¡¨ç»„ä»¶çš„htmléƒ¨åˆ†ä»£ç 	ä»£æ›¿ä¼ ç»Ÿçš„.htmlæ–‡ä»¶
+ scriptæ ‡ç­¾           ä»£è¡¨ç»„ä»¶çš„jsä»£ç  ä»£æ›¿ä¼ ç»Ÿçš„.jsæ–‡ä»¶
+ styleæ ‡ç­¾            ä»£è¡¨ç»„ä»¶çš„cssæ ·å¼ä»£ç  ä»£æ›¿ä¼ ç»Ÿçš„.cssæ–‡ä»¶	

> å·¥ç¨‹åŒ–vueé¡¹ç›®å¦‚ä½•ç»„ç»‡è¿™äº›ç»„ä»¶?

+ index.htmlæ˜¯é¡¹ç›®çš„å…¥å£,å…¶ä¸­ `<div id ='app'></div>`æ˜¯ç”¨äºæŒ‚è½½æ‰€æœ‰ç»„ä»¶çš„å…ƒç´ 
+ index.htmlä¸­çš„scriptæ ‡ç­¾`å¼•å…¥äº†ä¸€ä¸ªmain.jsæ–‡ä»¶`,å…·ä½“çš„æŒ‚è½½è¿‡ç¨‹åœ¨main.jsä¸­æ‰§è¡Œ
+ main.jsæ˜¯vueå·¥ç¨‹ä¸­éå¸¸é‡è¦çš„æ–‡ä»¶,ä»–å†³å®šè¿™é¡¹ç›®ä½¿ç”¨å“ªäº›ä¾èµ–,å¯¼å…¥çš„ç¬¬ä¸€ä¸ªç»„ä»¶
+ App.vueæ˜¯vueä¸­çš„æ ¸å¿ƒç»„ä»¶,æ‰€æœ‰çš„å…¶ä»–ç»„ä»¶éƒ½è¦é€šè¿‡è¯¥ç»„ä»¶è¿›è¡Œå¯¼å…¥,è¯¥ç»„ä»¶é€šè¿‡è·¯ç”±å¯ä»¥æ§åˆ¶é¡µé¢çš„åˆ‡æ¢



##### é¡¹ç›®çš„å…¥å£â€”â€”index.html

- åˆ›å»ºä¸€ä¸ªdivå—â€”demo02

- å¼•å…¥äº†æŒ‚è½½æ–‡ä»¶myjs.js

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + Vue</title>
  </head>
  <body>
    <div id="demo02"></div>
    <script type="module" src="/src/my.js"></script>
  </body>
</html>
```

##### ç¼–å†™vueæ¨¡å—

demo02.vue

```vue
<script type="module">
//refæ˜¯VUE3æ¡†æ¶æä¾›çš„ä¸€ä¸ªå‡½æ•°,éœ€è¦å¯¼å…¥
import { ref } from 'vue'
export default {
  setup() {
    //TODO,å“åº”å¼æ•°æ®:   ä¿®æ”¹åVUEä¼šæ›´æ–°DOM
    //VUE3ä¸­æ•°æ®è¦ç»è¿‡refæˆ–è€…reactiveå¤„ç†åæ‰æ˜¯å“åº”å¼çš„

    //refå¤„ç†çš„å“åº”å¼æ•°æ®åœ¨jsç¼–ç ä¿®æ”¹çš„æ—¶å€™éœ€è¦é€šè¿‡.valueæ“ä½œ
    //refå“åº”å¼æ•°æ®åœ¨ç»‘å®šåˆ°htmlä¸Šæ—¶ä¸éœ€è¦.value

    let counter = ref(1)
    function increase() {
      // é€šè¿‡.valueä¿®æ”¹å“åº”å¼æ•°æ®
      counter.value++
    }
    function decrease() {
      counter.value--
    }
    return {
      counter,
      increase,
      decrease,
    }
  },
}
</script>
<template>
  <div>
    <button @click="decrease()">-</button>
    {{ counter }}
    <button @click="increase()">+</button>
  </div>
</template>

<style scoped>
button {
  border: 1px solid red;
}
</style>

```

##### å¼•å…¥vueæ¨¡å—

ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„æŒ‚è½½æ–‡ä»¶â€”â€”my.jså®ç°å¼•å…¥æ¨¡å—ï¼Œå…·ä½“åšäº†ä¸‹é¢å‡ ç‚¹

- å¼•å…¥createAppæ¨¡å—
- å¼•å…¥ç¼–å†™çš„vueæ¨¡å—demo02.vue
- æŒ‚è½½VUEæ¨¡å—åˆ°ä¸»é¡µé¢çš„divæ ‡ç­¾ä¸Š

```js
import { createApp } from 'vue'

import demo02 from './components/demo02.vue'

createApp(demo02).mount('#demo02')

```

##### vueè°ƒç”¨æµç¨‹å›¾

![1684912274904](https://blog-resources.this0.com/image/202403301652705.png?x-oss-process=style/this0-blog)

#### 5.2.4 Vite+Vue3å“åº”å¼å…¥é—¨å’Œsetupå‡½æ•°

> 1 ä½¿ç”¨viteåˆ›å»ºä¸€ä¸ª vue+JavaScripté¡¹ç›®

```shell
npm create vite
npm install 
npm run dev
```

+ App.vue

```html
<script>
    //å­˜å‚¨vueé¡µé¢é€»è¾‘jsä»£ç 
</script>

<template>
    <!-- é¡µé¢çš„æ ·å¼çš„æ˜¯htmlä»£ç -->
</template>

<style scoped>
    /** å­˜å‚¨çš„æ˜¯cssä»£ç ! <style scoped> æ˜¯ Vue.js å•æ–‡ä»¶ç»„ä»¶ä¸­ç”¨äºè®¾ç½®ç»„ä»¶æ ·å¼çš„ä¸€ç§æ–¹å¼ã€‚
    å®ƒçš„å«ä¹‰æ˜¯å°†æ ·å¼å±€é™åœ¨å½“å‰ç»„ä»¶ä¸­ï¼Œä¸å¯¹å…¨å±€æ ·å¼é€ æˆå½±å“ã€‚ */
</style>
```

> 2 vue3å“åº”å¼æ•°æ®å…¥é—¨

//TODOï¼Œscopedï¼Œå®ƒçš„å«ä¹‰æ˜¯å°†æ ·å¼å±€é™åœ¨å½“å‰ç»„ä»¶ä¸­,ä¸å¯¹å…¨å±€æ ·å¼é€ æˆå½±å“

demo02çš„è§£é‡Š

- å“åº”å¼æ•°æ®:   ä¿®æ”¹åï¼ŒVUEä¼šæ›´æ–°DOM

- UE3ä¸­æ•°æ®è¦ç»è¿‡refæˆ–è€…reactiveå¤„ç†åæ‰æ˜¯å“åº”å¼çš„

- refå¤„ç†çš„å“åº”å¼æ•°æ®åœ¨jsç¼–ç ä¿®æ”¹çš„æ—¶å€™éœ€è¦é€šè¿‡.valueæ“ä½œ

- refå“åº”å¼æ•°æ®åœ¨ç»‘å®šåˆ°htmlä¸Šæ—¶ä¸éœ€è¦.value

```html
<script type="module">
    
    //refæ˜¯VUE3æ¡†æ¶æä¾›çš„ä¸€ä¸ªå‡½æ•°,éœ€è¦å¯¼å…¥
    import {ref} from 'vue'
    export default{
        setup(){
            
            //å“åº”å¼æ•°æ®:   ä¿®æ”¹åVUEä¼šæ›´æ–°DOM
            //VUE3ä¸­æ•°æ®è¦ç»è¿‡refæˆ–è€…reactiveå¤„ç†åæ‰æ˜¯å“åº”å¼çš„
            
            //let counter = 1
            //refå¤„ç†çš„å“åº”å¼æ•°æ®åœ¨jsç¼–ç ä¿®æ”¹çš„æ—¶å€™éœ€è¦é€šè¿‡.valueæ“ä½œ
            
            //refå“åº”å¼æ•°æ®åœ¨ç»‘å®šåˆ°htmlä¸Šæ—¶ä¸éœ€è¦.value

            let counter = ref(1)
            function increase(){
                // é€šè¿‡.valueä¿®æ”¹å“åº”å¼æ•°æ®
                counter.value++
            }
            function decrease(){
                counter.value--
            }
            return {
                counter,
                increase,
                decrease
            }
        }
    }
</script>
<template>
    <div>
      <button @click="decrease()">-</button>
      {{ counter }}
      <button @click="increase()">+</button>
    </div>
    
</template>

<style scoped>
    button{
        border: 1px solid red;
    }
</style>
```

> 3 vue3 setupå‡½æ•°å’Œè¯­æ³•ç³–

+ ä½ç½®ï¼šsrc/App.vue

```vue
<script type="module" setup>
   
/* <script type="module" setup> é€šè¿‡setupå…³é”®å­—
å¯ä»¥çœç•¥ export default {setup(){   return{}}}è¿™äº›å†—ä½™çš„è¯­æ³•ç»“æ„ */
    import {ref} from 'vue'
    // å®šä¹‰å“åº”å¼æ•°æ®
    let counter = ref(1)
    // å®šä¹‰å‡½æ•°
    function increase(){
        counter.value++
    }
    function decrease(){
        counter.value--
    }
    
</script>
<template>
    <div>
      <button @click="decrease()">-</button>
      {{ counter }}
      <button @click="increase()">+</button>
    </div>
    
</template>

<style scoped>
    button{
        border: 1px solid red;
    }
</style>

```

#### 5.2.5 Vite+Vue3å…³äºæ ·å¼çš„å¯¼å…¥æ–¹å¼

1. main.jsä¸­è¿›è¡Œå…¨å±€å¼•å…¥

   ```javascript
   import './style/reset.css' //ä¹¦å†™å¼•å…¥çš„èµ„æºçš„ç›¸å¯¹è·¯å¾„å³å¯ï¼
   ```

2. vueæ–‡ä»¶scriptä»£ç å¼•å…¥

   ```javascript
   import './style/reset.css'
   ```

3. Vueæ–‡ä»¶styleä»£ç å¼•å…¥

   ```javascript
   @import './style/reset.css'
   ```

#### 5.2.6 å…³äºJSå’ŒTSé€‰æ‹©çš„é—®é¢˜

> TSæ˜¯JSçš„ä¸€ä¸ªè¶…é›†,ä½¿ç”¨TSä¹‹å,JSçš„è¯­æ³•æ›´åŠ çš„åƒJAVA,å®é™…å¼€å‘ä¸­ç”¨çš„ç¡®å®æ›´å¤š,é‚£ä¹ˆè¿™é‡Œä¸ºä»€ä¹ˆæˆ‘ä»¬æ²¡æœ‰ç«‹å³ä½¿ç”¨TSè¿›è¡Œå¼€å‘,åŸå› å¦‚ä¸‹

1 ä¸ºäº†é™ä½éš¾åº¦,æé«˜å‰ç«¯å·¥ç¨‹åŒ–çš„æ•ˆç‡

2 å¯¹äºå­¦JAVAçš„æˆ‘ä»¬æ¥è¯´,å­¦ä¹ TSéå¸¸å®¹æ˜“,ä½†æ˜¯è¿˜æ˜¯éœ€è¦ä¸€äº›æ—¶é—´

3 TSä¸æ˜¯éå­¦ä¸å¯,ä¸ç”¨TSä»ç„¶å¯ä»¥æ­£å¸¸å¼€å‘å·¥ç¨‹åŒ–çš„å‰ç«¯é¡¹ç›®

4  å°šç¡…è°·å·²ç»å‘å¸ƒäº†TSçš„ä¸“é¡¹è¯¾ç¨‹,è¯·å¤§å®¶åœ¨Bç«™ä¸Šè‡ªè¡Œæœç´¢ "å°šç¡…è°·  TS" 

5  å»ºè®®å¤§å®¶å…ˆå­¦å®Œå®Œæ•´çš„å‰ç«¯å·¥ç¨‹åŒ–å†…å®¹,ç„¶åå†æ ¹æ®éœ€æ±‚å•ç‹¬å­¦ä¹ TSå³å¯

## å…­ã€Vue3è§†å›¾æ¸²æŸ“æŠ€æœ¯//TODO

//TODO,ä»¥å‰ç»ƒä¹ è¿‡,ä»“åº“åœ°å€ï¼šhttps://github.com/baifengxiao/javaweb.git

### 6.1 æ¨¡ç‰ˆè¯­æ³•

#### 6.1.1 æ’å€¼è¡¨è¾¾å¼å’Œæ–‡æœ¬æ¸²æŸ“

> æ’å€¼è¡¨è¾¾å¼:æœ€åŸºæœ¬çš„æ•°æ®ç»‘å®šå½¢å¼æ˜¯æ–‡æœ¬æ’å€¼ï¼Œå®ƒä½¿ç”¨çš„æ˜¯â€œMustacheâ€è¯­æ³• ,å³åŒå¤§æ‹¬å·`{{}}`

``` html
<script setup type="module">
  let msg ="hello vue3"
  let getMsg= ()=>{
    return 'hello vue3 message'
  }
  let age = 19
  let bee = 'èœœ èœ‚'
  // è´­ç‰©è½¦
  const carts = [{name:'å¯ä¹',price:3,number:10},{name:'è–¯ç‰‡',price:6,number:8}];
  //è®¡ç®—è´­ç‰©è½¦æ€»é‡‘é¢
  function compute(){
      let count = 0;
      for(let index in carts){
          count += carts[index].price*carts[index].number;
      }
      return count;
  }
</script>

<template>
  <div>
    <h1>{{ msg }}</h1>
    msgçš„å€¼ä¸º: {{ msg }} <br>
    getMsgè¿”å›çš„å€¼ä¸º:{{ getMsg() }}  <br>
    æ˜¯å¦æˆå¹´: {{ age>=18?'true':'false' }} <br>
    åè½¬: {{ bee.split(' ').reverse().join('-') }} <br>
    è´­ç‰©è½¦æ€»é‡‘é¢: {{ compute() }} <br/>
    è´­ç‰©è½¦æ€»é‡‘é¢: {{carts[0].price*carts[0].number + carts[1].price*carts[1].number}} <br>
  </div>
</template>

<style scoped>

</style>
```

> ä¸ºäº†æ¸²æŸ“åŒæ ‡ä¸­çš„æ–‡æœ¬,æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨`v-text`å’Œ`v-html`å‘½ä»¤

//TODOï¼Œæ²¡å¤´è„‘

+ v-*** è¿™ç§å†™æ³•çš„æ–¹å¼ä½¿ç”¨çš„æ˜¯vueçš„å‘½ä»¤
+ v-***çš„å‘½ä»¤å¿…é¡»ä¾èµ–å…ƒç´ ,å¹¶ä¸”è¦å†™åœ¨å…ƒç´ çš„å¼€å§‹æ ‡ç­¾ä¸­
+ v-***æŒ‡ä»¤æ”¯æŒES6ä¸­çš„å­—ç¬¦ä¸²æ¨¡æ¿
+ æ’å€¼è¡¨è¾¾å¼ä¸­æ”¯æŒjavascriptçš„è¿ç®—è¡¨è¾¾å¼
+ æ’å€¼è¡¨è¾¾å¼ä¸­ä¹Ÿæ”¯æŒå‡½æ•°çš„è°ƒç”¨
+ v-textå¯ä»¥å°†æ•°æ®æ¸²æŸ“æˆåŒæ ‡ç­¾ä¸­é—´çš„æ–‡æœ¬,ä½†æ˜¯ä¸è¯†åˆ«htmlå…ƒç´ ç»“æ„çš„æ–‡æœ¬
+ v-htmlå¯ä»¥å°†æ•°æ®æ¸²æŸ“æˆåŒæ ‡ç­¾ä¸­é—´çš„æ–‡æœ¬,è¯†åˆ«htmlå…ƒç´ ç»“æ„çš„æ–‡æœ¬

``` html
<script setup type="module">
  let msg ='hello vue3'
  let getMsg= ()=>{
    return msg
  }
  let age = 19
  let bee = 'èœœ èœ‚'
  let redMsg ='<font color=\'red\'>msg</font>'
  let greenMsg =`<font color=\'green\'>${msg}</font>`
</script>

<template>
  <div>
    <span v-text='msg'></span> <br>
    <span v-text='redMsg'></span> <br>
    <span v-text='getMsg()'></span> <br>
    <span v-text='age>18?"æˆå¹´":"æœªæˆå¹´"'></span> <br>
    <span v-text='bee.split(" ").reverse().join("-")'></span> <br>
    <span v-html='msg'></span> <br>
    <span v-html='redMsg'></span> <br>
    <span v-html='greenMsg'></span> <br>
    <span v-html="`<font color='green'>${msg}</font>`"></span> <br>
  </div>
</template>

<style scoped>

</style>
```

#### 6.1.2 Attributeå±æ€§æ¸²æŸ“

> æƒ³è¦æ¸²æŸ“ä¸€ä¸ªå…ƒç´ çš„ attributeï¼Œåº”è¯¥ä½¿ç”¨ `v-bind`æŒ‡ä»¤

+ ç”±äºæ’å€¼è¡¨è¾¾å¼ä¸èƒ½ç›´æ¥æ”¾åœ¨æ ‡ç­¾çš„å±æ€§ä¸­,æ‰€æœ‰è¦æ¸²æŸ“å…ƒç´ çš„å±æ€§å°±åº”è¯¥ä½¿ç”¨v-bind
+ v-bindå¯ä»¥ç”¨äºæ¸²æŸ“ä»»ä½•å…ƒç´ çš„å±æ€§,è¯­æ³•ä¸º `v-bind:å±æ€§å='æ•°æ®å'`, å¯ä»¥ç®€å†™ä¸º `:å±æ€§å='æ•°æ®å'`

``` html
<script setup type="module">
const data = {
  name: 'this0',
  url: 'http://www.this0.com',
  logo: 'https://blog-resources.this0.com/base/logo.png',
}
</script>

<template>
  <div>
    <a v-bind:href="data.url" target="_self">
      <img :src="data.logo" :title="data.name" />
      <br />
      <input type="button" :value="`ç‚¹å‡»è®¿é—®${data.name}`" />
    </a>
  </div>
</template>

<style scoped></style>

```

#### 6.1.3 äº‹ä»¶çš„ç»‘å®š&å¸¸è§äº‹ä»¶ä¿®é¥°ç¬¦

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `v-on` æ¥ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œå¯¹åº”çš„ Vueçš„JavaScriptä»£ç ã€‚

+ ç”¨æ³•ï¼š`v-on:click="handler"` æˆ–ç®€å†™ä¸º `@click="handler"`
+ vueä¸­çš„äº‹ä»¶å=åŸç”Ÿäº‹ä»¶åå»æ‰`on` å‰ç¼€   å¦‚:`onClick --> click`
+ handlerçš„å€¼å¯ä»¥æ˜¯æ–¹æ³•äº‹ä»¶å¤„ç†å™¨,ä¹Ÿå¯ä»¥æ˜¯å†…è”äº‹ä»¶å¤„ç†å™¨
+ //TODO,ç»‘å®šäº‹ä»¶æ—¶,å¯ä»¥é€šè¿‡ä¸€äº›ç»‘å®šçš„ä¿®é¥°ç¬¦,å¸¸è§çš„äº‹ä»¶ä¿®é¥°ç¬¦å¦‚ä¸‹
  + `.onceï¼šåªè§¦å‘ä¸€æ¬¡äº‹ä»¶ã€‚[é‡ç‚¹]`
  + `.preventï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶ã€‚[é‡ç‚¹]`
  + .stopï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡ã€‚
  + .captureï¼šä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼è€Œä¸æ˜¯å†’æ³¡æ¨¡å¼ã€‚
  + .selfï¼šåªåœ¨äº‹ä»¶å‘é€è€…è‡ªèº«è§¦å‘æ—¶æ‰è§¦å‘äº‹ä»¶ã€‚

``` html
<script setup type="module">
  import {ref} from 'vue'
  // å“åº”å¼æ•°æ® å½“å‘ç”Ÿå˜åŒ–æ—¶,ä¼šè‡ªåŠ¨æ›´æ–° domæ ‘
  let count=ref(0)
  let addCount= ()=>{
    count.value++
  }
  let incrCount= (event)=>{
    count.value++
    // é€šè¿‡äº‹ä»¶å¯¹è±¡é˜»æ­¢ç»„ä»¶çš„é»˜è®¤è¡Œä¸º
    event.preventDefault();
    
  }
</script>

<template>
  <div>
    <h1>countçš„å€¼æ˜¯:{{ count }}</h1>
    <!-- æ–¹æ³•äº‹ä»¶å¤„ç†å™¨ -->
    <button v-on:click="addCount()">addCount</button> <br>
    <!-- å†…è”äº‹ä»¶å¤„ç†å™¨ -->
    <button @click="count++">incrCount</button> <br>
    <!-- äº‹ä»¶ä¿®é¥°ç¬¦ once åªç»‘å®šäº‹ä»¶ä¸€æ¬¡ -->
    <button @click.once="count++">addOnce</button> <br>
    <!-- äº‹ä»¶ä¿®é¥°ç¬¦ prevent é˜»æ­¢ç»„ä»¶çš„é»˜è®¤è¡Œä¸º -->
    <a href="http://www.atguigu.com" target="_blank" @click.prevent="count++">prevent</a> <br>
    <!-- åŸç”Ÿjsæ–¹å¼é˜»æ­¢ç»„ä»¶é»˜è®¤è¡Œä¸º (æ¨è) -->
    <a href="http://www.atguigu.com" target="_blank" @click="incrCount($event)">prevent</a> <br>
  </div>
</template>

<style scoped>

</style>
```

### 6.2 å“åº”å¼åŸºç¡€

>  æ­¤å¤„çš„å“åº”å¼æ˜¯æŒ‡  : æ•°æ®æ¨¡å‹å‘ç”Ÿå˜åŒ–æ—¶,è‡ªåŠ¨æ›´æ–°DOMæ ‘å†…å®¹,é¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹ä¼šè¿›è¡ŒåŒæ­¥å˜åŒ–,vue3çš„æ•°æ®æ¨¡å‹ä¸æ˜¯è‡ªåŠ¨å“åº”å¼çš„,éœ€è¦æˆ‘ä»¬åšä¸€äº›ç‰¹æ®Šçš„å¤„ç†

//TODO,ä¸Šæ–‡æè¿‡å“åº”å¼ï¼Œè¿™é‡Œæœ‰ç‚¹é‡å¤

#### 6.2.1 å“åº”å¼éœ€æ±‚æ¡ˆä¾‹

> éœ€æ±‚ï¼šå®ç° +  - æŒ‰é’®,å®ç°æ•°å­—åŠ ä¸€å‡ä¸€

```html
<script type="module" setup>
    let counter = 0;
    function show(){
        alert(counter);
    }
</script>

<template>
  <div>
    <button @click="counter--">-</button> 
    {{ counter }} 
    <button @click="counter++">+</button>
    <hr>
    <!-- æ­¤æ¡ˆä¾‹,æˆ‘ä»¬å‘ç°counterå€¼,ä¼šæ”¹å˜,ä½†æ˜¯é¡µé¢ä¸æ”¹å˜! é»˜è®¤Vue3çš„æ•°æ®æ˜¯éå“åº”å¼çš„!-->
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>

```

#### 6.2.2 å“åº”å¼å®ç°å…³é”®å­—ref

> `ref` å¯ä»¥å°†ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„æ•°æ®ï¼ˆå¦‚å­—ç¬¦ä¸²ï¼Œæ•°å­—ç­‰ï¼‰è½¬æ¢ä¸ºä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚ `ref` åªèƒ½åŒ…è£¹å•ä¸€å…ƒç´ 

```html
<script type="module" setup>
    /* ä»vueä¸­å¼•å…¥refæ–¹æ³• */
    import {ref} from 'vue'
    let counter = ref(0);
    function show(){
        alert(counter.value);
    }
    /* å‡½æ•°ä¸­è¦æ“ä½œrefå¤„ç†è¿‡çš„æ•°æ®,éœ€è¦é€šè¿‡.valueå½¢å¼ */
    let decr = () =>{
      counter.value--;
    }
    let incr = () =>{
      counter.value++;
    }
</script>

<template>
  <div>
    <button @click="counter--">-</button> 
    <button @click="decr()">-</button> 
    {{ counter }} 
    <button @click="counter++">+</button>
    <button @click="incr()">+</button> 
    <hr>
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>
```

+ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `ref` åŒ…è£¹äº†ä¸€ä¸ªæ•°å­—ï¼Œåœ¨ä»£ç ä¸­ç»™è¿™ä¸ªæ•°å­—åŠ  1 åï¼Œè§†å›¾ä¹Ÿä¼šè·Ÿç€åŠ¨æ€æ›´æ–°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºä½¿ç”¨äº† `ref`ï¼Œå› æ­¤éœ€è¦åœ¨è®¿é—®è¯¥å¯¹è±¡æ—¶ä½¿ç”¨ `.value` æ¥è·å–å…¶å®é™…å€¼ã€‚

#### 6.2.3 å“åº”å¼å®ç°å…³é”®å­—reactive

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [reactive()](https://cn.vuejs.org/api/reactivity-core.html#reactive "reactive()") å‡½æ•°åˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¹è±¡æˆ–æ•°ç»„ï¼š

```html
<script type="module" setup>
    /* ä»vueä¸­å¼•å…¥reactiveæ–¹æ³• */
    import {ref,reactive} from 'vue'
    let data = reactive({
      counter:0
    })
    function show(){
        alert(data.counter);
    }
    /* å‡½æ•°ä¸­è¦æ“ä½œreactiveå¤„ç†è¿‡çš„æ•°æ®,éœ€è¦é€šè¿‡ å¯¹è±¡å.å±æ€§åçš„æ–¹å¼ */
    let decr = () =>{
      data.counter--;
    }
    let incr = () =>{
      data.counter++;
    }
</script>

<template>
  <div>
    <button @click="data.counter--">-</button> 
    <button @click="decr()">-</button> 
    {{ data.counter }} 
    <button @click="data.counter++">+</button>
    <button @click="incr()">+</button> 
    <hr>
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>
```

> å¯¹æ¯”refå’Œreactive:

+ ä½¿ç”¨ `ref` é€‚ç”¨äºä»¥ä¸‹å¼€å‘åœºæ™¯ï¼š
  + åŒ…è£…åŸºæœ¬ç±»å‹æ•°æ®ï¼š`ref` ä¸»è¦ç”¨äºåŒ…è£…åŸºæœ¬ç±»å‹æ•°æ®ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ç­‰ï¼‰ï¼Œå³åªæœ‰ä¸€ä¸ªå€¼çš„æ•°æ®ï¼Œå¦‚æœä½ æƒ³ç›‘å¬è¿™ä¸ªå€¼çš„å˜åŒ–ï¼Œç”¨ `ref` æœ€ä¸ºæ–¹ä¾¿ã€‚åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ—¶ä¹Ÿå¾ˆå¸¸è§ã€‚
  + è®¿é—®æ–¹å¼ç®€å•ï¼š`ref` å¯¹è±¡åœ¨è®¿é—®æ—¶ä¸æ™®é€šçš„åŸºæœ¬ç±»å‹å€¼æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåªéœ€è¦é€šè¿‡ `.value` è®¿é—®å…¶å®é™…å€¼å³å¯ã€‚

+ ä½¿ç”¨ `reactive` é€‚ç”¨äºä»¥ä¸‹å¼€å‘åœºæ™¯ï¼š
  + åŒ…è£…å¤æ‚å¯¹è±¡ï¼š`reactive` å¯ä»¥å°†ä¸€ä¸ªæ™®é€šå¯¹è±¡è½¬åŒ–ä¸ºå“åº”å¼å¯¹è±¡ï¼Œè¿™æ ·åœ¨æ•°æ®å˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ç•Œé¢ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤„ç†å¤æ‚å¯¹è±¡æˆ–è€…æ•°æ®ç»“æ„ã€‚
  + éœ€è¦é€’å½’ç›‘å¬çš„å±æ€§ï¼šä½¿ç”¨ `reactive` å¯ä»¥é€’å½’è¿½è¸ªæ‰€æœ‰å“åº”å¼å¯¹è±¡å†…éƒ¨çš„å˜åŒ–ï¼Œä»è€Œä¿è¯ç•Œé¢çš„è‡ªåŠ¨æ›´æ–°ã€‚

+ ç»¼ä¸Šæ‰€è¿°ï¼Œ`ref` é€‚ç”¨ä¸ç®€å•æƒ…å½¢ä¸‹çš„æ•°æ®åŒå‘ç»‘å®šï¼Œå¯¹äºåªæœ‰ä¸€ä¸ªå­—ç¬¦ç­‰åŸºæœ¬ç±»å‹æ•°æ®æˆ–è‡ªå®šä¹‰ç»„ä»¶ç­‰æƒ…å†µï¼Œå»ºè®®å¯ä»¥ä½¿ç”¨ `ref`ï¼›è€Œå¯¹äºå¯¹è±¡ã€å‡½æ•°ç­‰è¾ƒä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä»¥åŠéœ€è¦é€’å½’ç›‘å¬çš„å±æ€§å˜åŒ–ï¼Œå»ºè®®ä½¿ç”¨ `reactive`ã€‚å½“ç„¶ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­æ ¹æ®éœ€æ±‚çµæ´»é€‰æ‹©ä¹Ÿæ˜¯ååˆ†å¿…è¦çš„ã€‚

//TODO,`ref` ä¸»è¦ç”¨äºåŒ…è£…åŸºæœ¬ç±»å‹æ•°æ®ï¼Œéœ€è¦é€šè¿‡ `.value` è®¿é—®å…¶å®é™…å€¼ï¼›å¯¹äºå¯¹è±¡ã€å‡½æ•°ç­‰è¾ƒä¸ºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå»ºè®®ä½¿ç”¨ `reactive`

#### 6.2.4 æ‰©å±•å“åº”å¼å…³é”®å­—toRefs å’Œ toRef

//TODO,æ²¡çœ‹ï¼Œåº”è¯¥æ— å…³ç´§è¦

> toRefåŸºäºreactiveå“åº”å¼å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ refå“åº”å¼æ•°æ®ã€‚è¿™æ ·åˆ›å»ºçš„ ref ä¸å…¶æºå±æ€§ä¿æŒåŒæ­¥ï¼šæ”¹å˜æºå±æ€§çš„å€¼å°†æ›´æ–° ref çš„å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚toRefså°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡å¤šä¸ªå±æ€§è½¬æ¢ä¸ºä¸€ä¸ªå¤šä¸ªrefæ•°æ®ï¼Œè¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯æŒ‡å‘æºå¯¹è±¡ç›¸åº”å±æ€§çš„ refã€‚æ¯ä¸ªå•ç‹¬çš„ ref éƒ½æ˜¯ä½¿ç”¨ [toRef()](https://cn.vuejs.org/api/reactivity-utilities.html#toref "toRef()") åˆ›å»ºçš„ã€‚

æ¡ˆä¾‹ï¼šå“åº”æ˜¾ç¤ºreactiveå¯¹è±¡å±æ€§

```html
<script type="module" setup>
    /* ä»vueä¸­å¼•å…¥reactiveæ–¹æ³• */
    import {ref,reactive,toRef,toRefs} from 'vue'
    let data = reactive({
      counter:0,
      name:"test"
    })

    // å°†ä¸€ä¸ªreactiveå“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§è½¬æ¢æˆä¸€ä¸ªrefå“åº”å¼å¯¹è±¡
    let ct =toRef(data,'counter');
    // å°†ä¸€ä¸ªreactiveå“åº”å¼å¯¹è±¡ä¸­çš„å¤šä¸ªå±æ€§è½¬æ¢æˆå¤šä¸ªrefå“åº”å¼å¯¹è±¡
    let {counter,name} = toRefs(data)

    function show(){
        alert(data.counter);
        // è·å–refçš„å“åº”å¯¹è±¡,éœ€è¦é€šè¿‡.valueå±æ€§
        alert(counter.value);
        alert(name.value)
    }
    /* å‡½æ•°ä¸­è¦æ“ä½œrefå¤„ç†è¿‡çš„æ•°æ®,éœ€è¦é€šè¿‡.valueå½¢å¼ */
    let decr = () =>{
      data.counter--;
    }
    let incr = () =>{
      /* refå“åº”å¼æ•°æ®,è¦é€šè¿‡.valueå±æ€§è®¿é—® */
      counter.value++;
    }
</script>

<template>
  <div>
    <button @click="data.counter--">-</button> 
    <button @click="decr()">-</button> 
    {{ data.counter }} 
    &amp;
    {{ ct }} 
    <button @click="data.counter++">+</button>
    <button @click="incr()">+</button> 
    <hr>
    <button @click="show()">æ˜¾ç¤ºcounterå€¼</button>
   </div>
</template> 

<style scoped>

</style>


```

### 6.3 æ¡ä»¶å’Œåˆ—è¡¨æ¸²æŸ“

#### 6.3.1 æ¡ä»¶æ¸²æŸ“

> `v-if` æ¡ä»¶æ¸²æŸ“

+ `v-if='è¡¨è¾¾å¼' `åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å›çœŸå€¼æ—¶æ‰è¢«æ¸²æŸ“

+ ä¹Ÿå¯ä»¥ä½¿ç”¨ `v-else` ä¸º `v-if` æ·»åŠ ä¸€ä¸ªâ€œelse åŒºå—â€ã€‚

+ ä¸€ä¸ª `v-else` å…ƒç´ å¿…é¡»è·Ÿåœ¨ä¸€ä¸ª `v-if` å…ƒç´ åé¢ï¼Œå¦åˆ™å®ƒå°†ä¸ä¼šè¢«è¯†åˆ«ã€‚

```html
<script type="module" setup>
    import {ref} from 'vue'
    let awesome = ref(true)
</script>

<template>
  <div>
    <h1 v-if="awesome">Vue is awesome!</h1>
    <h1 v-else>Oh no ğŸ˜¢</h1>
    <button @click="awesome = !awesome">Toggle</button>
  </div>
</template> 

<style scoped>
</style>
```

> `v-show`æ¡ä»¶æ¸²æŸ“æ‰©å±•ï¼š

+ å¦ä¸€ä¸ªå¯ä»¥ç”¨æ¥æŒ‰æ¡ä»¶æ˜¾ç¤ºä¸€ä¸ªå…ƒç´ çš„æŒ‡ä»¤æ˜¯ `v-show`ã€‚å…¶ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼š

+ ä¸åŒä¹‹å¤„åœ¨äº `v-show` ä¼šåœ¨ DOM æ¸²æŸ“ä¸­ä¿ç•™è¯¥å…ƒç´ ï¼›`v-show` ä»…åˆ‡æ¢äº†è¯¥å…ƒç´ ä¸Šåä¸º `display` çš„ CSS å±æ€§ã€‚

+ `v-show` ä¸æ”¯æŒåœ¨ `<template>` å…ƒç´ ä¸Šä½¿ç”¨ï¼Œä¹Ÿä¸èƒ½å’Œ `v-else` æ­é…ä½¿ç”¨ã€‚

``` html
<script type="module" setup>
    import {ref} from 'vue'
    let awesome = ref(true)
</script>

<template>
  <div>
    <h1 id="ha"  v-show="awesome">Vue is awesome!</h1>
    <h1 id="hb"  v-if="awesome">Vue is awesome!</h1>
    <h1 id="hc"  v-else>Oh no ğŸ˜¢</h1>
    <button @click="awesome = !awesome">Toggle</button>
  </div>
</template> 

<style scoped>
</style>

```

![1684565503347](https://blog-resources.this0.com/image/202403301652546.png?x-oss-process=style/this0-blog )



> **`v-if`**    **vs** **`v-show`**

+ `v-if` æ˜¯â€œçœŸå®çš„â€æŒ‰æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒç¡®ä¿äº†åœ¨åˆ‡æ¢æ—¶ï¼Œæ¡ä»¶åŒºå—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶éƒ½ä¼šè¢«é”€æ¯ä¸é‡å»ºã€‚

+ `v-if` ä¹Ÿæ˜¯**æƒ°æ€§**çš„ï¼šå¦‚æœåœ¨åˆæ¬¡æ¸²æŸ“æ—¶æ¡ä»¶å€¼ä¸º falseï¼Œåˆ™ä¸ä¼šåšä»»ä½•äº‹ã€‚æ¡ä»¶åŒºå—åªæœ‰å½“æ¡ä»¶é¦–æ¬¡å˜ä¸º true æ—¶æ‰è¢«æ¸²æŸ“ã€‚

+ ç›¸æ¯”ä¹‹ä¸‹ï¼Œ`v-show` ç®€å•è®¸å¤šï¼Œå…ƒç´ æ— è®ºåˆå§‹æ¡ä»¶å¦‚ä½•ï¼Œå§‹ç»ˆä¼šè¢«æ¸²æŸ“ï¼Œåªæœ‰ CSS `display` å±æ€§ä¼šè¢«åˆ‡æ¢ã€‚

+ æ€»çš„æ¥è¯´ï¼Œ`v-if` æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ `v-show` æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ `v-show` è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶ç»‘å®šæ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ `v-if` ä¼šæ›´åˆé€‚ã€‚

//TODO,ä¸Šé¢çš„è®°ä¸€ä¸‹

#### 6.3.2 åˆ—è¡¨æ¸²æŸ“

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `v-for` æŒ‡ä»¤åŸºäºä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ã€‚

+ `v-for` æŒ‡ä»¤çš„å€¼éœ€è¦ä½¿ç”¨ `item in items` å½¢å¼çš„ç‰¹æ®Šè¯­æ³•ï¼Œå…¶ä¸­ `items` æ˜¯æºæ•°æ®çš„æ•°ç»„ï¼Œè€Œ `item` æ˜¯è¿­ä»£é¡¹çš„**åˆ«å**ï¼š

+ åœ¨ `v-for` å—ä¸­å¯ä»¥å®Œæ•´åœ°è®¿é—®çˆ¶ä½œç”¨åŸŸå†…çš„å±æ€§å’Œå˜é‡ã€‚`v-for` ä¹Ÿæ”¯æŒä½¿ç”¨å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå½“å‰é¡¹çš„ä½ç½®ç´¢å¼•ã€‚

```html
<script type="module" setup>
    import {ref,reactive} from 'vue'
    let parentMessage= ref('äº§å“')
    let items =reactive([
      {
        id:'item1',
        message:"è–¯ç‰‡"
      },
      {
        id:'item2',
        message:"å¯ä¹"
      }
    ])
</script>

<template>
  <div>
    <ul>
      <!-- :keyä¸å†™ä¹Ÿå¯ä»¥ -->
      <li v-for='item in items' :key='item.id'>
        {{ item.message }}
      </li>
    </ul>

    <ul>
      <!-- indexè¡¨ç¤ºç´¢å¼•,å½“ç„¶ä¸æ˜¯éå¾—ä½¿ç”¨indexè¿™ä¸ªå•è¯ -->
      <li v-for="(item, index) in items" :key="index">
        {{ parentMessage }} - {{ index }} - {{ item.message }}
      </li>
    </ul>
   
  </div>
</template> 

<style scoped>
</style>
```

+ æ¡ˆä¾‹ï¼šå®ç°è´­ç‰©è½¦æ˜¾ç¤ºå’Œåˆ é™¤è´­ç‰©é¡¹

``` html
<script type="module" setup>

    //å¼•å…¥æ¨¡å—
    import { reactive} from 'vue'
    //å‡†å¤‡è´­ç‰©è½¦æ•°æ®,è®¾ç½®æˆå“åº”æ•°æ®
    const carts = reactive([{name:'å¯ä¹',price:3,number:10},{name:'è–¯ç‰‡',price:6,number:8}])

    //è®¡ç®—è´­ç‰©è½¦æ€»é‡‘é¢
    function compute(){
      let count = 0;
      for(let index in carts){
        count += carts[index].price*carts[index].number;
      }
      return count;
    }
    //åˆ é™¤è´­ç‰©é¡¹æ–¹æ³•
    function removeCart(index){
      carts.splice(index,1);
    }
    
</script>

<template>
    <div>
        <table>
           <thead>
               <tr>
                  <th>åºå·</th>
                  <th>å•†å“å</th>
                  <th>ä»·æ ¼</th>
                  <th>æ•°é‡</th>
                  <th>å°è®¡</th>
                  <th>æ“ä½œ</th>
               </tr>
           </thead>
           <tbody v-if="carts.length > 0">
               <!-- æœ‰æ•°æ®æ˜¾ç¤º-->
               <tr v-for="cart,index in carts" :key="index">
                  <th>{{ index+1 }}</th>
                  <th>{{ cart.name }}</th>
                  <th>{{ cart.price + 'å…ƒ' }}</th>
                  <th>{{ cart.number }}</th>
                  <th>{{ cart.price*cart.number  + 'å…ƒ'}}</th>
                  <th> <button @click="removeCart(index)">åˆ é™¤</button> </th>
               </tr>
           </tbody>
           <tbody v-else>
               <!-- æ²¡æœ‰æ•°æ®æ˜¾ç¤º-->
               <tr>
                  <td colspan="6">è´­ç‰©è½¦æ²¡æœ‰æ•°æ®!</td>
               </tr>
           </tbody>
        </table>
        è´­ç‰©è½¦æ€»é‡‘é¢: {{ compute() }} å…ƒ
    </div>
</template> 

<style scoped>
</style>
```

### 6.4 åŒå‘ç»‘å®š

> å•é¡¹ç»‘å®šå’ŒåŒå‘ç»‘å®š

+ å•å‘ç»‘å®š: å“åº”å¼æ•°æ®çš„å˜åŒ–ä¼šæ›´æ–°domæ ‘,ä½†æ˜¯domæ ‘ä¸Šç”¨æˆ·çš„æ“ä½œé€ æˆçš„æ•°æ®æ”¹å˜ä¸ä¼šåŒæ­¥æ›´æ–°åˆ°å“åº”å¼æ•°æ®
+ åŒå‘ç»‘å®š: å“åº”å¼æ•°æ®çš„å˜åŒ–ä¼šæ›´æ–°domæ ‘,ä½†æ˜¯domæ ‘ä¸Šç”¨æˆ·çš„æ“ä½œé€ æˆçš„æ•°æ®æ”¹å˜ä¼šåŒæ­¥æ›´æ–°åˆ°å“åº”å¼æ•°æ®
  + ç”¨æˆ·é€šè¿‡è¡¨å•æ ‡ç­¾æ‰èƒ½å¤Ÿè¾“å…¥æ•°æ®,æ‰€ä»¥åŒå‘ç»‘å®šéƒ½æ˜¯åº”ç”¨åˆ°è¡¨å•æ ‡ç­¾ä¸Šçš„,å…¶ä»–æ ‡ç­¾ä¸è¡Œ
  + v-modelä¸“é—¨ç”¨äºåŒå‘ç»‘å®šè¡¨å•æ ‡ç­¾çš„valueå±æ€§,è¯­æ³•ä¸º `v-model:value=''`,å¯ä»¥ç®€å†™ä¸º `v-model=''`
  + v-modelè¿˜å¯ä»¥ç”¨äºå„ç§ä¸åŒç±»å‹çš„è¾“å…¥ï¼Œ`<textarea>`ã€`<select>` å…ƒç´ ã€‚

```html
<script type="module" setup>

  //å¼•å…¥æ¨¡å—
  import { reactive,ref} from 'vue' 
  let hbs = ref([]); //è£…çˆ±å¥½çš„å€¼
  let user = reactive({username:null,password:null,introduce:null,pro:null})   
  function login(){
    alert(hbs.value);
    alert(JSON.stringify(user));
  }
  function clearx(){
    //user = {};// è¿™ä¸­å†™æ³•ä¼šå°†æ•°æ®å˜æˆéå“åº”çš„,åº”è¯¥æ˜¯user.username=""
    user.username=''
    user.password=''
    user.introduce=''
    user.pro=''
    hbs.value.splice(0,hbs.value.length);;
  }
</script>

<template>
  <div>
      è´¦å·ï¼š <input type="text" placeholder="è¯·è¾“å…¥è´¦å·ï¼" v-model="user.username"> <br>
      å¯†ç ï¼š <input type="text" placeholder="è¯·è¾“å…¥è´¦å·ï¼" v-model="user.password"> <br>
      çˆ±å¥½ï¼š 
        åƒ <input type="checkbox" name="hbs" v-model="hbs" value="åƒ"> 
        å– <input type="checkbox" name="hbs" v-model="hbs" value="å–">
        ç© <input type="checkbox" name="hbs" v-model="hbs" value="ç©">
        ä¹ <input type="checkbox" name="hbs" v-model="hbs" value="ä¹">
      <br>
      ç®€ä»‹:<textarea v-model="user.introduce"></textarea>
      <br>
      ç±è´¯:
          <select v-model="user.pro">
            <option value="1">é»‘</option>
            <option value="2">å‰</option>
            <option value="3">è¾½</option>
            <option value="4">äº¬</option>
            <option value="5">æ´¥</option>
            <option value="6">å†€</option>
          </select> 
      <br>
      <button @click="login()">ç™»å½•</button> 
      <button @click="clearx()">é‡ç½®</button>
      <hr>
      æ˜¾ç¤ºçˆ±å¥½:{{ hbs }}
      <hr>
      æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯:{{ user }}
  </div> 
</template> 

<style scoped>
</style>

```

### 6.5 å±æ€§è®¡ç®—

//TODOã€‚æ²¡çœ‹

> æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿåªèƒ½ç”¨æ¥åšç®€å•çš„æ“ä½œã€‚å¦‚æœåœ¨æ¨¡æ¿ä¸­å†™å¤ªå¤šé€»è¾‘ï¼Œä¼šè®©æ¨¡æ¿å˜å¾—è‡ƒè‚¿ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåŒ…å«åµŒå¥—æ•°ç»„çš„å¯¹è±¡ï¼š

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { reactive,computed} from 'vue'
  const author = reactive({
    name: 'John Doe',
    books: [
      'Vue 2 - Advanced Guide',
      'Vue 3 - Basic Guide',
      'Vue 4 - The Mystery'
    ]
  })
 
</script>

<template>
  <div>
    <p>{{author.name}} Has published books?:</p>
    <span>{{ author.books.length > 0 ? 'Yes' : 'No' }}</span>
  </div>
</template> 

<style scoped>
</style>
```

+ è¿™é‡Œçš„æ¨¡æ¿çœ‹èµ·æ¥æœ‰äº›å¤æ‚ã€‚æˆ‘ä»¬å¿…é¡»è®¤çœŸçœ‹å¥½ä¸€ä¼šå„¿æ‰èƒ½æ˜ç™½å®ƒçš„è®¡ç®—ä¾èµ–äº `author.books`ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœåœ¨æ¨¡æ¿ä¸­éœ€è¦ä¸æ­¢ä¸€æ¬¡è¿™æ ·çš„è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä¸æƒ³å°†è¿™æ ·çš„ä»£ç åœ¨æ¨¡æ¿é‡Œé‡å¤å¥½å¤šéã€‚

> å› æ­¤æˆ‘ä»¬æ¨èä½¿ç”¨**è®¡ç®—å±æ€§**æ¥æè¿°ä¾èµ–å“åº”å¼çŠ¶æ€çš„å¤æ‚é€»è¾‘ã€‚è¿™æ˜¯é‡æ„åçš„ç¤ºä¾‹ï¼š

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { reactive,computed} from 'vue'
  const author = reactive({
    name: 'John Doe',
    books: [
      'Vue 2 - Advanced Guide',
      'Vue 3 - Basic Guide',
      'Vue 4 - The Mystery'
    ]
  })
  // ä¸€ä¸ªè®¡ç®—å±æ€§ ref
  const publishedBooksMessage = computed(() => {
    console.log("publishedBooksMessage")
    return author.books.length > 0 ? 'Yes' : 'No'
  })
  // ä¸€ä¸ªå‡½æ•°
  let hasBooks = ()=>{
    console.log("hasBooks")
    return author.books.length > 0?'Yes':'no'
  }

</script>

<template>
  <div>
    <p>{{author.name}} Has published books?:</p>
    <span>{{ author.books.length > 0 ? 'Yes' : 'No' }}</span>
    <span>{{ hasBooks() }}</span><!-- è°ƒç”¨æ–¹æ³•,æ¯ä¸ªæ ‡ç­¾éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ -->
    <span>{{ hasBooks() }}</span>

    <p>{{author.name}} Has published books?:</p>
    <span>{{ publishedBooksMessage }}</span><!-- å±æ€§è®¡ç®—,å±æ€§å€¼ä¸å˜æ—¶,å¤šä¸ªä¸ªæ ‡ç­¾åªä¼šè°ƒç”¨ä¸€æ¬¡ -->
    <span>{{ publishedBooksMessage }}</span>
  </div>
</template> 

<style scoped>
</style>

```

+ æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªè®¡ç®—å±æ€§ `publishedBooksMessage`ã€‚`computed()` æ–¹æ³•æœŸæœ›æ¥æ”¶ä¸€ä¸ª getter å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä¸€ä¸ª**è®¡ç®—å±æ€§ ref**ã€‚å’Œå…¶ä»–ä¸€èˆ¬çš„ ref ç±»ä¼¼ï¼Œä½ å¯ä»¥é€šè¿‡ `publishedBooksMessage.value` è®¿é—®è®¡ç®—ç»“æœã€‚è®¡ç®—å±æ€§ ref ä¹Ÿä¼šåœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼Œå› æ­¤åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­å¼•ç”¨æ—¶æ— éœ€æ·»åŠ  `.value`ã€‚

+ Vue çš„è®¡ç®—å±æ€§ä¼šè‡ªåŠ¨è¿½è¸ªå“åº”å¼ä¾èµ–ã€‚å®ƒä¼šæ£€æµ‹åˆ° `publishedBooksMessage` ä¾èµ–äº `author.books`ï¼Œæ‰€ä»¥å½“ `author.books` æ”¹å˜æ—¶ï¼Œä»»ä½•ä¾èµ–äº `publishedBooksMessage` çš„ç»‘å®šéƒ½ä¼šåŒæ—¶æ›´æ–°ã€‚

> è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•

+ è‹¥æˆ‘ä»¬å°†åŒæ ·çš„å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯è®¡ç®—å±æ€§ï¼Œä¸¤ç§æ–¹å¼åœ¨ç»“æœä¸Šç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œç„¶è€Œï¼Œä¸åŒä¹‹å¤„åœ¨äº**è®¡ç®—å±æ€§å€¼ä¼šåŸºäºå…¶å“åº”å¼ä¾èµ–è¢«ç¼“å­˜**ã€‚ä¸€ä¸ªè®¡ç®—å±æ€§ä»…ä¼šåœ¨å…¶å“åº”å¼ä¾èµ–æ›´æ–°æ—¶æ‰é‡æ–°è®¡ç®—ã€‚è¿™æ„å‘³ç€åªè¦ `author.books` ä¸æ”¹å˜ï¼Œæ— è®ºå¤šå°‘æ¬¡è®¿é—® `publishedBooksMessage` éƒ½ä¼šç«‹å³è¿”å›å…ˆå‰çš„è®¡ç®—ç»“æœ!

### 6.6 æ•°æ®ç›‘å¬å™¨

//TODO

> è®¡ç®—å±æ€§å…è®¸æˆ‘ä»¬å£°æ˜æ€§åœ°è®¡ç®—è¡ç”Ÿå€¼ã€‚ç„¶è€Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çŠ¶æ€å˜åŒ–æ—¶æ‰§è¡Œä¸€äº›â€œå‰¯ä½œç”¨â€ï¼šä¾‹å¦‚æ›´æ”¹ DOMï¼Œæˆ–æ˜¯æ ¹æ®å¼‚æ­¥æ“ä½œçš„ç»“æœå»ä¿®æ”¹å¦ä¸€å¤„çš„çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [watch](https://cn.vuejs.org/api/reactivity-core.html#watch "watch")[ å‡½æ•°](https://cn.vuejs.org/api/reactivity-core.html#watch " å‡½æ•°")åœ¨æ¯æ¬¡å“åº”å¼çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘å›è°ƒå‡½æ•°ï¼š

+ watchä¸»è¦ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
  + å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶éœ€è¦æ‰§è¡Œç›¸åº”çš„æ“ä½œ
  + ç›‘å¬æ•°æ®å˜åŒ–ï¼Œå½“æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶è§¦å‘ç›¸åº”æ“ä½œ
  + åœ¨å¼‚æ­¥æ“ä½œå‰æˆ–æ“ä½œåéœ€è¦æ‰§è¡Œç›¸åº”çš„æ“ä½œ

> ç›‘æ§å“åº”å¼æ•°æ®ï¼ˆwatchï¼‰ï¼š

//TODOï¼Œæ·±åº¦ç›‘è§†æ²¡çœ‹

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { ref,reactive,watch} from 'vue'
 
  let firstname=ref('')
  let lastname=reactive({name:''})
  let fullname=ref('')

  //ç›‘å¬ä¸€ä¸ªrefå“åº”å¼æ•°æ®
  watch(firstname,(newValue,oldValue)=>{
    console.log(`${oldValue}å˜ä¸º${newValue}`)
    fullname.value=firstname.value+lastname.name
  })
  //ç›‘å¬reactiveå“åº”å¼æ•°æ®çš„æŒ‡å®šå±æ€§
  watch(()=>lastname.name,(newValue,oldValue)=>{
    console.log(`${oldValue}å˜ä¸º${newValue}`)
    fullname.value=firstname.value+lastname.name
  })
  //ç›‘å¬reactiveå“åº”å¼æ•°æ®çš„æ‰€æœ‰å±æ€§(æ·±åº¦ç›‘è§†,ä¸€èˆ¬ä¸æ¨è)
  //deep:true æ·±åº¦ç›‘è§†
  //immediate:true æ·±åº¦ç›‘è§†åœ¨è¿›å…¥é¡µé¢æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡
  watch(()=>lastname,(newValue,oldValue)=>{
    // æ­¤æ—¶çš„newValueå’ŒoldValueä¸€æ ·,éƒ½æ˜¯lastname
    console.log(newValue)
    console.log(oldValue)
    fullname.value=firstname.value+lastname.name
  },{deep:true,immediate:false})
</script>

<template>
  <div>
    å…¨å:{{fullname}} <br>
    å§“æ°:<input type="text" v-model="firstname"> <br>
    åå­—:<input type="text" v-model="lastname.name" > <br>
  </div>
</template> 

<style scoped>
</style>
```

> ç›‘æ§å“åº”å¼æ•°æ®(watchEffect)ï¼š

+ watchEffecté»˜è®¤ç›‘å¬æ‰€æœ‰çš„å“åº”å¼æ•°æ®

```html
<script type="module" setup>
  //å¼•å…¥æ¨¡å—
  import { ref,reactive,watch, watchEffect} from 'vue'
 
  let firstname=ref('')
  let lastname=reactive({name:''})
  let fullname=ref('')

  //ç›‘å¬æ‰€æœ‰å“åº”å¼æ•°æ®
  watchEffect(()=>{
    //ç›´æ¥åœ¨å†…éƒ¨ä½¿ç”¨ç›‘å¬å±æ€§å³å¯ï¼ä¸ç”¨å¤–éƒ¨å£°æ˜
    //ä¹Ÿä¸éœ€è¦ï¼Œå³æ—¶å›è°ƒè®¾ç½®ï¼é»˜è®¤åˆå§‹åŒ–å°±åŠ è½½ï¼
    console.log(firstname.value)
    console.log(lastname.name)
    fullname.value=`${firstname.value}${lastname.name}`
  })
</script>

<template>
  <div>
    å…¨å:{{fullname}} <br>
    å§“æ°:<input type="text" v-model="firstname"> <br>
    åå­—:<input type="text" v-model="lastname.name" > <br>
  </div>
</template> 

<style scoped>
</style>
```

> `watch` vs. `watchEffect`

+ `watch` å’Œ `watchEffect` éƒ½èƒ½å“åº”å¼åœ°æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„å›è°ƒã€‚å®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯è¿½è¸ªå“åº”å¼ä¾èµ–çš„æ–¹å¼ï¼š
  + `watch` åªè¿½è¸ªæ˜ç¡®ä¾¦å¬çš„æ•°æ®æºã€‚å®ƒä¸ä¼šè¿½è¸ªä»»ä½•åœ¨å›è°ƒä¸­è®¿é—®åˆ°çš„ä¸œè¥¿ã€‚å¦å¤–ï¼Œä»…åœ¨æ•°æ®æºç¡®å®æ”¹å˜æ—¶æ‰ä¼šè§¦å‘å›è°ƒã€‚`watch` ä¼šé¿å…åœ¨å‘ç”Ÿå‰¯ä½œç”¨æ—¶è¿½è¸ªä¾èµ–ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬èƒ½æ›´åŠ ç²¾ç¡®åœ°æ§åˆ¶å›è°ƒå‡½æ•°çš„è§¦å‘æ—¶æœºã€‚
  + `watchEffect`ï¼Œåˆ™ä¼šåœ¨å‰¯ä½œç”¨å‘ç”ŸæœŸé—´è¿½è¸ªä¾èµ–ã€‚å®ƒä¼šåœ¨åŒæ­¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨è¿½è¸ªæ‰€æœ‰èƒ½è®¿é—®åˆ°çš„å“åº”å¼å±æ€§ã€‚è¿™æ›´æ–¹ä¾¿ï¼Œè€Œä¸”ä»£ç å¾€å¾€æ›´ç®€æ´ï¼Œä½†æœ‰æ—¶å…¶å“åº”æ€§ä¾èµ–å…³ç³»ä¼šä¸é‚£ä¹ˆæ˜ç¡®ã€‚

### 6.7. Vueç”Ÿå‘½å‘¨æœŸ

//TODOï¼Œä¸€å®šè¦ä¼š

#### 6.7.1 ç”Ÿå‘½å‘¨æœŸç®€ä»‹

> æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸º`ç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°`ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç !

+ å‘¨æœŸå›¾è§£ï¼š

<img src="https://blog-resources.this0.com/image/202403301652700.png?x-oss-process=style/this0-blog" style="zoom: 50%;" />

+ å¸¸è§é’©å­å‡½æ•°
  + onMounted()              æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåæ‰§è¡Œã€‚ 
  + onUpdated()               æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶å› ä¸ºå“åº”å¼çŠ¶æ€å˜æ›´è€Œæ›´æ–°å…¶ DOM æ ‘ä¹‹åè°ƒç”¨ã€‚ 
  + onUnmounted()         æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ç»„ä»¶å®ä¾‹è¢«å¸è½½ä¹‹åè°ƒç”¨ã€‚ 
  + onBeforeMount()       æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œåœ¨ç»„ä»¶è¢«æŒ‚è½½ä¹‹å‰è¢«è°ƒç”¨ã€‚ 
  + onBeforeUpdate()      æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œåœ¨ç»„ä»¶å³å°†å› ä¸ºå“åº”å¼çŠ¶æ€å˜æ›´è€Œæ›´æ–°å…¶ DOM æ ‘ä¹‹å‰è°ƒç”¨ã€‚ 
  + onBeforeUnmount()  æ³¨å†Œä¸€ä¸ªé’©å­ï¼Œåœ¨ç»„ä»¶å®ä¾‹è¢«å¸è½½ä¹‹å‰è°ƒç”¨ã€‚ 

#### 6.7.2 ç”Ÿå‘½å‘¨æœŸæ¡ˆä¾‹

```html
<script setup>

    import {ref,onUpdated,onMounted,onBeforeUpdate} from 'vue'
    
    let message =ref('hello')
   
    // æŒ‚è½½å®Œæ¯•ç”Ÿå‘½å‘¨æœŸ
    onMounted(()=>{
      console.log('-----------onMounted---------')
      let span1 =document.getElementById("span1")
      console.log(span1.innerText)
    })
    // æ›´æ–°å‰ç”Ÿå‘½å‘¨æœŸ
    onBeforeUpdate(()=>{
      console.log('-----------onBeforeUpdate---------')
      console.log(message.value)
      let span1 =document.getElementById("span1")
      console.log(span1.innerText)
    })
    // æ›´æ–°å®Œæˆç”Ÿå‘½å‘¨æœŸ
    onUpdated(()=>{
      console.log('-----------onUpdated---------')
      let span1 =document.getElementById("span1")
      console.log(span1.innerText)
    })
</script>

<template>
  <div>
    <span id="span1" v-text="message"></span> <br>
    <input type="text" v-model="message">
  </div>
  
</template>

<style scoped>
</style>
```

### 6.8 Vueçˆ¶å­ç»„ä»¶é—´ä¼ å‚

#### 6.8.1 ç»„ä»¶åŸºç¡€

> ç»„ä»¶å…è®¸æˆ‘ä»¬å°† UI åˆ’åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”å¯ä»¥å¯¹æ¯ä¸ªéƒ¨åˆ†è¿›è¡Œå•ç‹¬çš„æ€è€ƒã€‚ç»„ä»¶å°±æ˜¯å®ç°åº”ç”¨ä¸­å±€éƒ¨åŠŸèƒ½ä»£ç å’Œèµ„æºçš„é›†åˆï¼åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»„ä»¶å¸¸å¸¸è¢«ç»„ç»‡æˆå±‚å±‚åµŒå¥—çš„æ ‘çŠ¶ç»“æ„ï¼š

<img src="https://blog-resources.this0.com/image/202403301652858.png?x-oss-process=style/this0-blog" style="zoom:50%;" />

+ è¿™å’Œæˆ‘ä»¬åµŒå¥— HTML å…ƒç´ çš„æ–¹å¼ç±»ä¼¼ï¼ŒVue å®ç°äº†è‡ªå·±çš„ç»„ä»¶æ¨¡å‹ï¼Œä½¿æˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…å°è£…è‡ªå®šä¹‰å†…å®¹ä¸é€»è¾‘ã€‚

> ä¼ ç»Ÿæ–¹å¼ç¼–å†™åº”ç”¨ï¼š

<img src="https://blog-resources.this0.com/image/202403301652857.png?x-oss-process=style/this0-blog" style="zoom: 40%;" />

> ç»„ä»¶æ–¹å¼ç¼–å†™åº”ç”¨ï¼š

<img src="https://blog-resources.this0.com/image/202403301652698.png?x-oss-process=style/this0-blog" style="zoom:40%;" />

+ ç»„ä»¶åŒ–ï¼šå¯¹js/css/htmlç»Ÿä¸€å°è£…,è¿™æ˜¯VUEä¸­çš„æ¦‚å¿µ

+ æ¨¡å—åŒ–ï¼šå¯¹jsçš„ç»Ÿä¸€å°è£…,è¿™æ˜¯ES6ä¸­çš„æ¦‚å¿µ
+ ç»„ä»¶åŒ–ä¸­,å¯¹jséƒ¨åˆ†ä»£ç çš„å¤„ç†ä½¿ç”¨ES6ä¸­çš„æ¨¡å—åŒ–

#### 6.8.2 ç»„ä»¶åŒ–å…¥é—¨æ¡ˆä¾‹

> æ¡ˆä¾‹éœ€æ±‚ï¼š åˆ›å»ºä¸€ä¸ªé¡µé¢ï¼ŒåŒ…å«å¤´éƒ¨å’Œèœå•ä»¥åŠå†…å®¹æ˜¾ç¤ºåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸä½¿ç”¨ç‹¬ç«‹ç»„å»ºï¼

![1686885192862](https://blog-resources.this0.com/image/202403301652801.png?x-oss-process=style/this0-blog )

> 1 å‡†å¤‡vueé¡¹ç›®

```shell
npm create vite
cd viteé¡¹ç›®
npm install
```

> 2 å®‰è£…ç›¸å…³ä¾èµ–

```shell
npm install sass
npm install bootstrap
```

>  3 åœ¨src/componentsæ–‡ä»¶ä¸‹åˆ›å»ºå­ç»„ä»¶, vscodeéœ€è¦å®‰è£…Veturæ’ä»¶ï¼Œè¿™æ ·vueæ–‡ä»¶æœ‰å¿«æ·æç¤º

+ Header.vue

```html
<script setup type="module">
</script>

<template>
    <div>
        æ¬¢è¿ï¼š xx <a href="#">é€€å‡ºç™»å½•</a>
    </div>
</template>

<style>
</style>
```

+ Navigator.vue

```html
<script setup type="module">
</script>

<template>
    <!-- æ¨èå†™ä¸€ä¸ªæ ¹æ ‡ç­¾-->
    <div>
       <ul>
          <li>å­¦å‘˜ç®¡ç†</li>
          <li>å›¾ä¹¦ç®¡ç†</li>
          <li>è¯·å‡ç®¡ç†</li>
          <li>è€ƒè¯•ç®¡ç†</li>
          <li>è®²å¸ˆç®¡ç†</li>
       </ul>
    </div>
</template>

<style>
</style>
```

+ Content.vue

```html
<script setup type="module">
</script>

<template>
    <div>
        å±•ç¤ºçš„ä¸»è¦å†…å®¹ï¼
    </div>
</template>

<style>
</style>
```

+ App.vue  å…¥å£ç»„ä»¶Appå¼•å…¥ç»„ä»¶

```html
<script setup>
    import Header  from './components/Header.vue'
    import Navigator  from './components/Navigator.vue'
    import Content  from './components/Content.vue'
</script>

<template>
  <div>
     <Header class="header"></Header>
     <Navigator class="navigator"></Navigator>
     <Content class="content"></Content>
  </div>
</template>

<style scoped>
    .header{
       height: 80px;
       border: 1px solid red;
    }

    .navigator{
      width: 15%;
      height: 800px;
      display: inline-block;
      border: 1px blue solid;
      float: left;
    }

    .content{
      width: 83%;
      height: 800px;
      display: inline-block;
      border: 1px goldenrod solid;
      float: right;
    }

</style>
```

> 4 å¯åŠ¨æµ‹è¯•

```shell
npm run dev
```

#### 6.8.3 ç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®

##### 6.8.3.1 çˆ¶ä¼ å­

> Vue3 ä¸­çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼å¯ä»¥é€šè¿‡ props è¿›è¡Œï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

1. é¦–å…ˆï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰éœ€è¦ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼ï¼Œæ¥ç€ï¼Œåœ¨çˆ¶ç»„ä»¶çš„æ¨¡æ¿ä¸­å¼•å…¥å­ç»„ä»¶ï¼ŒåŒæ—¶åœ¨è¢«å¼•å…¥çš„å­ç»„ä»¶çš„æ ‡ç­¾ä¸­æ·»åŠ  props å±æ€§å¹¶ä¸ºå…¶è®¾ç½®éœ€è¦ä¼ é€’çš„å€¼ã€‚

2. åœ¨ Vue3 ä¸­ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼æ˜¯å“åº”å¼çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨çˆ¶ç»„ä»¶ä¸­çš„ä¼ é€’çš„å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œå­ç»„ä»¶ä¸­çš„å€¼ä¹Ÿä¼šç›¸åº”åœ°æ›´æ–°ã€‚

+ çˆ¶ç»„ä»¶ä»£ç ï¼šApp.vue

```html
<script setup>
import Header from './components/Header.vue'
import Navigator from './components/Navigator.vue'
import Content from './components/Content.vue'
import Footer from './components/Footer.vue'

import { ref } from 'vue'

let message = ref('çˆ¶ç»„ä»¶çš„æ•°æ®')

function changeMessage() {
  message.value = 'çˆ¶ç»„ä»¶çš„æ•°æ®è¢«çˆ¶ç»„ä»¶ä¿®æ”¹äº†ï¼'
}
</script>

<template>
  <div>
    <h2>{{ message }}</h2>
    <Header class="header"></Header>
    <Navigator class="navigator"></Navigator>
    <Content class="content" :message="message"></Content>
    <button @click="changeMessage">çˆ¶ç»„ä»¶ä¿®æ”¹æ“ä½œ</button>
    <Footer class="footer"></Footer>
  </div>
</template>

```

+ å­ç»„ä»¶ä»£ç ï¼šContent.vue

```html
<template>
  <div>ä¸‹ä¸€è¡Œæ˜¯å­ç»„ä»¶ä»çˆ¶ç»„ä»¶æ¥æ”¶çš„æ•°æ®</div>
  <div>{{ message }}</div>
</template>

<script setup type="module">
import { ref, defineProps } from 'vue'
//å£°æ˜è¦ä»çˆ¶ç»„ä»¶ä¸­æ¥æ”¶çš„å±æ€§å€¼
defineProps({
  message: String,
})
</script>

<style></style>

```

##### 6.8.3.2 å­ä¼ çˆ¶

+ çˆ¶ç»„ä»¶ï¼š App.vue

```html
<script setup>
import Header from './components/Header.vue'
import Navigator from './components/Navigator.vue'
import Content from './components/Content.vue'
import Footer from './components/Footer.vue'

import { ref } from 'vue'

let message = ref('çˆ¶ç»„ä»¶çš„dataåˆå§‹åŒ–')

//4.è‡ªå®šä¹‰æ¥æ”¶ï¼Œå­ç»„ä»¶ä¼ é€’æ•°æ®æ–¹æ³•ï¼ å‚æ•°ä¸ºæ•°æ®ï¼
const receiver = (data) => {
  message.value = data
}
</script>

<template>
  <div>
    {{ message }}
    <Header class="header"></Header>
    <Navigator class="navigator"></Navigator>
    <!-- 3.å­ç»„ä»¶å‘æ¥äº†ä¸€ä¸ªsendMenuäº‹ä»¶ï¼Œè¿™é‡Œç”¨receiveræ¥æ”¶ -->
    <Content @sendMenu="receiver" class="content"></Content>
    <Footer class="footer"></Footer>
  </div>
</template>

```

+ å­ç»„ä»¶ï¼šContent.vue

```html
<template>
  <div>
    <button @click="send('å­ç»„ä»¶çš„æ•°æ®åˆ°è¾¾çˆ¶ç»„ä»¶')">
      å­ç»„ä»¶å‘é€æ¶ˆæ¯ç»™çˆ¶ç»„ä»¶
    </button>
  </div>
</template>

<script setup type="module">
import { ref, defineEmits } from 'vue'
//1.defineEmitsç”¨äºå®šä¹‰è¦å‘é€ç»™çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œå¯ä»¥1ä¸ªæˆ–è€…å¤šä¸ª
const emits = defineEmits(['sendMenu'])

function send(data) {
  //2.æäº¤æ•°æ®çš„æ–¹æ³•
  emits('sendMenu', data)
}
</script>

<style></style>

```



##### 6.8.3.3 å…„å¼Ÿä¼ å‚

![](https://blog-resources.this0.com/image/202403301652327.png?x-oss-process=style/this0-blog )

+ Content.vue: å‘é€æ•°æ®åˆ°çˆ¶ç»„ä»¶App.vue

```html
<template>
  <div>
    <button @click="send('å­ç»„ä»¶çš„æ•°æ®åˆ°è¾¾çˆ¶ç»„ä»¶')">
      å­ç»„ä»¶å‘é€æ¶ˆæ¯ç»™çˆ¶ç»„ä»¶
    </button>
  </div>
</template>

<script setup type="module">
import { ref, defineEmits } from 'vue'
//1.defineEmitsç”¨äºå®šä¹‰è¦å‘é€ç»™çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œå¯ä»¥1ä¸ªæˆ–è€…å¤šä¸ª
const emits = defineEmits(['sendMenu'])

function send(data) {
  //2.æäº¤æ•°æ®çš„æ–¹æ³•
  emits('sendMenu', data)
}
</script>

<style></style>

```

+ App.vue: å‘é€æ•°æ®åˆ°å­ç»„ä»¶Navigator.vue

```html
<script setup>
import Header from './components/Header.vue'
import Navigator from './components/Navigator.vue'
import Content from './components/Content.vue'
import Footer from './components/Footer.vue'

import { ref } from 'vue'

let message = ref('çˆ¶ç»„ä»¶çš„dataåˆå§‹åŒ–')

//4.è‡ªå®šä¹‰æ¥æ”¶ï¼Œå­ç»„ä»¶ä¼ é€’æ•°æ®æ–¹æ³•ï¼ å‚æ•°ä¸ºæ•°æ®ï¼
const receiver = (data) => {
  message.value = data
}
</script>

<template>
  <div>
    {{ message }}
    <Header class="header"></Header>
    <Navigator class="navigator" :navigatordata="message"></Navigator>
    <!-- 3.å­ç»„ä»¶å‘æ¥äº†ä¸€ä¸ªsendMenuäº‹ä»¶ï¼Œè¿™é‡Œç”¨receiveræ¥æ”¶ -->
    <Content @sendMenu="receiver" class="content"></Content>
    <Footer class="footer"></Footer>
  </div>
</template>

```

+ Navigator.vue

```html
<template>
  <div>
    å³ä¾§å¯¼èˆªé¡µ
    <hr />
    {{ navigatordata }}
  </div>
</template>

<script setup>
import { ref, defineProps } from 'vue'
defineProps({
  navigatordata: String,
})
</script>

<style></style>

```

## ä¸ƒã€Vue3è·¯ç”±æœºåˆ¶router

//TODO,è·¯ç”±æ²¡è¯¦ç»†çœ‹

### 7.1 è·¯ç”±ç®€ä»‹

> 1 ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ

-   å®šä¹‰ï¼šè·¯ç”±å°±æ˜¯æ ¹æ®ä¸åŒçš„ URL åœ°å€å±•ç¤ºä¸åŒçš„å†…å®¹æˆ–é¡µé¢ã€‚
-   é€šä¿—ç†è§£ï¼šè·¯ç”±å°±åƒæ˜¯ä¸€ä¸ªåœ°å›¾ï¼Œæˆ‘ä»¬è¦å»ä¸åŒçš„åœ°æ–¹ï¼Œéœ€è¦é€šè¿‡ä¸åŒçš„è·¯çº¿è¿›è¡Œå¯¼èˆªã€‚

> 2 è·¯ç”±çš„ä½œç”¨

//TODO,è·¯ç”±çš„ä½œç”¨

-   å•é¡µåº”ç”¨ç¨‹åºï¼ˆSPAï¼‰ä¸­ï¼Œè·¯ç”±å¯ä»¥å®ç°ä¸åŒè§†å›¾ä¹‹é—´çš„æ— åˆ·æ–°åˆ‡æ¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›
-   è·¯ç”±è¿˜å¯ä»¥å®ç°é¡µé¢çš„è®¤è¯å’Œæƒé™æ§åˆ¶ï¼Œä¿æŠ¤ç”¨æˆ·çš„éšç§å’Œå®‰å…¨ï¼›
-   è·¯ç”±è¿˜å¯ä»¥åˆ©ç”¨æµè§ˆå™¨çš„å‰è¿›ä¸åé€€ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°å›åˆ°ä¹‹å‰è®¿é—®è¿‡çš„é¡µé¢ã€‚

### 7.2 è·¯ç”±å…¥é—¨æ¡ˆä¾‹

> 1 æ¡ˆä¾‹éœ€æ±‚åˆ†æ

<img src="https://blog-resources.this0.com/image/202403301652195.png?x-oss-process=style/this0-blog" style="zoom: 33%;" />

â€‹    

> 2 åˆ›å»ºé¡¹ç›®å’Œå¯¼å…¥è·¯ç”±ä¾èµ–


```shell
npm create vite //åˆ›å»ºé¡¹ç›®cd é¡¹ç›®æ–‡ä»¶å¤¹ //è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹
npm install //å®‰è£…é¡¹ç›®éœ€æ±‚ä¾èµ–
npm install vue-router@4 --save //å®‰è£…å…¨å±€çš„vue-router 4ç‰ˆæœ¬
```

> 3 å‡†å¤‡é¡µé¢å’Œç»„ä»¶    

+ components/Home.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Homeé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>

```

+ components/List.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Listé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>
```

+ components/Add.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Addé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>
```

+ components/Update.vue

``` html
<script setup>
</script>

<template>
    <div>
        <h1>Updateé¡µé¢</h1>
    </div>
</template>

<style scoped>
</style>
```

+ App.vue

``` html
<script setup></script>

<template>
  <div>
    <h1>Appé¡µé¢</h1>
    <hr />
    <!-- 1. è·¯ç”±è·³è½¬é“¾æ¥ -->

    <router-link to="/home">homeé¡µ</router-link> <br />
    <router-link to="/list">listé¡µ</router-link> <br />
    <router-link to="/add">addé¡µ</router-link> <br />
    <router-link to="/update">updateé¡µ</router-link> <br />
    <hr />
    <!-- 2. è·¯ç”±è¿æ¥å¯¹åº”è§†å›¾çš„å±•ç¤ºä½ç½® -->
    <hr />
    é»˜è®¤è·¯ç”±å±•ç¤º:<router-view></router-view>
    <hr />
    Homeè§†å›¾å±•ç¤º:<router-view name="homeView"></router-view>
    <hr />
    Listè§†å›¾å±•ç¤º:<router-view name="listView"></router-view>
    <hr />
    Addè§†å›¾å±•ç¤º:<router-view name="addView"></router-view>
    <hr />
    Updateè§†å›¾å±•ç¤º:<router-view name="updateView"></router-view>
  </div>
</template>

<style scoped></style>

```

> 4 å‡†å¤‡è·¯ç”±é…ç½®

+ src/routers/router.js

//TODO,createWebHashHistoryæ–¹æ³•

createWebHashHistory() æ˜¯ Vue.js åŸºäº hash æ¨¡å¼åˆ›å»ºè·¯ç”±çš„å·¥å‚å‡½æ•°ã€‚åœ¨ä½¿ç”¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œè·¯ç”±ä¿¡æ¯ä¿å­˜åœ¨ URL çš„ hash ä¸­ï¼Œä½¿ç”¨ createWebHashHistory() æ–¹æ³•ï¼Œ`å¯ä»¥åˆ›å»ºä¸€ä¸ªè·¯ç”±å†å²è®°å½•å¯¹è±¡ï¼Œç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„è·¯ç”±`ã€‚åœ¨ Vue.js åº”ç”¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨è¯¥æ–¹æ³•æ¥åˆ›å»ºè·¯ç”±çš„å†å²è®°å½•å¯¹è±¡ã€‚å°±æ˜¯è·¯ç”±ä¸­ç¼“å­˜å†å²è®°å½•çš„å¯¹è±¡ï¼Œvue-routeræä¾›

```javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter, createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶
import Home from '../components/Home.vue'
import List from '../components/List.vue'
import Add from '../components/Add.vue'
import Update from '../components/Update.vue'

// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({

    //åˆ›å»ºè·¯ç”±çš„å†å²è®°å½•å¯¹è±¡ã€‚
    history: createWebHashHistory(),
    routes: [
        {
            path: '/',   //è·¯ç”±æ ¹è·¯å¾„

            components: {

                default: Add,   // é»˜è®¤è·¯ç”±è§†å›¾,ä¹Ÿå°±æ˜¯:<router-view></router-view>
                homeView: Home, //åœ¨é»˜è®¤é¡µé¢å±•ç¤ºçš„è·¯ç”±ï¼Œå¤šé€‰ï¼Œæ ¼å¼ï¼šè·¯ç”±åï¼šè§†å›¾å
                listView: List,
            },
        },
        {
            path: '/home',
            components: {
                homeView: Home,
            },
        }, {
            path: '/list',
            components: {
                listView: List,
            },
        },
        {
            path: '/add',
            components: {
                addView: Add,
            },
        },
        {
            path: '/update',
            components: {
                updateView: Update,
            },
        },
    ],
})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router

```

> 5 main.jså¼•å…¥routeré…ç½®

+ ä¿®æ”¹æ–‡ä»¶ï¼šmain.js (å…¥å£æ–‡ä»¶)

```javascript
import { createApp } from 'vue'
import './style.css'
import App from './App.vue'
//å¯¼å…¥routeræ¨¡å—
import router from './routers/router.js'
let app = createApp(App)
//ç»‘å®šè·¯ç”±å¯¹è±¡
app.use(router)
//æŒ‚åœ¨è¯•å›¾
app.mount('#app')
```

> 6 å¯åŠ¨æµ‹è¯•

``` shell
npm run dev
```

### 7.3 è·¯ç”±é‡å®šå‘

> é‡å®šå‘çš„ä½œç”¨ï¼šå°†ä¸€ä¸ªè·¯ç”±é‡å®šå‘åˆ°å¦ä¸€ä¸ªè·¯ç”±ä¸Š

+ ä¿®æ”¹æ¡ˆä¾‹ï¼šè®¿é—®/listå’Œ/showAlléƒ½å®šå‘åˆ°List.vue
+ router.js

``` javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶
import Home from '../components/Home.vue'
import List from '../components/List.vue'
import Add from '../components/Add.vue'
import Update from '../components/Update.vue'

// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    history: createWebHashHistory(),
    routes:[
        {
            path:'/',
            components:{
                default:Home,
                homeView:Home
            }      
        },
        {
            path:'/list',
            components:{
                listView : List
            } 
        },
        {
            path:'/showAll',
            // é‡å®šå‘
            redirect :'/list'
        },
        {
            path:'/add',
            components:{
                addView:Add
            } 
        },
        {
            path:'/update',
            components:{
                updateView:Update
            }  
        },
    ]

})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

+ App.vue

```html
<script setup>
</script>

<template>
    <div>
      <h1>Appé¡µé¢</h1>
      <hr/>
        <!-- è·¯ç”±çš„è¿æ¥ -->
        <router-link to="/">homeé¡µ</router-link> <br>
        <router-link to="/list">listé¡µ</router-link> <br>
        <router-link to="/showAll">showAllé¡µ</router-link> <br>
        <router-link to="/add">addé¡µ</router-link> <br>
        <router-link to="/update">updateé¡µ</router-link> <br>
      <hr/>
      <!-- è·¯ç”±è¿æ¥å¯¹åº”è§†å›¾çš„å±•ç¤ºä½ç½® -->
      <hr>
      é»˜è®¤å±•ç¤ºä½ç½®:<router-view></router-view>
      <hr>
      Homeè§†å›¾å±•ç¤º:<router-view name="homeView"></router-view>
      <hr>
      Listè§†å›¾å±•ç¤º:<router-view name="listView"></router-view>
      <hr>
      Addè§†å›¾å±•ç¤º:<router-view name="addView"></router-view>
      <hr>
      Updateè§†å›¾å±•ç¤º:<router-view name="updateView"></router-view>
    </div>
</template>

<style scoped>
</style>
```

###  7.4 ç¼–ç¨‹å¼è·¯ç”±(useRouter)

> æ™®é€šè·¯ç”±

+ `<router-link to="/list">listé¡µ</router-link>  `è¿™ç§è·¯ç”±,toä¸­çš„å†…å®¹ç›®å‰æ˜¯å›ºå®šçš„,ç‚¹å‡»ååªèƒ½åˆ‡æ¢/listå¯¹è±¡ç»„ä»¶(å£°æ˜å¼è·¯ç”±)

> ç¼–ç¨‹å¼è·¯ç”±

+ é€šè¿‡useRouter,åŠ¨æ€å†³å®šå‘å“ªä¸ªç»„ä»¶åˆ‡æ¢çš„è·¯ç”±
+ åœ¨ Vue 3 å’Œ Vue Router 4 ä¸­ï¼Œä½¿ç”¨ `useRouter` æ¥å®ç°åŠ¨æ€è·¯ç”±(ç¼–ç¨‹å¼è·¯ç”±)
+ è¿™é‡Œçš„ `useRouter` æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª router å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥åšå¦‚å¯¼èˆªåˆ°æ–°é¡µé¢ã€è¿”å›ä¸Šä¸€é¡µé¢ç­‰æ“ä½œã€‚

> æ¡ˆä¾‹éœ€æ±‚: é€šè¿‡æ™®é€šæŒ‰é’®é…åˆäº‹ä»¶ç»‘å®šå®ç°è·¯ç”±é¡µé¢è·³è½¬,ä¸ç›´æ¥ä½¿ç”¨router-linkæ ‡ç­¾

+ App.vue

``` html
<script setup type="module">

import {useRouter} from 'vue-router'
import {ref} from 'vue'
//åˆ›å»ºåŠ¨æ€è·¯ç”±å¯¹è±¡
let router = useRouter()

let  routePath =ref('')
let  showList= ()=>{
  // ç¼–ç¨‹å¼è·¯ç”±â€”â€”â€”â€”ç›´æ¥pushä¸€ä¸ªè·¯å¾„
  //router.push('/list')  æˆ–è€…  pushä¸€ä¸ªå¸¦æœ‰pathå±æ€§çš„å¯¹è±¡
  router.push({path:'/list'})
}
</script>

<template>
  <div>
    <h1>Appé¡µé¢</h1>
    <hr/>
    <!-- è·¯ç”±çš„è¿æ¥ -->
    <router-link to="/">homeé¡µ</router-link> <br>
    <router-link to="/list">listé¡µ</router-link> <br>
    <router-link to="/showAll">showAllé¡µ</router-link> <br>
    <router-link to="/add">addé¡µ</router-link> <br>
    <router-link to="/update">updateé¡µ</router-link> <br>
    
    <!-- åŠ¨æ€è¾“å…¥è·¯å¾„,ç‚¹å‡»æŒ‰é’®,è§¦å‘å•å‡»äº‹ä»¶çš„å‡½æ•°,åœ¨å‡½æ•°ä¸­é€šè¿‡ç¼–ç¨‹æ˜¯è·¯ç”±åˆ‡æ¢é¡µé¢ -->
    <button @click="showList()">showList</button> <br>
    <hr/>
    <!-- è·¯ç”±è¿æ¥å¯¹åº”è§†å›¾çš„å±•ç¤ºä½ç½® -->
    <hr>
    é»˜è®¤å±•ç¤ºä½ç½®:<router-view></router-view>
    <hr>
    Homeè§†å›¾å±•ç¤º:<router-view name="homeView"></router-view>
    <hr>
    Listè§†å›¾å±•ç¤º:<router-view name="listView"></router-view>
    <hr>
    Addè§†å›¾å±•ç¤º:<router-view name="addView"></router-view>
    <hr>
    Updateè§†å›¾å±•ç¤º:<router-view name="updateView"></router-view>
  </div>
</template>

<style scoped>
</style>
```

### 7.5 è·¯ç”±ä¼ å‚(useRoute)

> è·¯å¾„å‚æ•°

+ åœ¨è·¯å¾„ä¸­ä½¿ç”¨ä¸€ä¸ªåŠ¨æ€å­—æ®µæ¥å®ç°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º **è·¯å¾„å‚æ•°**
  + ä¾‹å¦‚ï¼š æŸ¥çœ‹æ•°æ®è¯¦æƒ…  `/showDetail/1`  ,`1`å°±æ˜¯è¦æŸ¥çœ‹è¯¦æƒ…çš„id,å¯ä»¥åŠ¨æ€æ·»å€¼ï¼

> é”®å€¼å¯¹å‚æ•°

+ ç±»ä¼¼ä¸getè¯·æ±‚é€šè¿‡urlä¼ å‚,æ•°æ®æ˜¯é”®å€¼å¯¹å½¢å¼çš„

  + ä¾‹å¦‚:  æŸ¥çœ‹æ•°æ®è¯¦æƒ…`/showDetail?hid=1`,`hid=1`å°±æ˜¯è¦ä¼ é€’çš„é”®å€¼å¯¹å‚æ•°

  + åœ¨ Vue 3 å’Œ Vue Router 4 ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨  `useRoute` è¿™ä¸ªå‡½æ•°ä» Vue çš„ç»„åˆå¼ API ä¸­è·å–è·¯ç”±å¯¹è±¡ã€‚
  + `useRoute` æ–¹æ³•è¿”å›çš„æ˜¯å½“å‰çš„ route å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥è·å–å…³äºå½“å‰è·¯ç”±çš„ä¿¡æ¯ï¼Œå¦‚å½“å‰çš„è·¯å¾„ã€æŸ¥è¯¢å‚æ•°ç­‰ã€‚

> æ¡ˆä¾‹éœ€æ±‚ : åˆ‡æ¢åˆ°ShowDetail.vueç»„ä»¶æ—¶,å‘è¯¥ç»„ä»¶é€šè¿‡è·¯ç”±ä¼ é€’å‚æ•°

+ ä¿®æ”¹App.vueæ–‡ä»¶

``` html
<script setup type="module">

import {useRouter} from 'vue-router'

//åˆ›å»ºåŠ¨æ€è·¯ç”±å¯¹è±¡
let router = useRouter()

//æ–¹æ³•2,ç¬¬äºŒæ­¥ï¼Œé€šè¿‡ç»‘å®šçš„è·¯å¾„ä¼ å‚æ–¹æ³•ï¼Œç¡®å®šè·¯ç”±å’Œå‚æ•°
let showDetail= (id,language)=>{

  //åŠ¨æ€è·¯ç”±è·¯å¾„ä¼ å‚æœ‰ä¸‹é¢2ç§æ–¹å¼
  // 1  ä½¿ç”¨æ‹¼æ¥å­—ç¬¦ä¸²æ–¹å¼ä¼ é€’è·¯å¾„å‚æ•°ï¼Œ
  router.push(`showDetail/${id}/${language}`)
  // 2  æˆ–è€…  ä½¿ç”¨paramsï¼Œè¿›è¡ŒåŠ¨æ€è·¯ç”±è·¯å¾„ä¼ å‚æ˜¾ç¤º
  //   router.push({name:"showDetail",params:{id:id,language:language}})
}

//æ–¹æ³•4
let showDetail2= (id,language)=>{
  /*urié”®å€¼å¯¹å‚æ•°,éœ€è¦ä½¿ç”¨query */
  router.push({path:"/showDetail2",query:{id:id,language:language}})
}
</script>

<template>
  <div>
    <h1>Appé¡µé¢</h1>
    <hr/>
<!--    è·¯å¾„æ‹¼æ¥2ä¸ªæ–¹æ³•-->
    <!-- æ–¹æ³•1ï¼šè·¯å¾„ä¼ å‚ ï¼Œç¬¬ä¸€æ­¥ï¼Œç‚¹å‡»åæ ¹æ®router.jsè¿›è¡Œè·¯ç”±è·³è½¬  -->
    <router-link to="/showDetail/1/JAVA">showDetailè·¯å¾„ä¼ å‚æ˜¾ç¤ºJAVA</router-link>
<!--    æ–¹æ³•2ï¼š åŠ¨æ€è·¯ç”±è·¯å¾„ä¼ å‚ ,ç¬¬ä¸€æ­¥ï¼Œç»‘å®šä¼ å‚æ–¹æ³•-->
    <button @click="showDetail(1,'JAVA')">showDetailåŠ¨æ€è·¯ç”±è·¯å¾„ä¼ å‚æ˜¾ç¤ºJAVA</button>
    <hr/>

    <!-- é”®å€¼å¯¹å‚æ•°2ä¸ªæ–¹æ³• -->
<!--    æ–¹æ³•3-->
    <router-link v-bind:to="{path:'/showDetail2',query:{id:1,language:'Java'}}">showDetail2é”®å€¼å¯¹ä¼ å‚æ˜¾ç¤ºJAVA</router-link>

<!--    æ–¹æ³•4-->
    <button @click="showDetail2(1,'JAVA')">showDetail2åŠ¨æ€è·¯ç”±é”®å€¼å¯¹ä¼ å‚æ˜¾ç¤ºJAVA</button>
    <hr>
    showDetailè§†å›¾å±•ç¤º:<router-view name="showDetailView"></router-view>
    <hr>
    showDetail2è§†å›¾å±•ç¤º:<router-view name="showDetailView2"></router-view>
  </div>
</template>

<style scoped>
</style>

```

+ ä¿®æ”¹router.jså¢åŠ è·¯å¾„å‚æ•°å ä½ç¬¦

``` javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶

import ShowDetail from '../components/ShowDetail.vue'
import ShowDetail2 from '../components/ShowDetail2.vue'

// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    history: createWebHashHistory(),
    routes:[

        {
            /* æ­¤å¤„:id  :languageä½œä¸ºè·¯å¾„çš„å ä½ç¬¦,ä¼ åˆ°è§†å›¾é¡µé¢ */
            path:'/showDetail/:id/:language',
            /* ç¬¬äºŒæ­¥ï¼Œè·¯ç”±ä¼ å‚æ—¶,æ ¹æ®è¯¥åå­—showDetailæ‰¾åˆ°è¯¥è·¯ç”±,è·³è½¬å¹¶å¸¦æ•°æ®è¿‡å» */
            name:'showDetail',
            components:{
                //æ ¼å¼    è·¯ç”±çš„nameï¼šè·¯ç”±è§†å›¾
                showDetailView:ShowDetail
            }
        },
        {
            path:'/showDetail2',
            components:{
                showDetailView2:ShowDetail2
            }
        },
    ]

})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

+ ShowDetail.vue é€šè¿‡useRouteè·å–è·¯å¾„å‚æ•°

``` html
<script setup type="module">
    import{useRoute} from 'vue-router'
    import { onUpdated,ref } from 'vue';
    // è·å–å½“å‰çš„routeå¯¹è±¡
    let route =useRoute()
    let languageId = ref(0)
    let languageName = ref('')
    //  å€ŸåŠ©æ›´æ–°æ—¶ç”Ÿå‘½å‘¨æœŸ,å°†æ•°æ®æ›´æ–°è¿›å…¥å“åº”å¼å¯¹è±¡
    // onUpdated (()=>{
        // ç¬¬ä¸‰æ­¥ï¼Œè·å–è·¯ç”±å¯¹è±¡ä¸­çš„å‚æ•°ï¼Œé€šè¿‡route.params.xxçš„æ–¹å¼è·å–ï¼Œæœ¬èº«å°±æ˜¯å“åº”å¼æ•°æ®
        languageId.value=route.params.id
        languageName.value=route.params.language
        console.log(languageId.value)
        console.log(languageName.value)
    // })

</script>

<template>
    <div>
        <h1>ShowDetailé¡µé¢</h1>
        <h3>ç¼–å·{{route.params.id}}:{{route.params.language}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
        <h3>ç¼–å·{{languageId}}:{{languageName}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
    </div>
</template>

<style scoped>
</style>

```

-   ShowDetail2.vueé€šè¿‡useRouteè·å–é”®å€¼å¯¹å‚æ•°

```html
<script setup type="module">
import{useRoute} from 'vue-router'
import { onUpdated,ref } from 'vue';
// è·å–å½“å‰çš„routeå¯¹è±¡
let route =useRoute()
let languageId = ref(0)
let languageName = ref('')

//  å€ŸåŠ©æ›´æ–°æ—¶ç”Ÿå‘½å‘¨æœŸ,å°†æ•°æ®æ›´æ–°è¿›å…¥å“åº”å¼å¯¹è±¡
// onUpdated (()=>{
  // è·å–å¯¹è±¡ä¸­çš„å‚æ•°(é€šè¿‡queryè·å–å‚æ•°,æ­¤æ—¶å‚æ•°æ˜¯key-valueå½¢å¼çš„)
  languageId.value=route.query.id
  languageName.value=route.query.language

// })

</script>

<template>
  <div>
    <h1>ShowDetail2é¡µé¢</h1>
    <h3>ç¼–å·{{route.query.id}}:{{route.query.language}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
    <h3>ç¼–å·{{languageId}}:{{languageName}}æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</h3>
  </div>
</template>

<style scoped>
</style>

```

### 7.6 è·¯ç”±å®ˆå«

> åœ¨ Vue 3 ä¸­ï¼Œè·¯ç”±å®ˆå«æ˜¯ç”¨äºåœ¨è·¯ç”±åˆ‡æ¢æœŸé—´è¿›è¡Œä¸€äº›ç‰¹å®šä»»åŠ¡çš„å›è°ƒå‡½æ•°ã€‚è·¯ç”±å®ˆå«å¯ä»¥ç”¨äºè®¸å¤šä»»åŠ¡ï¼Œä¾‹å¦‚éªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ã€åœ¨è·¯ç”±åˆ‡æ¢å‰æä¾›ç¡®è®¤æç¤ºã€è¯·æ±‚æ•°æ®ç­‰ã€‚Vue 3 ä¸ºè·¯ç”±å®ˆå«æä¾›äº†å…¨é¢çš„æ”¯æŒï¼Œå¹¶æä¾›äº†ä»¥ä¸‹å‡ ç§ç±»å‹çš„è·¯ç”±å®ˆå«ï¼š

1.  **å…¨å±€å‰ç½®å®ˆå«**ï¼šåœ¨è·¯ç”±åˆ‡æ¢å‰è¢«è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºéªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ã€ä¸­æ–­å¯¼èˆªã€è¯·æ±‚æ•°æ®ç­‰ã€‚
2.  **å…¨å±€åç½®å®ˆå«**ï¼šåœ¨è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºå¤„ç†æ•°æ®ã€æ“ä½œ DOM ã€è®°å½•æ—¥å¿—ç­‰ã€‚
3.  **å®ˆå«ä»£ç çš„ä½ç½®**: åœ¨router.jsä¸­

```javascript
//å…¨å±€å‰ç½®è·¯ç”±å®ˆå«
router.beforeEach( (to,from,next) => {
    //to æ˜¯ç›®æ ‡åœ°åŒ…è£…å¯¹è±¡  .pathå±æ€§å¯ä»¥è·å–åœ°å€
    //from æ˜¯æ¥æºåœ°åŒ…è£…å¯¹è±¡ .pathå±æ€§å¯ä»¥è·å–åœ°å€
    //nextæ˜¯æ–¹æ³•ï¼Œä¸è°ƒç”¨é»˜è®¤æ‹¦æˆªï¼ next() æ”¾è¡Œ,ç›´æ¥åˆ°è¾¾ç›®æ ‡ç»„ä»¶
    //next('/åœ°å€')å¯ä»¥è½¬å‘åˆ°å…¶ä»–åœ°å€,åˆ°è¾¾ç›®æ ‡ç»„ä»¶å‰ä¼šå†æ¬¡ç»è¿‡å‰ç½®è·¯ç”±å®ˆå«
    console.log(to.path,from.path,next)

    //éœ€è¦åˆ¤æ–­ï¼Œæ³¨æ„é¿å…æ— é™é‡å®šå‘
    if(to.path == '/index'){
        next()
    }else{
        next('/index')
    }
    
} )

//å…¨å±€åç½®è·¯ç”±å®ˆå«
router.afterEach((to, from) => {
    console.log(`Navigate from ${from.path} to ${to.path}`);
});

```

//TODOï¼Œè·¯ç”±å®ˆå«å¦‚ä½•è¿›è¡Œå‚æ•°ä¼ é€’

> ç™»å½•æ¡ˆä¾‹ï¼Œç™»å½•ä»¥åæ‰å¯ä»¥è¿›å…¥home,å¦åˆ™å¿…é¡»è¿›å…¥login

+ å®šä¹‰Login.vue

```html
<script setup>
    import {ref} from 'vue'
    import {useRouter} from 'vue-router'
    let username =ref('')
    let password =ref('')
    let router = useRouter();
    let login = () =>{
        console.log(username.value,password.value)
        if(username.value == 'root' & password.value == '123456'){
            router.push({path:'/home',query:{'username':username.value}})
            //ç™»å½•æˆåŠŸåˆ©ç”¨å‰ç«¯å­˜å‚¨æœºåˆ¶ï¼Œå­˜å‚¨è´¦å·ï¼
            localStorage.setItem('username',username.value)
            //sessionStorage.setItem('username',username)
        }else{
            alert('ç™»å½•å¤±è´¥ï¼Œè´¦å·æˆ–è€…å¯†ç é”™è¯¯ï¼');
        }
    }

</script>

<template>
    
    <div>
        è´¦å·ï¼š <input type="text" v-model="username" placeholder="è¯·è¾“å…¥è´¦å·ï¼"><br>
        å¯†ç ï¼š <input type="password" v-model="password" placeholder="è¯·è¾“å…¥å¯†ç ï¼"><br>
        <button @click="login()">ç™»å½•</button>
    </div>

</template>

<style scoped>
</style>

```

+ å®šä¹‰Home.vue

```html
<script setup>
 import {ref} from 'vue'
 import {useRoute,useRouter} from 'vue-router'

 let route =useRoute()
 let router = useRouter()
 //  å¹¶ä¸æ˜¯æ¯æ¬¡è¿›å…¥homeé¡µæ—¶,éƒ½æœ‰ç”¨æˆ·åå‚æ•°ä¼ å…¥
 //let username = route.query.username
 let username =window.localStorage.getItem('username'); 

 let logout= ()=>{
    // æ¸…é™¤localStorgeä¸­çš„username
    //window.sessionStorage.removeItem('username')
    window.localStorage.removeItem('username')
    // åŠ¨æ€è·¯ç”±åˆ°ç™»å½•é¡µ
    router.push("/login")

 }

</script>

<template>
    <div>
        <h1>Homeé¡µé¢</h1>
        <h3>æ¬¢è¿{{username}}ç™»å½•</h3>
        <button @click="logout">é€€å‡ºç™»å½•</button>
    </div>
</template>

<style scoped>

</style>

```

+ App.vue

```html
<script setup type="module">

  
</script>

<template>
    <div>
      
      <router-view></router-view>
      
    </div>
</template>

<style scoped>
</style>

```

+ å®šä¹‰routers.js

``` javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶

import Home from '../components/Home.vue'
import Login from '../components/login.vue'
// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    history: createWebHashHistory(),
    routes:[
        {
            path:'/home',
            component:Home
        },
        {
            path:'/',
            redirect:"/home"
        },
        {
            path:'/login',
            component:Login
        },
    ]

})

// è®¾ç½®è·¯ç”±çš„å…¨å±€å‰ç½®å®ˆå«
router.beforeEach((to,from,next)=>{
    /* 
    to è¦å»é‚£
    from ä»å“ªé‡Œæ¥
    next æ”¾è¡Œè·¯ç”±æ—¶éœ€è¦è°ƒç”¨çš„æ–¹æ³•,ä¸è°ƒç”¨åˆ™ä¸æ”¾è¡Œ
    */
    console.log(`ä»å“ªé‡Œæ¥:${from.path},åˆ°å“ªé‡Œå»:${to.path}`)

    if(to.path == '/login'){
        //æ”¾è¡Œè·¯ç”±  æ³¨æ„æ”¾è¡Œä¸è¦å½¢æˆå¾ªç¯  
        next()
    }else{
        //let username =window.sessionStorage.getItem('username'); 
        let username =window.localStorage.getItem('username'); 
        if(null != username){
            next()
        }else{
            next('/login')
        }

    }
})
// è®¾ç½®è·¯ç”±çš„å…¨å±€åç½®å®ˆå«
router.afterEach((to,from)=>{
    console.log(`ä»å“ªé‡Œæ¥:${from.path},åˆ°å“ªé‡Œå»:${to.path}`)
})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

+ å¯åŠ¨æµ‹è¯•

```shell
npm run dev
```

## å…«ã€ æ¡ˆä¾‹å¼€å‘-æ—¥ç¨‹ç®¡ç†-ç¬¬äº”æœŸ

### 8.1 é‡æ„å‰ç«¯å·¥ç¨‹

> ä¸šåŠ¡ç›®æ ‡å±•ç¤º

+ ç™»å½•é¡µ

![1690533751478](https://blog-resources.this0.com/image/202403301652287.png?x-oss-process=style/this0-blog )

+ æ³¨å†Œé¡µ

![1690533770048](https://blog-resources.this0.com/image/202403301652279.png?x-oss-process=style/this0-blog )

+ æ—¥ç¨‹ç®¡ç†é¡µ

![1690533809917](https://blog-resources.this0.com/image/202403301652325.png?x-oss-process=style/this0-blog )

> åˆ›å»ºé¡¹ç›®,å®‰è£…ä¾èµ–

``` shell
npm create vite
cd é¡¹ç›®ç›®å½•
npm  install
npm  install vue-router
```

+ é¡¹ç›®ç»“æ„å¦‚ä¸‹

![1690516506417](https://blog-resources.this0.com/image/202403301653436.png?x-oss-process=style/this0-blog )

> å¼€å‘è§†å›¾

+ Header.vueè§†å›¾

``` html
<script setup>

</script>

<template>
  <div>
    <h1 class="ht">æ¬¢è¿ä½¿ç”¨æ—¥ç¨‹ç®¡ç†ç³»ç»Ÿ</h1>
    <div>
      <div  class="optionDiv">
        <router-link to="/login">
          <button class="b1s">ç™»å½•</button>
        </router-link>   
        <router-link to="/regist">
          <button class="b1s">æ³¨å†Œ</button>
        </router-link>
      </div>


      <div   class="optionDiv">
        æ¬¢è¿xxx   
        <button class="b1b">é€€å‡ºç™»å½•</button> 
        <router-link to="/showSchedule">
          <button class="b1b">æŸ¥çœ‹æˆ‘çš„æ—¥ç¨‹</button>
        </router-link>
      </div>

      <br>
    </div>
  </div>
</template>

<style scoped>

  .ht{
      text-align: center;
      color: cadetblue;
      font-family: å¹¼åœ†;
  }
  .b1s{
        border: 2px solid powderblue;
        border-radius: 4px;
        width:60px;
        background-color: antiquewhite;

    }

    .b1b{
        border: 2px solid powderblue;
        border-radius: 4px;
        width:100px;
        background-color: antiquewhite;
    }
    .optionDiv{
      width: 300px;
      float: right;
    }
</style>

```



+ Login.vueè§†å›¾

``` html
<script setup>
       import{ ref,reactive} from 'vue'
       // å“åº”å¼æ•°æ®,ä¿å­˜ç”¨æˆ·è¾“å…¥çš„è¡¨å•ä¿¡æ¯
       let loginUser =reactive({
        username:'',
        userPwd:''
       })

       // å“åº”å¼æ•°æ®,ä¿å­˜æ ¡éªŒçš„æç¤ºä¿¡æ¯
       let usernameMsg =ref('')
       let userPwdMsg = ref('')

        // æ ¡éªŒç”¨æˆ·åçš„æ–¹æ³•
        function checkUsername(){
            // å®šä¹‰æ­£åˆ™
            var usernameReg=/^[a-zA-Z0-9]{5,10}$/
            // æ ¡éªŒç”¨æˆ·å
            if(!usernameReg.test(loginUser.username)){
                // æ ¼å¼ä¸åˆæ³•
                usernameMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }
            usernameMsg.value="ok"
            return true
        }
        // æ ¡éªŒå¯†ç çš„æ–¹æ³•
        function checkUserPwd(){
            // å®šä¹‰æ­£åˆ™
            var passwordReg=/^[0-9]{6}$/
             // æ ¡éªŒå¯†ç 
             if(!passwordReg.test(loginUser.userPwd)){
                // æ ¼å¼ä¸åˆæ³•
                userPwdMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }
            userPwdMsg.value="ok"
            return true
        }
</script>

<template>
  <div>
    <h3 class="ht">è¯·ç™»å½•</h3>
        <table class="tab" cellspacing="0px">
            <tr class="ltr">
                <td>è¯·è¾“å…¥è´¦å·</td>
                <td>
                    <input class="ipt" 
                    type="text" 
                    v-model="loginUser.username"
                    @blur="checkUsername()">
                    <span id="usernameMsg" v-text="usernameMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td>è¯·è¾“å…¥å¯†ç </td>
                <td>
                    <input class="ipt" 
                    type="password" 
                    v-model="loginUser.userPwd"
                    @blur="checkUserPwd()">
                    <span id="userPwdMsg" v-text="userPwdMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td colspan="2" class="buttonContainer">
                    <input class="btn1" type="button" value="ç™»å½•">
                    <input class="btn1" type="button" value="é‡ç½®">
                    <router-link to="/regist">
                      <button class="btn1">å»æ³¨å†Œ</button>
                    </router-link>
                </td>
            </tr>
        </table>
  </div>
</template>

<style scoped>
        .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 500px;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;
        }
        .ipt{
            border: 0px;
            width: 50%;
        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:60px;
            background-color: antiquewhite;
        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }
        .buttonContainer{
            text-align: center;
        }
</style>

```

+ Regist.vueè§†å›¾

``` html
<script setup>
      import{ ref,reactive} from 'vue'
       // å“åº”å¼æ•°æ®,ä¿å­˜ç”¨æˆ·è¾“å…¥çš„è¡¨å•ä¿¡æ¯
       let registUser =reactive({
        username:'',
        userPwd:''
       })

       // å“åº”å¼æ•°æ®,ä¿å­˜æ ¡éªŒçš„æç¤ºä¿¡æ¯
       let reUserPwd =ref('')
       let reUserPwdMsg =ref('')
       let usernameMsg =ref('')
       let userPwdMsg = ref('')

          // æ ¡éªŒç”¨æˆ·åçš„æ–¹æ³•
        function checkUsername(){
            // å®šä¹‰æ­£åˆ™
            let usernameReg=/^[a-zA-Z0-9]{5,10}$/
            // æ ¡éªŒ
            if(!usernameReg.test(registUser.username)){
              // æç¤º
              usernameMsg.value = "ä¸åˆæ³•"
              return false
            }
            // é€šè¿‡æ ¡éªŒ
            usernameMsg.value="OK"
            return true
        }
        // æ ¡éªŒå¯†ç çš„æ–¹æ³•
        function checkUserPwd(){
            // å®šä¹‰æ­£åˆ™
            let passwordReg=/^[0-9]{6}$/
             // æ ¡éªŒ
             if(!passwordReg.test(registUser.userPwd)){
              // æç¤º
              userPwdMsg.value = "ä¸åˆæ³•"
              return false
            }
            // é€šè¿‡æ ¡éªŒ
            userPwdMsg.value="OK"
            return true
        }
        // æ ¡éªŒå¯†ç çš„æ–¹æ³•
        function checkReUserPwd(){
            // å®šä¹‰æ­£åˆ™
            let passwordReg=/^[0-9]{6}$/
            // æ ¡éªŒ
            if(!passwordReg.test(reUserPwd.value)){
              // æç¤º
              reUserPwdMsg.value = "ä¸åˆæ³•"
              return false
            }
            console.log(registUser.userPwd,reUserPwd.value)
            // æ ¡éªŒ
            if(!(registUser.userPwd==reUserPwd.value)){
              // æç¤º
              reUserPwdMsg.value = "ä¸ä¸€è‡´"
              return false
            }


            // é€šè¿‡æ ¡éªŒ
            reUserPwdMsg.value="OK"
            return true
        }
</script>

<template>
  <div>
    <h3 class="ht">è¯·æ³¨å†Œ</h3>

    <table class="tab" cellspacing="0px">
        <tr class="ltr">
            <td>è¯·è¾“å…¥è´¦å·</td>
            <td>
                <input class="ipt" 
                  id="usernameInput" 
                  type="text" 
                  name="username" 
                  v-model="registUser.username"
                  @blur="checkUsername()">

                <span id="usernameMsg" class="msg" v-text="usernameMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td>è¯·è¾“å…¥å¯†ç </td>
            <td>
                <input class="ipt" 
                id="userPwdInput" 
                type="password" 
                name="userPwd" 
                v-model="registUser.userPwd"
                @blur="checkUserPwd()">
                <span id="userPwdMsg" class="msg" v-text="userPwdMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td>ç¡®è®¤å¯†ç </td>
            <td>
                <input class="ipt" 
                id="reUserPwdInput" 
                type="password" 
                v-model="reUserPwd"
                @blur="checkReUserPwd()">
                <span id="reUserPwdMsg" class="msg" v-text="reUserPwdMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td colspan="2" class="buttonContainer">
                <input class="btn1" type="button" value="æ³¨å†Œ">
                <input class="btn1" type="button" value="é‡ç½®">
                <router-link to="/login">
                  <button class="btn1">å»ç™»å½•</button>
                </router-link>
            </td>
        </tr>
    </table>


  </div>
</template>

<style scoped>
       .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 500px;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:60px;
            background-color: antiquewhite;

        }
        .msg {
            color: gold;
        }
        .buttonContainer{
            text-align: center;
        }
</style>

```

+ ShowSchedule.vueè§†å›¾

``` html
<script setup>

</script>

<template>
  <div>
    <h3 class="ht">æ‚¨çš„æ—¥ç¨‹å¦‚ä¸‹</h3>
<table class="tab" cellspacing="0px">
    <tr class="ltr">
        <th>ç¼–å·</th>
        <th>å†…å®¹</th>
        <th>è¿›åº¦</th>
        <th>æ“ä½œ</th>
    </tr>
    <tr class="ltr">
        <td></td>
        <td></td>
        <td></td>
        <td class="buttonContainer">
             <button class="btn1">åˆ é™¤</button>
            <button class="btn1">ä¿å­˜ä¿®æ”¹</button>
        </td>
    </tr>
    <tr class="ltr buttonContainer" >
        <td colspan="4">
            <button class="btn1">æ–°å¢æ—¥ç¨‹</button>
        </td>

    </tr>
</table>
  </div>
</template>

<style scoped>

      .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 80%;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:100px;
            background-color: antiquewhite;

        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }

        .buttonContainer{
            text-align: center;
        }

</style>

```

+ App.vueè§†å›¾

``` html
<script setup>

import Header from './components/Header.vue'
</script>

<template>
  <div>
    <Header></Header>
    <hr>
    <!-- ç”¨äºè·¯ç”±åˆ‡æ¢è§†å›¾ä½¿ç”¨ -->
    <router-view></router-view>
  
  </div>
</template>

<style scoped>

</style>

```



+ é…ç½®è·¯ç”±

``` javascript
import {createRouter,createWebHashHistory} from 'vue-router'


import Login from '../components/Login.vue'
import Regist from '../components/Regist.vue'
import ShowScedule from '../components/ShowSchedule.vue'

let  router = createRouter({
    history:createWebHashHistory(),
    routes:[
        {
            path:"/",
            component:Login
        },
        {
            path:"/login",
            component:Login
        },
        {
            path:"/showSchedule",
            component:ShowScedule
        },
        {
            path:"/regist",
            component:Regist
        }


    ]
})

export default router
```



+ é…ç½®main.js

``` javascript
import { createApp } from 'vue'

import App from './App.vue'

// å¯¼å…¥è·¯ç”±
import router from './router/router.js'

let app =createApp(App)

// å…¨å±€ä½¿ç”¨è·¯ç”±
app.use(router)

app.mount('#app')

```

## ä¹ã€Vue3æ•°æ®äº¤äº’axios

### 9.0 é¢„è®²çŸ¥è¯†-promise

#### 9.0.1 æ™®é€šå‡½æ•°å’Œå›è°ƒå‡½æ•°

> æ™®é€šå‡½æ•°: æ­£å¸¸è°ƒç”¨çš„å‡½æ•°,ä¸€èˆ¬å‡½æ•°æ‰§è¡Œå®Œæ¯•åæ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç 

``` html
<script>
    let fun1 = () =>{
        console.log("fun1 invoked")
    }
    // è°ƒç”¨å‡½æ•°
    fun1()
    // å‡½æ•°æ‰§è¡Œå®Œæ¯•,ç»§ç»­æ‰§è¡Œåç»­ä»£ç 
    console.log("other code processon")
</script>
```

> å›è°ƒå‡½æ•°: ä¸€äº›ç‰¹æ®Šçš„å‡½æ•°,è¡¨ç¤ºæœªæ¥æ‰ä¼šæ‰§è¡Œçš„ä¸€äº›åŠŸèƒ½,åç»­ä»£ç ä¸ä¼šç­‰å¾…è¯¥å‡½æ•°æ‰§è¡Œå®Œæ¯•å°±å¼€å§‹æ‰§è¡Œäº†

```html
<script>
    // è®¾ç½®ä¸€ä¸ª2000æ¯«ç§’åä¼šæ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶ä»»åŠ¡
    setTimeout(function (){
        console.log("setTimeout invoked")
    },2000)
    console.log("other code processon")
</script>
```

#### 9.0.2 Promise ç®€ä»‹

> å‰ç«¯ä¸­çš„å¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ï¼Œç±»ä¼¼Javaä¸­çš„å¤šçº¿ç¨‹+çº¿ç¨‹ç»“æœå›è°ƒï¼

+ `Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ`ï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚//TODO,å¼ºå¤§åœ¨å“ªã€‚å®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†Promiseå¯¹è±¡ï¼ˆä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ->Promiseçš„å†ç¨‹ï¼‰ã€‚

+ æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚

> Promiseå¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚

	ï¼ˆ1ï¼‰Promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š`Pending`ï¼ˆè¿›è¡Œä¸­ï¼‰ã€`Resolved`ï¼ˆå·²å®Œæˆï¼Œåˆç§° Fulfilledï¼‰å’Œ`Rejected`ï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯`Promise`è¿™ä¸ªåå­—â€”â€”è¯ºè¨€çš„ç”±æ¥
	
	ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚Promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»`Pending`å˜ä¸º`Resolved`å’Œä»`Pending`å˜ä¸º`Rejected`ã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœã€‚

#### 9.0.3 Promise åŸºæœ¬ç”¨æ³•

> ES6è§„å®šï¼ŒPromiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆPromiseå®ä¾‹ã€‚

```html
<script>

/*
 1.å®ä¾‹åŒ–promiseå¯¹è±¡
 å‚æ•°: resolve,rejectéšæ„å‘½å

 */
let promise = new Promise(function(resolve,reject){

  console.log("promise do some code ... ...")

  // å‚æ•°: resolve,rejectåˆ†åˆ«è´Ÿè´£å¤„ç† æˆåŠŸ å’Œ å¤±è´¥ ä¸¤ä¸ªå‡½æ•°!
  //è°ƒç”¨resolveå°±å˜æˆæˆåŠŸçŠ¶æ€ï¼Œè°ƒç”¨rejectå°±å˜æˆå¤±è´¥çŠ¶æ€
      //resolve("promise success")
  reject("promise fail")
})

//2.è·å–å›è°ƒå‡½æ•°ç»“æœ  thenåœ¨è¿™é‡Œä¼šç­‰å¾…promiseä¸­çš„è¿è¡Œç»“æœ,ä½†æ˜¯ä¸ä¼šé˜»å¡ä»£ç ç»§ç»­è¿è¡Œ
promise.then(

    //å‰è€…æ˜¯æˆåŠŸçš„å›è°ƒï¼Œé‡Œé¢çš„å‚æ•°valueä¹Ÿå¯ä»¥è‡ªå·±å‘½åï¼Œè‡ªåŠ¨è·å–resolveé‡Œé¢çš„å‚æ•°
    function(value){console.log(`promiseä¸­æ‰§è¡Œäº†resolve:`+value)},

    //åè€…æ˜¯å¤±è´¥çš„å›è°ƒï¼ŒåŒç†
    function(error){console.log(`promiseä¸­æ‰§è¡Œäº†reject:`+error)}
)
//è¿™ä¸ªè¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªpromiseå‡½æ•°

// 3 å…¶ä»–ä»£ç æ‰§è¡Œ
console.log('other code2222 invoked')
</script>

<template>
<div>Promiseé¡µé¢</div>
</template>

<style scoped>

</style>
```

#### 9.0.4 Promise catch()

> `Promise.prototype.catch`æ–¹æ³•æ˜¯`.then(null, rejection)`çš„åˆ«åï¼Œç”¨äºæŒ‡å®špromiseçŠ¶æ€ä¸ºrejectæˆ–è€…promiseå‘ç”Ÿå¼‚å¸¸æ—¶çš„å›è°ƒå‡½æ•°ã€‚
>
> æ‰€ä»¥ï¼Œå¯ä»¥çœ‹å‡ºcatchåŒ…å«äº†thené‡Œé¢çš„ç¬¬äºŒä¸ªfunctionå‡½æ•°

```html
<script>
    let promise =new Promise(function(resolve,reject){
        console.log("promise do some code ... ...")
        // æ•…æ„å“åº”ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡
        throw new Error("error message")
    })
    console.log('other code1111 invoked')
    
        */
    
    //ç®€è¨€ä¹‹ï¼Œå¯ä»¥ç®€å†™ï¼Œæ›¿æ¢æˆè¿™ä¸ªæ ·å­ï¼šthené‡Œé¢æ”¾æˆåŠŸçš„å‡½æ•°ï¼Œcatchæ”¾å¤±è´¥çš„å‡½æ•°
    promise.then(
        function(resolveValue){console.log(`promiseä¸­æ‰§è¡Œäº†resolve:${resolveValue}`)}
        //,
        //function(rejectValue){console.log(`promiseä¸­æ‰§è¡Œäº†reject:${rejectValue}`)}
    ).catch(
        function(error){console.log(error)} 
    )
    console.log('other code2222 invoked')
</script>
```


â€‹        thenä¸­çš„reject()çš„å¯¹åº”æ–¹æ³•å¯ä»¥åœ¨äº§ç”Ÿå¼‚å¸¸æ—¶æ‰§è¡Œ,æ¥æ”¶åˆ°çš„å°±æ˜¯å¼‚å¸¸ä¸­çš„æç¤ºä¿¡æ¯
â€‹        thenä¸­å¯ä»¥åªç•™ä¸€ä¸ªresolve()çš„å¯¹åº”æ–¹æ³•,reject()æ–¹æ³•å¯ä»¥ç”¨åç»­çš„catchæ›¿æ¢
â€‹        thenä¸­çš„rejectå¯¹åº”çš„å›è°ƒå‡½æ•°è¢«åç»­çš„catchæ›¿æ¢å,catchä¸­æ¥æ”¶çš„æ•°æ®æ˜¯ä¸€ä¸ªå¼‚å¸¸

####  9.0.5 asyncå’Œawaitçš„ä½¿ç”¨

> &#x20;asyncå’Œawaitæ˜¯ES6ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„æ–°ç‰¹æ€§ã€‚é€šå¸¸ï¼Œå¼‚æ­¥æ“ä½œä¼šæ¶‰åŠåˆ°Promiseå¯¹è±¡ï¼Œè€Œasync/awaitåˆ™æ˜¯åœ¨PromiseåŸºç¡€ä¸Šæä¾›äº†æ›´åŠ ç›´è§‚å’Œæ˜“äºä½¿ç”¨çš„è¯­æ³•ã€‚

//TODO`async ç”¨äºæ ‡è¯†å‡½æ•°ï¼Œæ ‡è¯†å‡½æ•°å,å‡½æ•°çš„è¿”å›å€¼ä¼šå˜æˆä¸€ä¸ªpromiseå¯¹è±¡`

1 asyncæ ‡è¯†å‡½æ•°å,asyncå‡½æ•°çš„è¿”å›å€¼ä¼šå˜æˆä¸€ä¸ªpromiseå¯¹è±¡



//todo,2 å¦‚æœå‡½æ•°å†…éƒ¨è¿”å›çš„æ˜¯ä¸€ä¸ª`promiseå¯¹è±¡`,åˆ™`asyncå‡½æ•°è¿”å›çš„çŠ¶æ€ä¸ç»“æœç”±è¯¥å¯¹è±¡æ¥æ‰‹`



``` html
<script>
    	async function fun1(){
            
            //2.å¦‚æœæ–¹æ³•æ­£å¸¸è¿”å›ç»“æœ,asyncå‡½æ•°çš„çŠ¶æ€å°±æ˜¯resolved ï¼Œreturnåçš„ç»“æœå°±æ˜¯æˆåŠŸçŠ¶æ€çš„è¿”å›å€¼
            //return 10
            
            //æ¨¡æ‹Ÿå‡ºç°å¼‚å¸¸
           // 3 å¦‚æœå‡½æ•°å†…éƒ¨æŠ›å‡ºçš„æ˜¯ä¸€ä¸ª`å¼‚å¸¸`,åˆ™ asyncå‡½æ•°è¿”å›çš„promiseå°±æ˜¯ä¸€ä¸ªå¤±è´¥çŠ¶æ€
            //throw new Error("something wrong")
            
            //4. å¦‚æœå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªromise,åˆ™çŠ¶æ€ç”±å†…éƒ¨promiseå†³å®š
            
            let promise = Promise.reject("heihei")
            return promise
        }

        let promise =fun1()

        promise.then(
            function(value){
                console.log("success:"+value)
            }
        ).catch(
            function(value){
                console.log("fail:"+value)
            }
        )
</script>
```

> await

1. awaitå³ä¾§çš„è¡¨è¾¾å¼ä¸€èˆ¬ä¸ºä¸€ä¸ªpromiseå¯¹è±¡,ä½†æ˜¯ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå…¶ä»–å€¼ï¼Œå¦‚æœè¡¨è¾¾å¼æ˜¯å…¶ä»–å€¼,åˆ™ç›´æ¥è¿”å›è¯¥å€¼ï¼Œå½“ç„¶ï¼Œæ˜¯æ™®é€šå€¼æ²¡æœ‰æ„ä¹‰ã€‚
2. å¦‚æœè¡¨è¾¾å¼æ˜¯promiseå¯¹è±¡,awaitè¿”å›çš„æ˜¯promiseæˆåŠŸçš„å€¼ï¼Œä¸€èˆ¬å°±æ˜¯ç”¨åœ¨è¿™é‡Œ
3. awaitä¼šç­‰å³è¾¹çš„promiseå¯¹è±¡æ‰§è¡Œç»“æŸ,ç„¶åå†è·å–ç»“æœ,è¿™ä¸ªawaitæ‰€åœ¨å‡½æ•°é‡Œé¢çš„åç»­ä»£ç ä¹Ÿä¼šç­‰å¾…awaitçš„æ‰§è¡Œ
5. awaitå¿…é¡»åœ¨asyncå‡½æ•°ä¸­,ä½†æ˜¯asyncå‡½æ•°ä¸­å¯ä»¥æ²¡æœ‰await
6. å¦‚æœawaitå³è¾¹çš„promiseå¤±è´¥äº†,å°±ä¼šæŠ›å‡ºå¼‚å¸¸,éœ€è¦é€šè¿‡ try ... catchæ•è·å¤„ç†

``` html
<script>

		async function fun1(){
            return 10
        
        }

        async function fun2(){
            try{
                
                let res = await fun1()
                //let res = await Promise.reject("something wrong")
            }catch(e){
                console.log("catch got:"+e)   
            }
            
            console.log("await got:"+res)
        }

        fun2()
</script>
```



### 9.1 Axiosä»‹ç»

>  ajax

+ AJAX = Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚

+ AJAX ä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ä½¿ç”¨ç°æœ‰æ ‡å‡†çš„æ–°æ–¹æ³•ã€‚

+ AJAX æœ€å¤§çš„ä¼˜ç‚¹æ˜¯åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µå†…å®¹ã€‚

+ AJAX ä¸éœ€è¦ä»»ä½•æµè§ˆå™¨æ’ä»¶ï¼Œä½†éœ€è¦ç”¨æˆ·å…è®¸ JavaScript åœ¨æµè§ˆå™¨ä¸Šæ‰§è¡Œã€‚

+ XMLHttpRequest åªæ˜¯å®ç° Ajax çš„ä¸€ç§æ–¹å¼ã€‚

**ajaxå·¥ä½œåŸç†ï¼š**

![](https://blog-resources.this0.com/image/202403301653522.png?x-oss-process=style/this0-blog )

>  åŸç”Ÿ**javascriptæ–¹å¼è¿›è¡Œajax(äº†è§£):**

```html
<script>
  function loadXMLDoc(){
    var xmlhttp;
    if (window.XMLHttpRequest){
      //  IE7+, Firefox, Chrome, Opera, Safari æµè§ˆå™¨æ‰§è¡Œä»£ç 
      xmlhttp=new XMLHttpRequest();
    }
    else{
      // IE6, IE5 æµè§ˆå™¨æ‰§è¡Œä»£ç 
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
      // è®¾ç½®å›è°ƒå‡½æ•°å¤„ç†å“åº”ç»“æœ
    xmlhttp.onreadystatechange=function(){
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
      }
    }
      // è®¾ç½®è¯·æ±‚æ–¹å¼å’Œè¯·æ±‚çš„èµ„æºè·¯å¾„
    xmlhttp.open("GET","/try/ajax/ajax_info.txt",true);
      // å‘é€è¯·æ±‚
    xmlhttp.send();
  }
</script>   
```

>  ä»€ä¹ˆæ˜¯axios  å®˜ç½‘ä»‹ç»:https://axios-http.com/zh/docs/intro

+ Axios æ˜¯ä¸€ä¸ªåŸºäº [*promise*](https://javascript.info/promise-basics "promise") ç½‘ç»œè¯·æ±‚åº“ï¼Œä½œç”¨äº[node.js](https://nodejs.org/ "node.js") å’Œæµè§ˆå™¨ä¸­ã€‚ å®ƒæ˜¯ [*isomorphic*](https://www.lullabot.com/articles/what-is-an-isomorphic-application "isomorphic") çš„(å³åŒä¸€å¥—ä»£ç å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨å’Œnode.jsä¸­)ã€‚åœ¨æœåŠ¡ç«¯å®ƒä½¿ç”¨åŸç”Ÿ node.js `http` æ¨¡å—, è€Œåœ¨å®¢æˆ·ç«¯ (æµè§ˆç«¯) åˆ™ä½¿ç”¨ XMLHttpRequestsã€‚å®ƒæœ‰å¦‚ä¸‹ç‰¹æ€§
  + ä»æµè§ˆå™¨åˆ›å»º [XMLHttpRequests](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest "XMLHttpRequests")
  + ä» node.js åˆ›å»º [http](http://nodejs.org/api/http.html "http") è¯·æ±‚
  + æ”¯æŒ [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise "Promise") API
  + æ‹¦æˆªè¯·æ±‚å’Œå“åº”
  + è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®
  + å–æ¶ˆè¯·æ±‚
  + è‡ªåŠ¨è½¬æ¢JSONæ•°æ®
  + å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡[XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery "XSRF")

### 9.2 Axios å…¥é—¨æ¡ˆä¾‹

> 1 æ¡ˆä¾‹éœ€æ±‚:è¯·æ±‚åå°è·å–éšæœºåœŸå‘³æƒ…è¯

+ è¯·æ±‚çš„url

``` http
https://api.uomg.com/api/rand.qinghua?format=json    æˆ–è€…ä½¿ç”¨  http://forum.atguigu.cn/api/rand.qinghua?format=json
```

+ è¯·æ±‚çš„æ–¹å¼

``` http
GET/POST
```

+ æ•°æ®è¿”å›çš„æ ¼å¼

```json
{"code":1,"content":"æˆ‘åŠªåŠ›ä¸æ˜¯ä¸ºäº†ä½ è€Œæ˜¯å› ä¸ºä½ ã€‚"}
```

> 2 å‡†å¤‡é¡¹ç›®

```javascript
npm create vite
npm install 
/*npm install vue-router@4 --save
npm install pinia */
```

>  3 å®‰è£…axios

```shell
npm install axios
```

> 4 è®¾è®¡é¡µé¢ï¼ˆApp.Vueï¼‰

```html
<script setup type="module">
  import axios from 'axios'
  import { onMounted,reactive } from 'vue';
    
  let jsonData =reactive({code:1,content:'æˆ‘åŠªåŠ›ä¸æ˜¯ä¸ºäº†ä½ è€Œæ˜¯å› ä¸ºä½ '})

  let getLoveMessage =()=>{
    axios({
      method:"post", // è¯·æ±‚æ–¹å¼
      url:"https://api.uomg.com/api/rand.qinghua?format=json",  // è¯·æ±‚çš„url
      data:{ // å½“è¯·æ±‚æ–¹å¼ä¸ºpostæ—¶,dataä¸‹çš„æ•°æ®ä»¥JSONä¸²æ”¾å…¥è¯·æ±‚ä½“,å¦åˆ™ä»¥key=valueå½¢å¼æ”¾urlå
        username:"123456"
      }
    }).then( function (response){//å“åº”æˆåŠŸæ—¶è¦æ‰§è¡Œçš„å‡½æ•°
      console.log(response)
      Object.assign(jsonData,response.data)
    }).catch(function (error){// å“åº”å¤±è´¥æ—¶è¦æ‰§è¡Œçš„å‡½æ•°
      console.log(error)
    })
  }

  /* é€šè¿‡onMountedç”Ÿå‘½å‘¨æœŸ,è‡ªåŠ¨åŠ è½½ä¸€æ¬¡ */
  onMounted(()=>{
    getLoveMessage()
  })
</script>

<template>
    <div>
      <h1>ä»Šæ—¥åœŸå‘³æƒ…è¯:{{jsonData.content}}</h1>
      <button  @click="getLoveMessage">è·å–ä»Šæ—¥åœŸå‘³æƒ…è¯</button>
    </div>
</template>

<style scoped>
</style>

```

>  5 å¯åŠ¨æµ‹è¯•

```shell
npm run dev
```

> å¼‚æ­¥å“åº”çš„æ•°æ®ç»“æ„

+ å“åº”çš„æ•°æ®æ˜¯ç»è¿‡åŒ…è£…è¿”å›çš„ï¼ä¸€ä¸ªè¯·æ±‚çš„å“åº”åŒ…å«ä»¥ä¸‹ä¿¡æ¯ã€‚

```json
{
  // `data` ç”±æœåŠ¡å™¨æä¾›çš„å“åº”
  data: {},
  // `status` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ç 
  status: 200,
  // `statusText` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ä¿¡æ¯
  statusText: 'OK',
  // `headers` æ˜¯æœåŠ¡å™¨å“åº”å¤´
  // æ‰€æœ‰çš„ header åç§°éƒ½æ˜¯å°å†™ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·è¯­æ³•è®¿é—®
  // ä¾‹å¦‚: `response.headers['content-type']`
  headers: {},
  // `config` æ˜¯ `axios` è¯·æ±‚çš„é…ç½®ä¿¡æ¯
  config: {},
  // `request` æ˜¯ç”Ÿæˆæ­¤å“åº”çš„è¯·æ±‚
  // åœ¨node.jsä¸­å®ƒæ˜¯æœ€åä¸€ä¸ªClientRequestå®ä¾‹ (in redirects)ï¼Œ
  // åœ¨æµè§ˆå™¨ä¸­åˆ™æ˜¯ XMLHttpRequest å®ä¾‹
  request: {}
}
```

+ thenå–å€¼

```javascript
then(function (response) {
    console.log(response.data);
    console.log(response.status);
    console.log(response.statusText);
    console.log(response.headers);
    console.log(response.config);
});
```


> 6 é€šè¿‡asyncå’Œawaitå¤„ç†å¼‚æ­¥è¯·æ±‚

```html
<script setup type="module">
  import axios from 'axios'
  import { onMounted,reactive } from 'vue';
    
  let jsonData =reactive({code:1,content:'æˆ‘åŠªåŠ›ä¸æ˜¯ä¸ºäº†ä½ è€Œæ˜¯å› ä¸ºä½ '})

  let getLoveWords = async ()=>{
    return await axios({
      method:"post",
      url:"https://api.uomg.com/api/rand.qinghua?format=json",
      data:{
        username:"123456"
      }
    })
  }

  let getLoveMessage =()=>{
   	 let {data}  = await getLoveWords()
     Object.assign(message,data)
  }

  /* é€šè¿‡onMountedç”Ÿå‘½å‘¨æœŸ,è‡ªåŠ¨åŠ è½½ä¸€æ¬¡ */
  onMounted(()=>{
    getLoveMessage()
  })
</script>

<template>
    <div>
      <h1>ä»Šæ—¥åœŸå‘³æƒ…è¯:{{jsonData.content}}</h1>
      <button  @click="getLoveMessage">è·å–ä»Šæ—¥åœŸå‘³æƒ…è¯</button>
    </div>
</template>

<style scoped>
</style>

```

>  axiosåœ¨å‘é€å¼‚æ­¥è¯·æ±‚æ—¶çš„å¯é€‰é…ç½®ï¼š

//TODO,è¿™ä¸ªä¹Ÿæœ‰ç”¨

```json
{
  // `url` æ˜¯ç”¨äºè¯·æ±‚çš„æœåŠ¡å™¨ URL
  url: '/user',
  // `method` æ˜¯åˆ›å»ºè¯·æ±‚æ—¶ä½¿ç”¨çš„æ–¹æ³•
  method: 'get', // é»˜è®¤å€¼
  // `baseURL` å°†è‡ªåŠ¨åŠ åœ¨ `url` å‰é¢ï¼Œé™¤é `url` æ˜¯ä¸€ä¸ªç»å¯¹ URLã€‚
  // å®ƒå¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ª `baseURL` ä¾¿äºä¸º axios å®ä¾‹çš„æ–¹æ³•ä¼ é€’ç›¸å¯¹ URL
  baseURL: 'https://some-domain.com/api/',
  // `transformRequest` å…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®
  // å®ƒåªèƒ½ç”¨äº 'PUT', 'POST' å’Œ 'PATCH' è¿™å‡ ä¸ªè¯·æ±‚æ–¹æ³•
  // æ•°ç»„ä¸­æœ€åä¸€ä¸ªå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ ä¸€ä¸ªBufferå®ä¾‹ï¼ŒArrayBufferï¼ŒFormDataï¼Œæˆ– Stream
  // ä½ å¯ä»¥ä¿®æ”¹è¯·æ±‚å¤´ã€‚
  transformRequest: [function (data, headers) {
    // å¯¹å‘é€çš„ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†
    return data;
  }],
  // `transformResponse` åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®
  transformResponse: [function (data) {
    // å¯¹æ¥æ”¶çš„ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†
    return data;
  }],
  // è‡ªå®šä¹‰è¯·æ±‚å¤´
  headers: {'X-Requested-With': 'XMLHttpRequest'},
  // `params` æ˜¯ä¸è¯·æ±‚ä¸€èµ·å‘é€çš„ URL å‚æ•°
  // å¿…é¡»æ˜¯ä¸€ä¸ªç®€å•å¯¹è±¡æˆ– URLSearchParams å¯¹è±¡
  params: {
    ID: 12345
  },
  // `paramsSerializer`æ˜¯å¯é€‰æ–¹æ³•ï¼Œä¸»è¦ç”¨äºåºåˆ—åŒ–`params`
  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)
  paramsSerializer: function (params) {
    return Qs.stringify(params, {arrayFormat: 'brackets'})
  },
  // `data` æ˜¯ä½œä¸ºè¯·æ±‚ä½“è¢«å‘é€çš„æ•°æ®
  // ä»…é€‚ç”¨ 'PUT', 'POST', 'DELETE å’Œ 'PATCH' è¯·æ±‚æ–¹æ³•
  // åœ¨æ²¡æœ‰è®¾ç½® `transformRequest` æ—¶ï¼Œåˆ™å¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€:
  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams
  // - æµè§ˆå™¨ä¸“å±: FormData, File, Blob
  // - Node ä¸“å±: Stream, Buffer
  data: {
    firstName: 'Fred'
  },
  // å‘é€è¯·æ±‚ä½“æ•°æ®çš„å¯é€‰è¯­æ³•
  // è¯·æ±‚æ–¹å¼ post
  // åªæœ‰ value ä¼šè¢«å‘é€ï¼Œkey åˆ™ä¸ä¼š
  data: 'Country=Brasil&City=Belo Horizonte',
  // `timeout` æŒ‡å®šè¯·æ±‚è¶…æ—¶çš„æ¯«ç§’æ•°ã€‚
  // å¦‚æœè¯·æ±‚æ—¶é—´è¶…è¿‡ `timeout` çš„å€¼ï¼Œåˆ™è¯·æ±‚ä¼šè¢«ä¸­æ–­
  timeout: 1000, // é»˜è®¤å€¼æ˜¯ `0` (æ°¸ä¸è¶…æ—¶)
  // `withCredentials` è¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯
  withCredentials: false, // default
  // `adapter` å…è®¸è‡ªå®šä¹‰å¤„ç†è¯·æ±‚ï¼Œè¿™ä½¿æµ‹è¯•æ›´åŠ å®¹æ˜“ã€‚
  // è¿”å›ä¸€ä¸ª promise å¹¶æä¾›ä¸€ä¸ªæœ‰æ•ˆçš„å“åº” ï¼ˆå‚è§ lib/adapters/README.mdï¼‰ã€‚
  adapter: function (config) {
    /* ... */
  },
  // `auth` HTTP Basic Auth
  auth: {
    username: 'janedoe',
    password: 's00pers3cret'
  },
  // `responseType` è¡¨ç¤ºæµè§ˆå™¨å°†è¦å“åº”çš„æ•°æ®ç±»å‹
  // é€‰é¡¹åŒ…æ‹¬: 'arraybuffer', 'document', 'json', 'text', 'stream'
  // æµè§ˆå™¨ä¸“å±ï¼š'blob'
  responseType: 'json', // é»˜è®¤å€¼
  // `responseEncoding` è¡¨ç¤ºç”¨äºè§£ç å“åº”çš„ç¼–ç  (Node.js ä¸“å±)
  // æ³¨æ„ï¼šå¿½ç•¥ `responseType` çš„å€¼ä¸º 'stream'ï¼Œæˆ–è€…æ˜¯å®¢æˆ·ç«¯è¯·æ±‚
  // Note: Ignored for `responseType` of 'stream' or client-side requests
  responseEncoding: 'utf8', // é»˜è®¤å€¼
  // `xsrfCookieName` æ˜¯ xsrf token çš„å€¼ï¼Œè¢«ç”¨ä½œ cookie çš„åç§°
  xsrfCookieName: 'XSRF-TOKEN', // é»˜è®¤å€¼
  // `xsrfHeaderName` æ˜¯å¸¦æœ‰ xsrf token å€¼çš„http è¯·æ±‚å¤´åç§°
  xsrfHeaderName: 'X-XSRF-TOKEN', // é»˜è®¤å€¼
  // `onUploadProgress` å…è®¸ä¸ºä¸Šä¼ å¤„ç†è¿›åº¦äº‹ä»¶
  // æµè§ˆå™¨ä¸“å±
  onUploadProgress: function (progressEvent) {
    // å¤„ç†åŸç”Ÿè¿›åº¦äº‹ä»¶
  },
  // `onDownloadProgress` å…è®¸ä¸ºä¸‹è½½å¤„ç†è¿›åº¦äº‹ä»¶
  // æµè§ˆå™¨ä¸“å±
  onDownloadProgress: function (progressEvent) {
    // å¤„ç†åŸç”Ÿè¿›åº¦äº‹ä»¶
  },
  // `maxContentLength` å®šä¹‰äº†node.jsä¸­å…è®¸çš„HTTPå“åº”å†…å®¹çš„æœ€å¤§å­—èŠ‚æ•°
  maxContentLength: 2000,
  // `maxBodyLength`ï¼ˆä»…Nodeï¼‰å®šä¹‰å…è®¸çš„httpè¯·æ±‚å†…å®¹çš„æœ€å¤§å­—èŠ‚æ•°
  maxBodyLength: 2000,
  // `validateStatus` å®šä¹‰äº†å¯¹äºç»™å®šçš„ HTTPçŠ¶æ€ç æ˜¯ resolve è¿˜æ˜¯ reject promiseã€‚
  // å¦‚æœ `validateStatus` è¿”å› `true` (æˆ–è€…è®¾ç½®ä¸º `null` æˆ– `undefined`)ï¼Œ
  // åˆ™promise å°†ä¼š resolvedï¼Œå¦åˆ™æ˜¯ rejectedã€‚
  validateStatus: function (status) {
    return status >= 200 && status < 300; // é»˜è®¤å€¼
  },
  // `maxRedirects` å®šä¹‰äº†åœ¨node.jsä¸­è¦éµå¾ªçš„æœ€å¤§é‡å®šå‘æ•°ã€‚
  // å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä¸ä¼šè¿›è¡Œé‡å®šå‘
  maxRedirects: 5, // é»˜è®¤å€¼
  // `socketPath` å®šä¹‰äº†åœ¨node.jsä¸­ä½¿ç”¨çš„UNIXå¥—æ¥å­—ã€‚
  // e.g. '/var/run/docker.sock' å‘é€è¯·æ±‚åˆ° docker å®ˆæŠ¤è¿›ç¨‹ã€‚
  // åªèƒ½æŒ‡å®š `socketPath` æˆ– `proxy` ã€‚
  // è‹¥éƒ½æŒ‡å®šï¼Œè¿™ä½¿ç”¨ `socketPath` ã€‚
  socketPath: null, // default
  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http
  // and https requests, respectively, in node.js. This allows options to be added like
  // `keepAlive` that are not enabled by default.
  httpAgent: new http.Agent({ keepAlive: true }),
  httpsAgent: new https.Agent({ keepAlive: true }),
  // `proxy` å®šä¹‰äº†ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåï¼Œç«¯å£å’Œåè®®ã€‚
  // æ‚¨å¯ä»¥ä½¿ç”¨å¸¸è§„çš„`http_proxy` å’Œ `https_proxy` ç¯å¢ƒå˜é‡ã€‚
  // ä½¿ç”¨ `false` å¯ä»¥ç¦ç”¨ä»£ç†åŠŸèƒ½ï¼ŒåŒæ—¶ç¯å¢ƒå˜é‡ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚
  // `auth`è¡¨ç¤ºåº”ä½¿ç”¨HTTP Basic authè¿æ¥åˆ°ä»£ç†ï¼Œå¹¶ä¸”æä¾›å‡­æ®ã€‚
  // è¿™å°†è®¾ç½®ä¸€ä¸ª `Proxy-Authorization` è¯·æ±‚å¤´ï¼Œå®ƒä¼šè¦†ç›– `headers` ä¸­å·²å­˜åœ¨çš„è‡ªå®šä¹‰ `Proxy-Authorization` è¯·æ±‚å¤´ã€‚
  // å¦‚æœä»£ç†æœåŠ¡å™¨ä½¿ç”¨ HTTPSï¼Œåˆ™å¿…é¡»è®¾ç½® protocol ä¸º`https`
  proxy: {
    protocol: 'https',
    host: '127.0.0.1',
    port: 9000,
    auth: {
      username: 'mikeymike',
      password: 'rapunz3l'
    }
  },
  // see https://axios-http.com/zh/docs/cancellation
  cancelToken: new CancelToken(function (cancel) {
  }),
  // `decompress` indicates whether or not the response body should be decompressed 
  // automatically. If set to `true` will also remove the 'content-encoding' header 
  // from the responses objects of all decompressed responses
  // - Node only (XHR cannot turn off decompression)
  decompress: true // é»˜è®¤å€¼
}
```

### 9.3 Axios getå’Œpostæ–¹æ³•

> é…ç½®æ·»åŠ è¯­æ³•

``` javascript
axios.get(url[, config])

axios.get(url,{
   ä¸Šé¢æŒ‡å®šé…ç½®key:é…ç½®å€¼,
   ä¸Šé¢æŒ‡å®šé…ç½®key:é…ç½®å€¼
})

axios.post(url[, data[, config]])

axios.post(url,{key:value //æ­¤ä½ç½®æ•°æ®ï¼Œæ²¡æœ‰ç©ºå¯¹è±¡å³å¯{}},{
   ä¸Šé¢æŒ‡å®šé…ç½®key:é…ç½®å€¼,
   ä¸Šé¢æŒ‡å®šé…ç½®key:é…ç½®å€¼
})
```



> æµ‹è¯•getå‚æ•°

``` html
<script setup type="module">
  import axios from 'axios'
  import { onMounted,ref,reactive,toRaw } from 'vue';
  let jsonData =reactive({code:1,content:'æˆ‘åŠªåŠ›ä¸æ˜¯ä¸ºäº†ä½ è€Œæ˜¯å› ä¸ºä½ '})

  let getLoveWords= async ()=>{
    try{
      return await axios.get(
        'https://api.uomg.com/api/rand.qinghua',
        {
          params:{// å‘urlåæ·»åŠ çš„é”®å€¼å¯¹å‚æ•°
            format:'json',
            username:'zhangsan',
            password:'123456'
          },
          headers:{// è®¾ç½®è¯·æ±‚å¤´
            'Accept' : 'application/json, text/plain, text/html,*/*'
          }
        }
      )
    }catch (e){
      return await e
    }
  }

  let getLoveMessage =()=>{
     let {data}  = await getLoveWords()
     Object.assign(message,data)
  }
  /* é€šè¿‡onMountedç”Ÿå‘½å‘¨æœŸ,è‡ªåŠ¨åŠ è½½ä¸€æ¬¡ */
  onMounted(()=>{
    getLoveMessage()
  })
</script>

<template>
    <div>
      <h1>ä»Šæ—¥åœŸå‘³æƒ…è¯:{{jsonData.content}}</h1>
      <button  @click="getLoveMessage">è·å–ä»Šæ—¥åœŸå‘³æƒ…è¯</button>
    </div>
</template>

<style scoped>
</style>

```

> æµ‹è¯•postå‚æ•°

```html
<script setup type="module">
  import axios from 'axios'
  import { onMounted,ref,reactive,toRaw } from 'vue';
  let jsonData =reactive({code:1,content:'æˆ‘åŠªåŠ›ä¸æ˜¯ä¸ºäº†ä½ è€Œæ˜¯å› ä¸ºä½ '})

  let getLoveWords= async ()=>{
    try{
      return await axios.post(
        'https://api.uomg.com/api/rand.qinghua',
        {//è¯·æ±‚ä½“ä¸­çš„JSONæ•°æ®
            username:'zhangsan',
            password:'123456'
        },
        {// å…¶ä»–å‚æ•°
         	params:{// urlä¸Šæ‹¼æ¥çš„é”®å€¼å¯¹å‚æ•°
            	format:'json',
          	},
          	headers:{// è¯·æ±‚å¤´
            	'Accept' : 'application/json, text/plain, text/html,*/*',
            	'X-Requested-With': 'XMLHttpRequest'
          	}
        }
      )
    }catch (e){
      return await e
    }
  }

  let getLoveMessage =()=>{
     let {data}  = await getLoveWords()
     Object.assign(message,data)
  }
  /* é€šè¿‡onMountedç”Ÿå‘½å‘¨æœŸ,è‡ªåŠ¨åŠ è½½ä¸€æ¬¡ */
  onMounted(()=>{
    getLoveMessage()
  })
</script>

<template>
    <div>
      <h1>ä»Šæ—¥åœŸå‘³æƒ…è¯:{{jsonData.content}}</h1>
      <button  @click="getLoveMessage">è·å–ä»Šæ—¥åœŸå‘³æƒ…è¯</button>
    </div>
</template>

<style scoped>
</style>

```

### 9.4 Axios æ‹¦æˆªå™¨

> å¦‚æœæƒ³åœ¨axioså‘é€è¯·æ±‚ä¹‹å‰,æˆ–è€…æ˜¯æ•°æ®å“åº”å›æ¥åœ¨æ‰§è¡Œthenæ–¹æ³•ä¹‹å‰åšä¸€äº›é¢å¤–çš„å·¥ä½œ,å¯ä»¥é€šè¿‡æ‹¦æˆªå™¨å®Œæˆ

```javascript
// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ è¯·æ±‚å‘é€ä¹‹å‰
axios.interceptors.request.use(
  function (config) {
    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
    return config;
  }, 
  function (error) {
    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
  }
);

// æ·»åŠ å“åº”æ‹¦æˆªå™¨ æ•°æ®å“åº”å›æ¥
axios.interceptors.response.use(
  function (response) {
    // 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚
    // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
    return response;
  }, 
  function (error) {
    // è¶…å‡º 2xx èŒƒå›´çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚
    // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
    return Promise.reject(error);
  }
);
```

+ å®šä¹‰src/axios.jsæå–æ‹¦æˆªå™¨å’Œé…ç½®è¯­æ³•

```javascript
import axios from 'axios'


//  åˆ›å»ºinstanceå®ä¾‹
const instance = axios.create({
    baseURL:'https://api.uomg.com',
    timeout:10000
})

//  æ·»åŠ è¯·æ±‚æ‹¦æˆª
instance.interceptors.request.use(
    // è®¾ç½®è¯·æ±‚å¤´é…ç½®ä¿¡æ¯
    config=>{
        //å¤„ç†æŒ‡å®šçš„è¯·æ±‚å¤´
        console.log("before request")
        config.headers.Accept = 'application/json, text/plain, text/html,*/*'
        return config
    },
    // è®¾ç½®è¯·æ±‚é”™è¯¯å¤„ç†å‡½æ•°
    error=>{
        console.log("request error")
        return Promise.reject(error)
    }
)
// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
    // è®¾ç½®å“åº”æ­£ç¡®æ—¶çš„å¤„ç†å‡½æ•°
    response=>{
        console.log("after success response")
        console.log(response)
        return response
    },
    // è®¾ç½®å“åº”å¼‚å¸¸æ—¶çš„å¤„ç†å‡½æ•°
    error=>{
        console.log("after fail response")
        console.log(error)
        return Promise.reject(error)
    }
)
// é»˜è®¤å¯¼å‡º
export default instance
```

+ App.vue

```html
<script setup type="module">
  // å¯¼å…¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„axios.jsæ–‡ä»¶,è€Œä¸æ˜¯å¯¼å…¥axiosä¾èµ–  
  import axios from './axios.js'
  import { onMounted,ref,reactive,toRaw } from 'vue';
  let jsonData =reactive({code:1,content:'æˆ‘åŠªåŠ›ä¸æ˜¯ä¸ºäº†ä½ è€Œæ˜¯å› ä¸ºä½ '})

  let getLoveWords= async ()=>{
    try{
      return await axios.post(
        'api/rand.qinghua',
        {
            username:'zhangsan',
            password:'123456'
        },//è¯·æ±‚ä½“ä¸­çš„JSONæ•°æ®
        {
          params:{
            format:'json',
          }
        }// å…¶ä»–é”®å€¼å¯¹å‚æ•°
      )
    }catch (e){
      return await e
    }
  }

  let getLoveMessage =()=>{
    // è¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªfullfilledçŠ¶æ€çš„promise
    getLoveWords().then(
        (response) =>{
          console.log("after getloveWords")
          console.log(response)
          Object.assign(jsonData,response.data)
        }
    )
  }
  /* é€šè¿‡onMountedç”Ÿå‘½å‘¨æœŸ,è‡ªåŠ¨åŠ è½½ä¸€æ¬¡ */
  onMounted(()=>{
    getLoveMessage()
  })
</script>

<template>
    <div>
      <h1>ä»Šæ—¥åœŸå‘³æƒ…è¯:{{jsonData.content}}</h1>
      <button  @click="getLoveMessage">è·å–ä»Šæ—¥åœŸå‘³æƒ…è¯</button>
    </div>
   
</template>

<style scoped>
</style>
```



## åã€æ¡ˆä¾‹å¼€å‘-æ—¥ç¨‹ç®¡ç†-ç¬¬å…­æœŸ

### 10.1 å‰ç«¯ä»£ç å¤„ç†

#### 10.1.1 åˆ›å»ºsrc/utils/request.jsæ–‡ä»¶

``` javascript
import axios from 'axios'

//  åˆ›å»ºinstanceå®ä¾‹
const instance = axios.create({
    baseURL:'http://localhost:8080/'
   
})

//  æ·»åŠ è¯·æ±‚æ‹¦æˆª
instance.interceptors.request.use(
    // è®¾ç½®è¯·æ±‚å¤´é…ç½®ä¿¡æ¯
    config=>{
        //å¤„ç†æŒ‡å®šçš„è¯·æ±‚å¤´
        
        return config
    },
    // è®¾ç½®è¯·æ±‚é”™è¯¯å¤„ç†å‡½æ•°
    error=>{
    
        return Promise.reject(error)
    }
)
// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
    // è®¾ç½®å“åº”æ­£ç¡®æ—¶çš„å¤„ç†å‡½æ•°
    response=>{
      
        return response
    },
    // è®¾ç½®å“åº”å¼‚å¸¸æ—¶çš„å¤„ç†å‡½æ•°
    error=>{
        return Promise.reject(error)
    }
)
// é»˜è®¤å¯¼å‡º
export default instance
```

#### 10.1.2 æ³¨å†Œé¡µé¢å®Œæˆæ³¨å†Œ

``` html
<script setup>
    import {ref,reactive} from 'vue'
    /* å¯¼å…¥å‘é€è¯·æ±‚çš„axioså¯¹è±¡ */
    import request from'../utils/request'

    import {useRouter} from 'vue-router'
    const router = useRouter()

    let registUser = reactive({
        username:"",
        userPwd:""
    })
    let usernameMsg=ref('')
    let userPwdMsg=ref('')
    let reUserPwdMsg=ref('')
    let reUserPwd=ref('')
    async function checkUsername(){
        let usernameReg= /^[a-zA-Z0-9]{5,10}$/
        if(!usernameReg.test(registUser.username)){
            usernameMsg.value="æ ¼å¼æœ‰è¯¯"
            return false
        }
        // å‘é€å¼‚æ­¥è¯·æ±‚   ç»§ç»­æ ¡éªŒç”¨æˆ·åæ˜¯å¦è¢«å ç”¨
        let {data} = await request.post(`user/checkUsernameUsed?username=${registUser.username}`)
        if(data.code != 200){
            usernameMsg.value="ç”¨æˆ·åå ç”¨"
            return false
        }
        usernameMsg.value="å¯ç”¨"
        return true
    }

    function checkUserPwd(){
        let userPwdReg = /^[0-9]{6}$/
        if(!userPwdReg.test(registUser.userPwd)){
            userPwdMsg.value="æ ¼å¼æœ‰è¯¯"
            return false
        }
        userPwdMsg.value="OK"
        return true
    }

    function checkReUserPwd(){
        let userPwdReg = /^[0-9]{6}$/
        if(!userPwdReg.test(reUserPwd.value)){
            reUserPwdMsg.value="æ ¼å¼æœ‰è¯¯"
            return false
        }
        if(registUser.userPwd != reUserPwd.value){
            reUserPwdMsg.value="ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´"
            return false
        }
        reUserPwdMsg.value="OK"
        return true
    }

    // æ³¨å†Œçš„æ–¹æ³•
    async function regist(){
        // æ ¡éªŒæ‰€æœ‰çš„è¾“å…¥æ¡†æ˜¯å¦åˆæ³•
        let flag1 =await checkUsername()
        let flag2 =await checkUserPwd()
        let flag3 =await checkReUserPwd()
        if(flag1 && flag2 && flag3){
          let  {data}= await request.post("user/regist",registUser)
          if(data.code == 200){
            // æ³¨å†ŒæˆåŠŸè·³è½¬ ç™»å½•é¡µ
            alert("æ³¨å†ŒæˆåŠŸ,å¿«å»ç™»å½•å§")
            router.push("/login")
          }else{
            alert("æŠ±æ­‰,ç”¨æˆ·åè¢«æŠ¢æ³¨äº†")
          }
        }else{
            alert("æ ¡éªŒä¸é€šè¿‡,è¯·æ±‚å†æ¬¡æ£€æŸ¥æ•°æ®")
        }
    }

    function clearForm(){
        registUser.username=""
        registUser.userPwd=""
        usernameMsg.value=""
        userPwdMsg.value=""
        reUserPwd.value=""
        reUserPwdMsg.value=""

    }


</script>

<template>
  <div>
    <h3 class="ht">è¯·æ³¨å†Œ</h3>

    <table class="tab" cellspacing="0px">
        <tr class="ltr">
            <td>è¯·è¾“å…¥è´¦å·</td>
            <td>
                <input class="ipt" 
                  id="usernameInput" 
                  type="text" 
                  name="username" 
                  v-model="registUser.username"
                  @blur="checkUsername()">

                <span id="usernameMsg" class="msg" v-text="usernameMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td>è¯·è¾“å…¥å¯†ç </td>
            <td>
                <input class="ipt" 
                id="userPwdInput" 
                type="password" 
                name="userPwd" 
                v-model="registUser.userPwd"
                @blur="checkUserPwd()">
                <span id="userPwdMsg" class="msg" v-text="userPwdMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td>ç¡®è®¤å¯†ç </td>
            <td>
                <input class="ipt" 
                id="reUserPwdInput" 
                type="password" 
                v-model="reUserPwd"
                @blur="checkReUserPwd()">
                <span id="reUserPwdMsg" class="msg" v-text="reUserPwdMsg"></span>
            </td>
        </tr>
        <tr class="ltr">
            <td colspan="2" class="buttonContainer">
                <input class="btn1" type="button" @click="regist()" value="æ³¨å†Œ">
                <input class="btn1" type="button" @click="clearForm()" value="é‡ç½®">
                <router-link to="/login">
                  <button class="btn1">å»ç™»å½•</button>
                </router-link>
            </td>
        </tr>
    </table>
  </div>
</template>
<style scoped>
       .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 500px;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:60px;
            background-color: antiquewhite;

        }
        .msg {
            color: gold;
        }
        .buttonContainer{
            text-align: center;
        }
</style>
```



#### 10.1.3 ç™»å½•é¡µé¢å®Œæˆç™»å½•

``` html
<script setup>
        import {ref,reactive} from 'vue'
        import {useRouter} from 'vue-router'
        const router = useRouter()

        import request  from '../utils/request'

        let loginUser =reactive({
                username:"",
                userPwd:""
        })

       let usernameMsg =ref("")
       let userPwdMsg =ref("")


       function checkUsername(){
            let usernameReg= /^[a-zA-Z0-9]{5,10}$/
            if(!usernameReg.test(loginUser.username)){
                usernameMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }
            usernameMsg.value="OK"
            return true
       }

       function checkUserPwd(){
            let userPwdReg = /^[0-9]{6}$/

            if(!userPwdReg.test(loginUser.userPwd)){
                userPwdMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }

            userPwdMsg.value="OK"
            return true
       }

       async function login(){
            // è¡¨å•æ•°æ®æ ¼å¼éƒ½æ­£ç¡®å†æäº¤
            let flag1 =checkUsername()
            let flag2 =checkUserPwd()
            if(!(flag1 && flag2)){
                return 
            }
           let {data} = await request.post("user/login",loginUser)
           if(data.code == 200 ){
                alert("ç™»å½•æˆåŠŸ")
                // è·³è½¬åˆ°showSchedule
                router.push("/showSchedule")
           } else if( data.code == 503){
                alert("å¯†ç æœ‰è¯¯")

           }else if (data.code == 501 ){
                alert("ç”¨æˆ·åæœ‰è¯¯")
           }else {
                alert("æœªçŸ¥é”™è¯¯")
           }
           
       }


</script>

<template>
  <div>
    <h3 class="ht">è¯·ç™»å½•</h3>
        <table class="tab" cellspacing="0px">
            <tr class="ltr">
                <td>è¯·è¾“å…¥è´¦å·</td>
                <td>
                    <input class="ipt" 
                    type="text" 
                    v-model="loginUser.username"
                    @blur="checkUsername()">
                    <span id="usernameMsg" v-text="usernameMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td>è¯·è¾“å…¥å¯†ç </td>
                <td>
                    <input class="ipt" 
                    type="password" 
                    v-model="loginUser.userPwd"
                    @blur="checkUserPwd()">
                    <span id="userPwdMsg" v-text="userPwdMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td colspan="2" class="buttonContainer">
                    <input class="btn1" type="button" @click="login()" value="ç™»å½•">
                    <input class="btn1" type="button" value="é‡ç½®">
                    <router-link to="/regist">
                      <button class="btn1">å»æ³¨å†Œ</button>
                    </router-link>
                </td>
            </tr>
        </table>
  </div>
</template>

<style scoped>
        .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 500px;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;
        }
        .ipt{
            border: 0px;
            width: 50%;
        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:60px;
            background-color: antiquewhite;
        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }
        .buttonContainer{
            text-align: center;
        }
</style>


```



### 10.2 åç«¯ä»£ç å¤„ç†



#### 10.2.1 æ·»åŠ è·¨åŸŸå¤„ç†å™¨

##### 10.2.1.1 ä»€ä¹ˆæ˜¯è·¨åŸŸ

> åŒæºç­–ç•¥ï¼ˆSameoriginpolicyï¼‰æ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œåˆ™æµè§ˆå™¨çš„æ­£å¸¸åŠŸèƒ½å¯èƒ½éƒ½ä¼šå—åˆ°å½±å“ã€‚å¯ä»¥è¯´Webæ˜¯æ„å»ºåœ¨åŒæºç­–ç•¥åŸºç¡€ä¹‹ä¸Šçš„ï¼Œæµè§ˆå™¨åªæ˜¯é’ˆå¯¹åŒæºç­–ç•¥çš„ä¸€ç§å®ç°ã€‚**`åŒæºç­–ç•¥ä¼šé˜»æ­¢ä¸€ä¸ªåŸŸçš„javascriptè„šæœ¬å’Œå¦å¤–ä¸€ä¸ªåŸŸçš„å†…å®¹è¿›è¡Œäº¤äº’ã€‚æ‰€è°“åŒæºï¼ˆå³æŒ‡åœ¨åŒä¸€ä¸ªåŸŸï¼‰å°±æ˜¯ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„åè®®ï¼ˆprotocolï¼‰ï¼Œä¸»æœºï¼ˆhostï¼‰å’Œç«¯å£å·`**

##### 10.2.1.2ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè·¨åŸŸ

> å‰åç«¯åˆ†ç¦»æ¨¡å¼ä¸‹,å®¢æˆ·ç«¯è¯·æ±‚å‰ç«¯æœåŠ¡å™¨è·å–è§†å›¾èµ„æº,ç„¶åå®¢æˆ·ç«¯è‡ªè¡Œå‘åç«¯æœåŠ¡å™¨è·å–æ•°æ®èµ„æº,å‰ç«¯æœåŠ¡å™¨çš„ åè®®,IPå’Œç«¯å£å’Œåç«¯æœåŠ¡å™¨å¾ˆå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„,è¿™æ ·å°±äº§ç”Ÿäº†è·¨åŸŸ

![1683364198087](https://blog-resources.this0.com/image/202403301653572.png?x-oss-process=style/this0-blog )

##### 10.2.1.3 å¦‚ä½•è§£å†³è·¨åŸŸ

//TODO,ä¸¤ç§è§£å†³è·¨åŸŸçš„æ–¹å¼

å‰ç«¯é¡¹ç›®ä»£ç†æ¨¡å¼&&è·¨åŸŸè¿‡æ»¤å™¨

> å‰ç«¯é¡¹ç›®ä»£ç†æ¨¡å¼å¤„ç†

![1683365066926](https://blog-resources.this0.com/image/202403301653643.png?x-oss-process=style/this0-blog )



> åç«¯è·¨åŸŸè¿‡æ»¤å™¨æ–¹å¼å¤„ç†

![1683364436315](https://blog-resources.this0.com/image/202403301653646.png?x-oss-process=style/this0-blog )

+ CrosFilterè¿‡æ»¤å™¨

``` java
package com.atguigu.schedule.filter;

import com.atguigu.schedule.common.Result;
import com.atguigu.schedule.util.WebUtil;
import jakarta.servlet.*;
import jakarta.servlet.annotation.WebFilter;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

@WebFilter("/*")
public class CrosFilter implements Filter {
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {

        HttpServletRequest request = (HttpServletRequest) servletRequest;
        System.out.println(request.getMethod());
        HttpServletResponse response = (HttpServletResponse) servletResponse;
        response.setHeader("Access-Control-Allow-Origin", "*");
        response.setHeader("Access-Control-Allow-Methods", "POST, GET, PUT,OPTIONS, DELETE, HEAD");
        response.setHeader("Access-Control-Max-Age", "3600");
        response.setHeader("Access-Control-Allow-Headers", "access-control-allow-origin, authority, content-type, version-info, X-Requested-With");
        // å¦‚æœæ˜¯è·¨åŸŸé¢„æ£€è¯·æ±‚,åˆ™ç›´æ¥åœ¨æ­¤å“åº”200ä¸šåŠ¡ç 
        if(request.getMethod().equalsIgnoreCase("OPTIONS")){
            WebUtil.writeJson(response, Result.ok(null));
        }else{
            // éé¢„æ£€è¯·æ±‚,æ”¾è¡Œå³å¯
            filterChain.doFilter(servletRequest, servletResponse);
        }
    }
}

```

+ æœªæ¥æˆ‘ä»¬ä½¿ç”¨æ¡†æ¶,ç›´æ¥ç”¨ä¸€ä¸ª@CrossOrigin å°±å¯ä»¥è§£å†³è·¨åŸŸé—®é¢˜äº†

#### 10.2.2 é‡æ„UserController

``` java
package com.atguigu.schedule.controller;

import com.atguigu.schedule.common.Result;
import com.atguigu.schedule.common.ResultCodeEnum;
import com.atguigu.schedule.pojo.SysUser;
import com.atguigu.schedule.service.SysUserService;
import com.atguigu.schedule.service.impl.SysUserServiceImpl;
import com.atguigu.schedule.util.MD5Util;
import com.atguigu.schedule.util.WebUtil;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

@WebServlet("/user/*")
public class UserController extends BaseController{
    private SysUserService userService =new SysUserServiceImpl();


    /**
     * æ³¨å†Œæ—¶æ ¡éªŒç”¨æˆ·åæ˜¯å¦è¢«å ç”¨çš„ä¸šåŠ¡æ¥å£
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void checkUsernameUsed(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        String username = req.getParameter("username");
        SysUser registUser = userService.findByUsername(username);

        //å°è£…ç»“æœå¯¹è±¡
        Result result=null;
        if(null ==registUser){
            // æœªå ç”¨,åˆ›å»ºä¸€ä¸ªcodeä¸º200çš„å¯¹è±¡
            result= Result.ok(null);
        }else{
            // å ç”¨, åˆ›å»ºä¸€ä¸ªç»“æœä¸º505çš„å¯¹è±¡
            result= Result.build(null, ResultCodeEnum.USERNAME_USED);

        }
        // å°†resultå¯¹è±¡è½¬æ¢æˆJSONå¹¶å“åº”ç»™å®¢æˆ·ç«¯
        WebUtil.writeJson(resp,result);

    }

    /**
     * ç”¨æˆ·æ³¨å†Œçš„ä¸šåŠ¡æ¥å£
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void regist(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // æ¥æ”¶è¦æ³¨å†Œçš„ç”¨æˆ·ä¿¡æ¯
        SysUser registUser = WebUtil.readJson(req, SysUser.class);
        // è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•,å°†ç”¨æˆ·æ³¨å†Œè¿›å…¥æ•°æ®åº“
        int rows =userService.regist(registUser);
        Result result =null;
        if(rows>0){
           result=Result.ok(null);
        }else{
           result =Result.build(null,ResultCodeEnum.USERNAME_USED);
        }
        WebUtil.writeJson(resp,result);
    }

    /**
     * ç”¨æˆ·ç™»å½•çš„ä¸šåŠ¡æ¥å£
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void login(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        // æ¥æ”¶ç”¨æˆ·è¯·æ±‚å‚æ•°
        // è·å–è¦ç™»å½•çš„ç”¨æˆ·åå¯†ç 
        SysUser inputUser = WebUtil.readJson(req, SysUser.class);
        // è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•,æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªç”¨æˆ·
        SysUser loginUser =userService.findByUsername(inputUser.getUsername());

        Result result = null;

        if(null == loginUser){
            // æ²¡æœ‰æ ¹æ®ç”¨æˆ·åæ‰¾åˆ°ç”¨æˆ·,è¯´æ˜ç”¨æˆ·åæœ‰è¯¯
            result=Result.build(null,ResultCodeEnum.USERNAME_ERROR);
        }else if(! loginUser.getUserPwd().equals(MD5Util.encrypt(inputUser.getUserPwd()))){
            // ç”¨æˆ·å¯†ç æœ‰è¯¯,
           result=Result.build(null,ResultCodeEnum.PASSWORD_ERROR);
        }else{
            // ç™»å½•æˆåŠŸ
            result=Result.ok(null);
        }

        WebUtil.writeJson(resp,result);

    }
}

```





#### 10.2.3 åˆ é™¤ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨

+ è¿™é‡Œä¸ä½¿ç”¨cookieå’Œsessionæ–¹å¼è®°å½•ç”¨æˆ·çŠ¶æ€,æœªæ¥ä½¿ç”¨token,æ‰€ä»¥ç™»å½•è¿‡æ»¤å™¨åˆ é™¤å³å¯

## åä¸€ã€Vue3çŠ¶æ€ç®¡ç†Pinia

### 11.1 Piniaä»‹ç»

//TODO,ä¸æ­¢ä¼ å‚çš„åŠŸèƒ½ï¼ŒPiniaæ²¡çœ‹

> å¦‚ä½•å®ç°å¤šä¸ªç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’?

+ æ–¹å¼1 ç»„ä»¶ä¼ å‚   

+ æ–¹å¼2 è·¯ç”±ä¼ å‚  

+ æ–¹å¼3 é€šè¿‡piniaçŠ¶æ€ç®¡ç†å®šä¹‰å…±äº«æ•°æ®

> å½“æˆ‘ä»¬æœ‰`å¤šä¸ªç»„ä»¶å…±äº«ä¸€ä¸ªå…±åŒçš„çŠ¶æ€(æ•°æ®æº)`æ—¶ï¼Œå¤šä¸ªè§†å›¾å¯èƒ½éƒ½ä¾èµ–äºåŒä¸€ä»½çŠ¶æ€ã€‚æ¥è‡ªä¸åŒè§†å›¾çš„äº¤äº’ä¹Ÿå¯èƒ½éœ€è¦æ›´æ”¹åŒä¸€ä»½çŠ¶æ€ã€‚è™½ç„¶æˆ‘ä»¬çš„æ‰‹åŠ¨çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ˆprops,ç»„ä»¶é—´é€šä¿¡,æ¨¡å—åŒ–ï¼‰åœ¨ç®€å•çš„åœºæ™¯ä¸­å·²ç»è¶³å¤Ÿäº†ï¼Œä½†æ˜¯åœ¨å¤§è§„æ¨¡çš„ç”Ÿäº§åº”ç”¨ä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–äº‹é¡¹éœ€è¦è€ƒè™‘ï¼š

-   æ›´å¼ºçš„å›¢é˜Ÿåä½œçº¦å®š
-   ä¸ Vue DevTools é›†æˆï¼ŒåŒ…æ‹¬æ—¶é—´è½´ã€ç»„ä»¶å†…éƒ¨å®¡æŸ¥å’Œæ—¶é—´æ—…è¡Œè°ƒè¯•
-   æ¨¡å—çƒ­æ›´æ–° (HMR)
-   æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ

>  [Pinia](https://pinia.vuejs.org/zh/ "Pinia") å°±æ˜¯ä¸€ä¸ªå®ç°äº†ä¸Šè¿°éœ€æ±‚çš„çŠ¶æ€ç®¡ç†åº“ï¼Œç”± Vue æ ¸å¿ƒå›¢é˜Ÿç»´æŠ¤ï¼Œå¯¹ Vue 2 å’Œ Vue 3 éƒ½å¯ç”¨ã€‚https://pinia.vuejs.org/zh/introduction.html

### 11.2 PiniaåŸºæœ¬ç”¨æ³•

>  1 å‡†å¤‡viteé¡¹ç›®

```javascript
npm create vite
npm install 
npm install vue-router@4 --save
```

>  2 å®‰è£…pinia

```javascript
npm install pinia
```

> 3 å®šä¹‰pinia storeå¯¹è±¡ src/store/store.js \[æ¨èè¿™ä¹ˆå‘½åä¸æ˜¯å¼ºåˆ¶]

```javascript
import {defineStore } from 'pinia'

//å®šä¹‰æ•°æ®å¹¶ä¸”å¯¹å¤–æš´éœ²
// storeå°±æ˜¯å®šä¹‰å…±äº«çŠ¶æ€çš„åŒ…è£…å¯¹è±¡
// å†…éƒ¨åŒ…å«å››ä¸ªå±æ€§ï¼š id å”¯ä¸€æ ‡è¯† state å®Œæ•´ç±»å‹æ¨ç†ï¼Œæ¨èä½¿ç”¨ç®­å¤´å‡½æ•° å­˜æ”¾çš„æ•°æ® getters ç±»ä¼¼å±æ€§è®¡ç®—ï¼Œå­˜å‚¨æ”¾å¯¹æ•°æ®
// æ“ä½œçš„æ–¹æ³•  actions å­˜å‚¨æ•°æ®çš„å¤æ‚ä¸šåŠ¡é€»è¾‘æ–¹æ³•
// ç†è§£ï¼š storeç±»ä¼¼Javaä¸­çš„å®ä½“ç±»ï¼Œ idå°±æ˜¯ç±»åï¼Œ state å°±æ˜¯è£…æ•°æ®å€¼çš„å±æ€§  getterså°±æ˜¯getæ–¹æ³•ï¼Œactionså°±æ˜¯å¯¹æ•°æ®æ“ä½œçš„å…¶ä»–æ–¹æ³•
export const definedPerson = defineStore(
    {
        id: 'personPinia', //å¿…é¡»å”¯ä¸€
        state:()=>{ // stateä¸­ç”¨äºå®šä¹‰æ•°æ®
            return {
                username:'å¼ ä¸‰',
                age:0,
                hobbies:['å”±æ­Œ','è·³èˆ']
            }
        },
        getters:{// ç”¨äºå®šä¹‰ä¸€äº›é€šè¿‡æ•°æ®è®¡ç®—è€Œå¾—åˆ°ç»“æœçš„ä¸€äº›æ–¹æ³• ä¸€èˆ¬åœ¨æ­¤å¤„ä¸åšå¯¹æ•°æ®çš„ä¿®æ”¹æ“ä½œ
                 // gettersä¸­çš„æ–¹æ³•å¯ä»¥å½“åšå±æ€§å€¼æ–¹å¼ä½¿ç”¨
            getHobbiesCount(){
                return this.hobbies.length
            },
            getAge(){
                return this.age
            }
        },
        actions:{ // ç”¨äºå®šä¹‰ä¸€äº›å¯¹æ•°æ®ä¿®æ”¹çš„æ–¹æ³•
            doubleAge(){
                this.age=this.age*2
            }
        }
    }
)
```

>  4 åœ¨main.jsé…ç½®piniaç»„ä»¶åˆ°vueä¸­ 

```javascript
import { createApp } from 'vue'
import App from './App.vue'
import router from './routers/router.js'
// å¯¼pinia
import { createPinia } from 'pinia'
// åˆ›å»ºpiniaå¯¹è±¡
let pinia= createPinia()

let app =createApp(App)
app.use(router)
// appä¸­ä½¿ç”¨piniaåŠŸèƒ½
app.use(pinia) 
app.mount('#app')
```

> 5 Operate.vue ä¸­æ“ä½œPiniaæ•°æ®

```html
<script setup type="module">
    import { ref} from 'vue';
    import { definedPerson} from '../store/store';
    // è¯»å–å­˜å‚¨çš„æ•°æ®
    let person= definedPerson()

    let hobby = ref('')
   
</script>

<template>
    <div>
        <h1>operateè§†å›¾,ç”¨æˆ·æ“ä½œPiniaä¸­çš„æ•°æ®</h1>
        è¯·è¾“å…¥å§“å:<input type="text" v-model="person.username"> <br>
        è¯·è¾“å…¥å¹´é¾„:<input type="text" v-model="person.age"> <br>
        è¯·å¢åŠ çˆ±å¥½:
        <input type="checkbox" value="åƒé¥­"  v-model="person.hobbies"> åƒé¥­
        <input type="checkbox" value="ç¡è§‰"  v-model="person.hobbies"> ç¡è§‰
        <input type="checkbox" value="æ‰“è±†è±†"  v-model="person.hobbies"> æ‰“è±†è±† <br>
        
        <!-- äº‹ä»¶ä¸­è°ƒç”¨personçš„doubleAge()æ–¹æ³• -->
        <button @click="person.doubleAge()">å¹´é¾„åŠ å€</button> <br>
        <!-- äº‹ä»¶ä¸­è°ƒç”¨piniaæä¾›çš„$reset()æ–¹æ³•æ¢å¤æ•°æ®çš„é»˜è®¤å€¼ -->
        <button @click="person.$reset()">æ¢å¤é»˜è®¤å€¼</button> <br>
        <!-- äº‹ä»¶ä¸­è°ƒç”¨$patchæ–¹æ³•ä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªå±æ€§å€¼ -->
        <button @click="person.$patch({username:'å¥¥ç‰¹æ›¼',age:100,hobbies:['æ™’å¤ªé˜³','æ‰“æ€ªå…½']})">å˜èº«å¥¥ç‰¹æ›¼</button> <br>
		æ˜¾ç¤ºpiniaä¸­çš„personæ•°æ®:{{person}}
    </div>
</template>
<style scoped>
</style>
```

> 6 List.vueä¸­å±•ç¤ºPiniaæ•°æ®

``` html
<script setup type="module">
    import { definedPerson} from '../store/store';
    // è¯»å–å­˜å‚¨çš„æ•°æ®
    let person= definedPerson()
</script>

<template>
    <div>
        <h1>Listé¡µé¢,å±•ç¤ºPiniaä¸­çš„æ•°æ®</h1>
        è¯»å–å§“å:{{person.username}} <br>
        è¯»å–å¹´é¾„:{{person.age}} <br>
        é€šè¿‡getå¹´é¾„:{{person.getAge}} <br>
        çˆ±å¥½æ•°é‡:{{person.getHobbiesCount}} <br>
        æ‰€æœ‰çš„çˆ±å¥½:
        <ul>
            <li v-for='(hobby,index) in person.hobbies' :key="index" v-text="hobby"></li>
        </ul>
    </div>
</template>

<style scoped>
</style>

```

> 7 å®šä¹‰ç»„ä»¶è·¯ç”±router.js

``` javascript
// å¯¼å…¥è·¯ç”±åˆ›å»ºçš„ç›¸å…³æ–¹æ³•
import {createRouter,createWebHashHistory} from 'vue-router'

// å¯¼å…¥vueç»„ä»¶
import List  from '../components/List.vue'
import Operate  from '../components/Operate.vue'
// åˆ›å»ºè·¯ç”±å¯¹è±¡,å£°æ˜è·¯ç”±è§„åˆ™
const router = createRouter({
    history: createWebHashHistory(),
    routes:[
        {
            path:'/opearte',
            component:Operate
        },
        
        {
            path:'/list',
            component:List
        },
    ]

})

// å¯¹å¤–æš´éœ²è·¯ç”±å¯¹è±¡
export default router;
```

> 8 App.vueä¸­é€šè¿‡è·¯ç”±åˆ‡æ¢ç»„ä»¶

``` html
<script setup type="module">

  
</script>

<template>
    <div>
      <hr>
      <router-link to="/opearte">æ˜¾ç¤ºæ“ä½œé¡µ</router-link> <br>
      <router-link to="/list">æ˜¾ç¤ºå±•ç¤ºé¡µ</router-link> <br>
      <hr>
      <router-view></router-view>
    </div>
</template>

<style scoped>
</style>
```

>  9 å¯åŠ¨æµ‹è¯•

```javascript
npm run dev
```

### 11.3 Piniaå…¶ä»–ç»†èŠ‚

>  State (çŠ¶æ€) åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œstate éƒ½æ˜¯ä½ çš„ store çš„æ ¸å¿ƒã€‚äººä»¬é€šå¸¸ä¼šå…ˆå®šä¹‰èƒ½ä»£è¡¨ä»–ä»¬ APP çš„ stateã€‚åœ¨ Pinia ä¸­ï¼Œstate è¢«å®šä¹‰ä¸ºä¸€ä¸ªè¿”å›åˆå§‹çŠ¶æ€çš„å‡½æ•°ã€‚

+ store.js

```javascript
import {defineStore} from 'pinia'

export const definedPerson = defineStore('personPinia',
    {
        state:()=>{
            return {
                username:'',
                age:0,
                hobbies:['å”±æ­Œ','è·³èˆ']
            }
        },
        getters:{
            getHobbiesCount(){
                return this.hobbies.length
            },
            getAge(){
                return this.age
            }
        },
        actions:{
            doubleAge(){
                this.age=this.age*2
            }
        }
    }
)
```

+ Operate.vue

``` html
<script setup type="module">
    import { ref} from 'vue';
    import { definedPerson} from '../store/store';
    // è¯»å–å­˜å‚¨çš„æ•°æ®
    let person= definedPerson()

    let hobby = ref('')
    let addHobby= ()=> {
        console.log(hobby.value)
        person.hobbies.push(hobby.value)
    }
    // ç›‘å¬çŠ¶æ€
    person.$subscribe((mutation,state)=>{
        console.log('---subscribe---')
        /* 
        mutation.storeId
            person.$idä¸€æ ·
        mutation.payload
            ä¼ é€’ç»™ cartStore.$patch() çš„è¡¥ä¸å¯¹è±¡ã€‚
        state æ•°æ®çŠ¶æ€,å…¶å®æ˜¯ä¸€ä¸ªä»£ç†
        */
        console.log(mutation)
        console.log(mutation.type)
        console.log(mutation.payload)
        console.log(mutation.storeId)
        console.log(person.$id)
        // æ•°æ® å…¶å®æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡
        console.log(state)
    })


</script>

<template>
    <div>
        <h1>operateè§†å›¾,ç”¨æˆ·æ“ä½œPiniaä¸­çš„æ•°æ®</h1>
        è¯·è¾“å…¥å§“å:<input type="text" v-model="person.username"> <br>
        è¯·è¾“å…¥å¹´é¾„:<input type="text" v-model="person.age"> <br>
        è¯·å¢åŠ çˆ±å¥½:
        <input type="checkbox" value="åƒé¥­"  v-model="person.hobbies"> åƒé¥­
        <input type="checkbox" value="ç¡è§‰"  v-model="person.hobbies"> ç¡è§‰
        <input type="checkbox" value="æ‰“è±†è±†"  v-model="person.hobbies"> æ‰“è±†è±† <br>
        <input type="text" @change="addHobby" v-model="hobby"> <br>  
        <!-- äº‹ä»¶ä¸­è°ƒç”¨personçš„doubleAge()æ–¹æ³• -->
        <button @click="person.doubleAge()">å¹´é¾„åŠ å€</button> <br>
        <!-- äº‹ä»¶ä¸­è°ƒç”¨piniaæä¾›çš„$reset()æ–¹æ³•æ¢å¤æ•°æ®çš„é»˜è®¤å€¼ -->
        <button @click="person.$reset()">æ¢å¤é»˜è®¤å€¼</button> <br>
        <!-- äº‹ä»¶ä¸­è°ƒç”¨$patchæ–¹æ³•ä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªå±æ€§å€¼ -->
        <button @click="person.$patch({username:'å¥¥ç‰¹æ›¼',age:100,hobbies:['æ™’å¤ªé˜³','æ‰“æ€ªå…½']})">å˜èº«å¥¥ç‰¹æ›¼</button> <br>
		person:{{person}}
    </div>
</template>
<style scoped>
</style>

```

>  2 Getter å®Œå…¨ç­‰åŒäº store çš„ state çš„[è®¡ç®—å€¼](https://cn.vuejs.org/guide/essentials/computed.html "è®¡ç®—å€¼")ã€‚å¯ä»¥é€šè¿‡ `defineStore()` ä¸­çš„ `getters` å±æ€§æ¥å®šä¹‰å®ƒä»¬ã€‚**æ¨è**ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå¹¶ä¸”å®ƒå°†æ¥æ”¶ `state` ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼š

```javascript
export const useStore = defineStore('main', {
  state: () => ({
    count: 0,
  }),
  getters: {
    doubleCount: (state) => state.count * 2,
  },
})
```

>  3  Action ç›¸å½“äºç»„ä»¶ä¸­çš„ [method](https://v3.vuejs.org/guide/data-methods.html#methods "method")ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡ `defineStore()` ä¸­çš„ `actions` å±æ€§æ¥å®šä¹‰ï¼Œ**å¹¶ä¸”å®ƒä»¬ä¹Ÿæ˜¯å®šä¹‰ä¸šåŠ¡é€»è¾‘çš„å®Œç¾é€‰æ‹©ã€‚**ç±»ä¼¼ [getter](https://pinia.vuejs.org/zh/core-concepts/getters.html "getter")ï¼Œaction ä¹Ÿå¯é€šè¿‡ `this` è®¿é—®**æ•´ä¸ª store å®ä¾‹**ï¼Œå¹¶æ”¯æŒ**å®Œæ•´çš„ç±»å‹æ ‡æ³¨(ä»¥åŠè‡ªåŠ¨è¡¥å…¨)**ã€‚ä¸åŒçš„æ˜¯ï¼Œ`action` å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œä½ å¯ä»¥åœ¨å®ƒä»¬é‡Œé¢ `await` è°ƒç”¨ä»»ä½• APIï¼Œä»¥åŠå…¶ä»– actionï¼

```javascript
export const useCounterStore = defineStore('main', {
  state: () => ({
    count: 0,
  }),
  actions: {
    increment() {
      this.count++
    },
    randomizeCounter() {
      this.count = Math.round(100 * Math.random())
    },
  },
})
```

## åäºŒã€æ¡ˆä¾‹å¼€å‘-æ—¥ç¨‹ç®¡ç†-ç¬¬ä¸ƒæœŸ

### 12.1 å‰ç«¯ä½¿ç”¨piniaå­˜å‚¨æ•°æ®

+ å®‰è£…piniaä¾èµ–

``` shell
npm install pinia
```

+ srcä¸‹åˆ›å»ºpinia.jsæ–‡ä»¶

``` javascript
// å¯¼å…¥piniaç»„ä»¶
import {createPinia} from 'pinia'
// åˆ›å»ºpiniaå¯¹è±¡
let pinia = createPinia()
// å¯¼å‡ºé»˜è®¤çš„pinia
export default pinia
```

+ main.jsä¸­ä½¿ç”¨pinia

``` js
import { createApp } from 'vue'
import App from './App.vue'
// å¯¼å…¥è·¯ç”±
import router from './router/router.js'
// å¯¼å…¥piniaå¯¹è±¡
import pinia from './pinia.js'
let app =createApp(App)
// å…¨å±€ä½¿ç”¨è·¯ç”±
app.use(router)
// å…¨å±€ä½¿ç”¨pinia
app.use(pinia)
app.mount('#app')
```

+ src/store/userStore.js ç”¨äºå­˜å‚¨ç”¨æˆ·ä¿¡æ¯

``` javascript
import {defineStore} from 'pinia'

export const defineUser = defineStore('loginUser',{
    state:()=>{
        return {
            uid:0,
            username:''
        }
    },
    getters :{
       
    }

})
```

+ src/store/scheduleStore.js ç”¨äºå­˜å‚¨ç”¨æˆ·çš„æ—¥ç¨‹ä¿¡æ¯

``` javaScript
import {defineStore} from 'pinia'

export const defineSchedule = defineStore('scheduleList',{
    state:()=>{
        return {
            itemList:[
                /*{
                    sid:1,
                    uid:1,
                    title:'å­¦java',
                    completed:1
                },
                {
                    sid:2,
                    uid:1,
                    title:'å­¦å‰ç«¯',
                    completed:0
                }*/
            ]
        }
    },
    getters :{
       
    },
    actions:{

    }

})
```

+ Header.vueä¸­,é€šè¿‡piniaçš„æ•°æ®æ¥åˆ¤æ–­å±•ç¤ºä½•ç§æç¤º è§†å›¾

``` html
<script setup>
    /* å¯¼å…¥piniaä¸­çš„useræ•°æ® */
    import {defineUser} from '../store/userStore.js'
    import {defineSchedule} from '../store/scheduleStore.js'
    let sysUser =defineUser()
    let schedule = defineSchedule();

    /* å¯¼å…¥ç¼–ç¨‹å¼è·¯ç”± */
    import {useRouter} from 'vue-router'
    let  router =useRouter()
    /* é€€å‡ºç™»å½•æ¥å£ */
    function logout(){
      // æ¸…é™¤userPina å’Œschedulepinia
      sysUser.$reset()
      schedule.$reset()
      // é€šè¿‡è·¯ç”±å›åˆ°ç™»å½•é¡µ
      router.push("/login")
    }



</script>

<template>
  <div>
    <h1 class="ht">æ¬¢è¿ä½¿ç”¨æ—¥ç¨‹ç®¡ç†ç³»ç»Ÿ</h1>
    <div>
      <div  class="optionDiv" v-if="sysUser.username == ''">
        <router-link to="/login">
          <button class="b1s">ç™»å½•</button>
        </router-link>   
        <router-link to="/regist">
          <button class="b1s">æ³¨å†Œ</button>
        </router-link>
      </div>


      <div   class="optionDiv" v-else>
        æ¬¢è¿{{sysUser.username}}   
        <button class="b1b" @click="logout()">é€€å‡ºç™»å½•</button> 
        <router-link to="/showSchedule">
          <button class="b1b">æŸ¥çœ‹æˆ‘çš„æ—¥ç¨‹</button>
        </router-link>
      </div>

      <br>
    </div>
  </div>
</template>

<style scoped>

  .ht{
      text-align: center;
      color: cadetblue;
      font-family: å¹¼åœ†;
  }
  .b1s{
        border: 2px solid powderblue;
        border-radius: 4px;
        width:60px;
        background-color: antiquewhite;

    }

    .b1b{
        border: 2px solid powderblue;
        border-radius: 4px;
        width:100px;
        background-color: antiquewhite;
    }
    .optionDiv{
      width: 500px;
      float: right;
    }
</style>


```

+ Login.vueä¸­,ç™»å½•æˆåŠŸå,æ¥æ”¶åç«¯å“åº”å›æ¥çš„ç”¨æˆ·idå’Œç”¨æˆ·å,å­˜å‚¨äºuserStoreä¸­

```  html
<script setup>
        /* å¯¼å…¥piniaä¸­çš„useræ•°æ® */
        import {defineUser} from '../store/userStore.js'
        let sysUser =defineUser()
        /* è·å– ç¼–ç¨‹å¼è·¯ç”±å¯¹è±¡ */
        import {useRouter} from 'vue-router'
        let router =useRouter();
        /* å¯¼å…¥axiosè¯·æ±‚å¯¹è±¡ */
        import request from '../utils/request.js'

       // å¯¼å…¥ref,reactiveå¤„ç†å“åº”å¼æ•°æ®çš„æ–¹æ³•
       import{ ref,reactive} from 'vue'
       // å“åº”å¼æ•°æ®,ä¿å­˜ç”¨æˆ·è¾“å…¥çš„è¡¨å•ä¿¡æ¯
       let loginUser =reactive({
        username:'',
        userPwd:''
       })

       // å“åº”å¼æ•°æ®,ä¿å­˜æ ¡éªŒçš„æç¤ºä¿¡æ¯
       let usernameMsg =ref('')
       let userPwdMsg = ref('')

        // æ ¡éªŒç”¨æˆ·åçš„æ–¹æ³•
        function checkUsername(){
            // å®šä¹‰æ­£åˆ™
            var usernameReg=/^[a-zA-Z0-9]{5,10}$/
            // æ ¡éªŒç”¨æˆ·å
            if(!usernameReg.test(loginUser.username)){
                // æ ¼å¼ä¸åˆæ³•
                usernameMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }
            usernameMsg.value="ok"
            return true
        }
        // æ ¡éªŒå¯†ç çš„æ–¹æ³•
        function checkUserPwd(){
            // å®šä¹‰æ­£åˆ™
            var passwordReg=/^[0-9]{6}$/
             // æ ¡éªŒå¯†ç 
             if(!passwordReg.test(loginUser.userPwd)){
                // æ ¼å¼ä¸åˆæ³•
                userPwdMsg.value="æ ¼å¼æœ‰è¯¯"
                return false
            }
            userPwdMsg.value="ok"
            return true
        }


        // ç™»å½•çš„å‡½æ•°
        async function  login(){
            console.log("å‘é€å¼‚æ­¥è¯·æ±‚")
            let {data} = await request.post("/user/login",loginUser)
            if(data.code == 200){
                alert("ç™»å½•æˆåŠŸ")
                // æ›´æ–°piniaæ•°æ®
                sysUser.uid =data.data.loginUser.uid
                sysUser.username =data.data.loginUser.username
                // è·³è½¬åˆ°æ—¥ç¨‹æŸ¥è¯¢é¡µ
                router.push("/showSchedule")
                
            }else if(data.code == 501){
                alert("ç”¨æˆ·åæœ‰è¯¯,è¯·é‡æ–°è¾“å…¥")
            }else if(data.code == 503){
                alert("å¯†ç æœ‰è¯¯,è¯·é‡æ–°è¾“å…¥")
            }else {
                alert("å‡ºç°æœªçŸ¥åé”™è¯¯")
            }
        }
        // æ¸…é™¤è¡¨å•ä¿¡æ¯çš„æ–¹æ³•
        function clearForm(){
            loginUser.username=''
            loginUser.userPwd=''
            usernameMsg.value=''
            userPwdMsg.value=''
        }
</script>

<template>
  <div>
    <h3 class="ht">è¯·ç™»å½•</h3>
        <table class="tab" cellspacing="0px">
            <tr class="ltr">
                <td>è¯·è¾“å…¥è´¦å·</td>
                <td>
                    <input class="ipt" 
                    type="text" 
                    v-model="loginUser.username"
                    @blur="checkUsername()">
                    <span id="usernameMsg" v-text="usernameMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td>è¯·è¾“å…¥å¯†ç </td>
                <td>
                    <input class="ipt" 
                    type="password" 
                    v-model="loginUser.userPwd"
                    @blur="checkUserPwd()">
                    <span id="userPwdMsg" v-text="userPwdMsg"></span>
                </td>
            </tr>
            <tr class="ltr">
                <td colspan="2" class="buttonContainer">
                    <input class="btn1" type="button" @click="login()" value="ç™»å½•">
                    <input class="btn1" type="button" @click="clearForm()" value="é‡ç½®">
                    <router-link to="/regist">
                      <button class="btn1">å»æ³¨å†Œ</button>
                    </router-link>
                </td>
            </tr>
        </table>
  </div>
</template>

<style scoped>
        .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 500px;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;
        }
        .ipt{
            border: 0px;
            width: 50%;
        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:60px;
            background-color: antiquewhite;
        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }
        .buttonContainer{
            text-align: center;
        }
</style>


```

+ æœåŠ¡ç«¯ç™»å½•å¤„ç†æ–¹æ³•,ç™»å½•æˆåŠŸ,è¿”å›ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯

``` java
 /**
     * ç”¨æˆ·ç™»å½•çš„ä¸šåŠ¡æ¥å£
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void login(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        // æ¥æ”¶ç”¨æˆ·è¯·æ±‚å‚æ•°
        // è·å–è¦ç™»å½•çš„ç”¨æˆ·åå¯†ç 
        SysUser inputUser = WebUtil.readJson(req, SysUser.class);
        // è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•,æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªç”¨æˆ·
        SysUser loginUser =userService.findByUsername(inputUser.getUsername());

        Result result = null;

        if(null == loginUser){
            // æ²¡æœ‰æ ¹æ®ç”¨æˆ·åæ‰¾åˆ°ç”¨æˆ·,è¯´æ˜ç”¨æˆ·åæœ‰è¯¯
            result=Result.build(null,ResultCodeEnum.USERNAME_ERROR);
        }else if(! loginUser.getUserPwd().equals(MD5Util.encrypt(inputUser.getUserPwd()))){
            // ç”¨æˆ·å¯†ç æœ‰è¯¯,
           result=Result.build(null,ResultCodeEnum.PASSWORD_ERROR);
        }else{
            // ç™»å½•æˆåŠŸ,å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥session
            req.getSession().setAttribute("sysUser",loginUser);
            // ç™»å½•æˆåŠŸ
            // å°†å¯†ç è¯·ç©ºå,å°†ç”¨æˆ·ä¿¡æ¯å“åº”ç»™å®¢æˆ·ç«¯
            loginUser.setUserPwd("");
            Map<String,Object> data =new HashMap<>();
            data.put("loginUser",loginUser);
            result=Result.ok(data);
        }

        WebUtil.writeJson(resp,result);

    }
```

+ router.jsä¸­,é€šè¿‡è·¯ç”±å®ˆå«æ§åˆ¶åªæœ‰ç™»å½•çŠ¶æ€ä¸‹æ‰å¯ä»¥è¿›å…¥showSchedule.vue

``` javascript
import {createRouter,createWebHashHistory} from 'vue-router'


import pinia from '../pinia.js'
import {defineUser} from '../store/userStore.js'

let sysUser = defineUser(pinia)

import Login from '../components/Login.vue'
import Regist from '../components/Regist.vue'
import ShowScedule from '../components/ShowSchedule.vue'

let  router = createRouter({
    history:createWebHashHistory(),
    routes:[
        {
            path:"/",
            component:Login
        },
        {
            path:"/login",
            component:Login
        },
        {
            path:"/showSchedule",
            component:ShowScedule
        },
        {
            path:"/regist",
            component:Regist
        }
    ]
})
/* é…ç½®è·¯ç”±çš„å‰ç½®å®ˆå«,åœ¨ç™»å½•çŠ¶æ€ä¸‹æ‰å¯ä»¥èŒƒæ–‡showSchedule.vue */
router.beforeEach( (to,from,next) =>{
    // å¦‚æœæ˜¯æŸ¥çœ‹æ—¥ç¨‹
    if(to.path=="/showSchedule"){
        // å¦‚æœå°šæœªçš„ç™»å½•
        if(sysUser.username == ''){
            alert("æ‚¨å°šæœªç™»å½•,è¯·ç™»å½•åå†æŸ¥çœ‹æ—¥ç¨‹")
            next("/login")
        }else{
            // å·²ç»ç™»å½• æ”¾è¡Œ
            next()
        }
        // å…¶ä»–èµ„æº æ”¾è¡Œ
    }else{
        next()
    }
})
export default router
```



### 12.2 æ˜¾ç¤ºæ‰€æœ‰æ—¥ç¨‹æ•°æ®

+ ShowSchedule.vueä¸­å‘åç«¯å‘é€å¼‚æ­¥è¯·æ±‚æŸ¥è¯¢æ•°æ®å¹¶å±•ç¤º

``` html
<script setup>
    /* å¼•å…¥axios */
    import request from '../utils/request.js'
    /* å¼•å…¥piniaæ•°æ® */
    import {defineSchedule} from '../store/scheduleStore.js'
    import {defineUser} from '../store/userStore.js'
    let schedule = defineSchedule();
    let sysUser = defineUser()
    /* å¼•å…¥æŒ‚è½½ç”Ÿå‘½å‘¨æœŸ */
    import { onMounted,onUpdated,ref,reactive } from 'vue';
    
    // ç¬¬ä¸€æ¬¡æŒ‚è½½å°±ç«‹åˆ»å‘åç«¯å‘é€è¯·æ±‚,è·å–æœ€æ–°æ•°æ®
    onMounted(async function (){
        showSchedule()
    })
    async function showSchedule(){
        let {data} = await request.get("/schedule/findAllSchedule",{params:{"uid":sysUser.uid}})
        schedule.itemList =data.data.itemList
    }


</script>

<template>
  <div>
    <h3 class="ht">æ‚¨çš„æ—¥ç¨‹å¦‚ä¸‹</h3>
<table class="tab" cellspacing="0px">
    <tr class="ltr">
        <th>ç¼–å·</th>
        <th>å†…å®¹</th>
        <th>è¿›åº¦</th>
        <th>æ“ä½œ</th>
    </tr>
    <tr class="ltr" v-for="item,index in schedule.itemList" :key="index">
        <td v-text="index+1">
        </td>
        <td>
            <input type="input" v-model="item.title">
        </td>
        <td>
            <input type="radio"   value="1" v-model="item.completed"> å·²å®Œæˆ
            <input type="radio"   value="0" v-model="item.completed"> æœªå®Œæˆ
        </td>
        <td class="buttonContainer">
             <button class="btn1">åˆ é™¤</button>
            <button class="btn1">ä¿å­˜ä¿®æ”¹</button>
        </td>
    </tr>
    <tr class="ltr buttonContainer" >
        <td colspan="4">
            <button class="btn1">æ–°å¢æ—¥ç¨‹</button>
        </td>

    </tr>
</table>
{{schedule}}
  </div>
</template>

<style scoped>

      .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 80%;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:100px;
            background-color: antiquewhite;

        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }

        .buttonContainer{
            text-align: center;
        }

</style>

```

+ SysScheduleControllerä¸­æŸ¥è¯¢æ•°æ®å¹¶å“åº”json

```  java
package com.atguigu.schedule.controller;

import com.atguigu.schedule.common.Result;
import com.atguigu.schedule.pojo.SysSchedule;
import com.atguigu.schedule.service.SysScheduleService;
import com.atguigu.schedule.service.impl.SysScheduleServiceImpl;
import com.atguigu.schedule.util.WebUtil;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@WebServlet("/schedule/*")
public class SysScheduleController  extends BaseController{
    private SysScheduleService scheduleService =new SysScheduleServiceImpl();
    /**
     * æŸ¥è¯¢æ‰€æœ‰æ—¥ç¨‹æ¥å£
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void findAllSchedule(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        int uid = Integer.parseInt(req.getParameter("uid"));
        //  è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•,æŸ¥è¯¢æ‰€æœ‰æ—¥ç¨‹
        List<SysSchedule> itemList = scheduleService.findItemListByUid(uid);
        // å°†æ—¥ç¨‹ä¿¡æ¯è£…å…¥result,è½¬æ¢JSONç»™å®¢æˆ·ç«¯
        Map<String,Object> data =new HashMap<>();
        data.put("itemList",itemList);
        WebUtil.writeJson(resp,Result.ok(data));
    }
}

```

+ SysScheduleServiceæ¥å£å’Œå®ç°ç±»ä»£ç 

``` java
package com.atguigu.schedule.service;
import com.atguigu.schedule.pojo.SysSchedule;
import java.util.List;
public interface SysScheduleService {
    List<SysSchedule> findItemListByUid(int uid);
}

// ------------------------------------------------
package com.atguigu.schedule.service.impl;
import com.atguigu.schedule.dao.SysScheduleDao;
import com.atguigu.schedule.dao.impl.SysScheduleDaoImpl;
import com.atguigu.schedule.pojo.SysSchedule;
import com.atguigu.schedule.service.SysScheduleService;
import java.util.List;
public class SysScheduleServiceImpl implements SysScheduleService {
    private SysScheduleDao scheduleDao =new SysScheduleDaoImpl();
    @Override
    public List<SysSchedule> findItemListByUid(int uid) {
        return scheduleDao.findItemListByUid(uid);
    }
}
```

+ SysScheduleDaoæ¥å£å’Œå®ç°ç±»ä»£ç 

``` java
package com.atguigu.schedule.dao;
import com.atguigu.schedule.pojo.SysSchedule;
import java.util.List;
public interface SysScheduleDao {
    List<SysSchedule> findItemListByUid(int uid);
}
//-----------------------------------------------------------
package com.atguigu.schedule.dao.impl;
import com.atguigu.schedule.dao.BaseDao;
import com.atguigu.schedule.dao.SysScheduleDao;
import com.atguigu.schedule.pojo.SysSchedule;
import java.util.List;
public class SysScheduleDaoImpl extends BaseDao implements SysScheduleDao {
    @Override
    public List<SysSchedule> findItemListByUid(int uid) {
        String sql ="select sid,uid,title, completed from sys_schedule  where uid = ? ";
        return baseQuery(SysSchedule.class,sql,uid);
    }
}
```

### 12.3 å¢åŠ å’Œä¿å­˜æ—¥ç¨‹æ•°æ®

+ ShowSchedule.vueä¸‹,ä¸ºå¢åŠ å’Œä¿®æ”¹æŒ‰é’®ç»‘å®šäº‹ä»¶

``` html
<script setup>
    /* å¼•å…¥axios */
    import request from '../utils/request.js'
    /* å¼•å…¥piniaæ•°æ® */
    import {defineSchedule} from '../store/scheduleStore.js'
    import {defineUser} from '../store/userStore.js'
    let schedule = defineSchedule();
    let sysUser = defineUser()
    /* å¼•å…¥æŒ‚è½½ç”Ÿå‘½å‘¨æœŸ */
    import { onMounted,onUpdated,ref,reactive } from 'vue';
    
    // ç¬¬ä¸€æ¬¡æŒ‚è½½å°±ç«‹åˆ»å‘åç«¯å‘é€è¯·æ±‚,è·å–æœ€æ–°æ•°æ®
    onMounted(async function (){
        // åŠ è½½å®Œæ¯•å,ç«‹åˆ»è°ƒç”¨æŸ¥è¯¢æ•°æ®çš„æ–¹æ³•
        showSchedule()
    })
    async function  showSchedule(){
        let {data} = await request.get("/schedule/findAllSchedule",{params:{"uid":sysUser.uid}})
        schedule.itemList =data.data.itemList
    }

    // æ–°å¢æ—¥ç¨‹
    async function addItem(){
        // ç«‹åˆ»å‘åç«¯å‘é€ä¸€ä¸ªè¯·æ±‚,è®©åç«¯å…ˆä¸ºå½“å‰ç”¨æˆ·åœ¨æ•°æ®åº“ä¸­å¢åŠ ä¸€ä¸ªé»˜è®¤æ ¼å¼çš„ç©ºæ•°æ®
        let {data} = await request.get("/schedule/addDefaultSchedule",{params:{"uid":sysUser.uid}})
        if(data.code == 200){
            // ç„¶åè°ƒç”¨åˆ·æ–°é¡µé¢æ•°æ®æ–¹æ³•,ç«‹åˆ»è·å–æœ€æ–°æ•°æ®
            showSchedule()
        }else{
            alert("æ·»åŠ å¼‚å¸¸")
        }
    }

    // æ›´æ–°æ—¥ç¨‹çš„æ–¹æ³•
    async function updateItem(index){
        // æ ¹æ®ç´¢å¼•è·å–å…ƒç´ 
        
        // å°†å…ƒç´ é€šè¿‡ JSONä¸²çš„å½¢å¼ å‘é€ç»™æœåŠ¡ç«¯
        let {data} =await request.post("/schedule/updateSchedule",schedule.itemList[index])
        if(data.code == 200){
            // æœåŠ¡ç«¯ä¿®æ”¹å®Œæ¯•å,åˆ·æ–°é¡µé¢æ•°æ®
            showSchedule()
        }else{
            alert("æ›´æ–°å¼‚å¸¸")
        }

    }


</script>

<template>
  <div>
    <h3 class="ht">æ‚¨çš„æ—¥ç¨‹å¦‚ä¸‹</h3>
<table class="tab" cellspacing="0px">
    <tr class="ltr">
        <th>ç¼–å·</th>
        <th>å†…å®¹</th>
        <th>è¿›åº¦</th>
        <th>æ“ä½œ</th>
    </tr>
    <tr class="ltr" v-for="item,index in schedule.itemList" :key="index">
        <td v-text="index+1">
        </td>
        <td>
            <input type="input" v-model="item.title">
        </td>
        <td>
            <input type="radio"   value="1" v-model="item.completed"> å·²å®Œæˆ
            <input type="radio"   value="0" v-model="item.completed"> æœªå®Œæˆ
        </td>
        <td class="buttonContainer">
             <button class="btn1">åˆ é™¤</button>
            <button class="btn1" @click="updateItem(index)">ä¿å­˜ä¿®æ”¹</button>
        </td>
    </tr>
    <tr class="ltr buttonContainer" >
        <td colspan="4">
            <button class="btn1" @click="addItem()">æ–°å¢æ—¥ç¨‹</button>
        </td>

    </tr>
</table>
{{schedule}}
  </div>
</template>

<style scoped>

      .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 80%;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:100px;
            background-color: antiquewhite;

        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }

        .buttonContainer{
            text-align: center;
        }

</style>

```

+ SysScheduleControllerå¤„ç† æ–°å¢å’Œä¿å­˜ä¿®æ”¹ä¸šåŠ¡å¤„ç†æ¥å£

``` java
package com.atguigu.schedule.controller;

import com.atguigu.schedule.common.Result;
import com.atguigu.schedule.pojo.SysSchedule;
import com.atguigu.schedule.service.SysScheduleService;
import com.atguigu.schedule.service.impl.SysScheduleServiceImpl;
import com.atguigu.schedule.util.WebUtil;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@WebServlet("/schedule/*")
public class SysScheduleController  extends BaseController{

    private SysScheduleService scheduleService =new SysScheduleServiceImpl();
    /**
     * å‘æ•°æ®åº“ä¸­å¢åŠ ä¸€ä¸ªæ–°çš„é»˜è®¤æ•°æ®çš„æ–¹æ³•
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void addDefaultSchedule(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        int uid = Integer.parseInt(req.getParameter("uid"));
        //  è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•,ä¸ºå½“å‰ç”¨æˆ·æ–°å¢ä¸€ä¸ªé»˜è®¤ç©ºæ•°æ®
        scheduleService.addDefault(uid);

        WebUtil.writeJson(resp,Result.ok(null));

    }


    /**
     * æ›´æ–°æ—¥ç¨‹ä¸šåŠ¡æ¥å£
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void updateSchedule(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        SysSchedule sysSchedule = WebUtil.readJson(req, SysSchedule.class);
        // è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•,æ›´æ–°æ•°æ®
        scheduleService.updateSchedule(sysSchedule);

        // å“åº”æˆåŠŸ
        WebUtil.writeJson(resp,Result.ok(null));
    }
}

```

+ SysScheduleServiceæ¥å£å’Œå®ç°ç±»å¤„ç†ä¸šåŠ¡é€»è¾‘

``` java
package com.atguigu.schedule.service;
import com.atguigu.schedule.pojo.SysSchedule;
import java.util.List;
public interface SysScheduleService {
    Integer addDefault(int uid);
    Integer updateSchedule(SysSchedule sysSchedule);
}
// ----------------------------------------------------------
package com.atguigu.schedule.service.impl;

import com.atguigu.schedule.dao.SysScheduleDao;
import com.atguigu.schedule.dao.impl.SysScheduleDaoImpl;
import com.atguigu.schedule.pojo.SysSchedule;
import com.atguigu.schedule.service.SysScheduleService;

import java.util.List;

public class SysScheduleServiceImpl implements SysScheduleService {
    private SysScheduleDao scheduleDao =new SysScheduleDaoImpl();
    @Override
    public Integer addDefault(int uid) {
        return scheduleDao.addDefault(uid);
    }

    @Override
    public Integer updateSchedule(SysSchedule sysSchedule) {
        return scheduleDao.updateSchedule(sysSchedule);
    }
}
```

+ SysScheduleDaoæ¥å£å’Œå®ç°ç±»æ“ä½œæ•°æ®

``` java
package com.atguigu.schedule.dao;

import com.atguigu.schedule.pojo.SysSchedule;

import java.util.List;

public interface SysScheduleDao {
    Integer addDefault(int uid);
    Integer updateSchedule(SysSchedule sysSchedule);
}
//-------------------------------------------------
package com.atguigu.schedule.dao.impl;

import com.atguigu.schedule.dao.BaseDao;
import com.atguigu.schedule.dao.SysScheduleDao;
import com.atguigu.schedule.pojo.SysSchedule;

import java.util.List;
public class SysScheduleDaoImpl extends BaseDao implements SysScheduleDao {
    @Override
    public Integer addDefault(int uid) {
        String sql = "insert into sys_schedule value(default,?,'è¯·è¾“å…¥æ—¥ç¨‹',0)";
        return baseUpdate(sql,uid);
    }

    @Override
    public Integer updateSchedule(SysSchedule sysSchedule) {
        String sql ="update sys_schedule set title = ? ,completed =  ? where sid =?";
        return baseUpdate(sql,sysSchedule.getTitle(),sysSchedule.getCompleted(),sysSchedule.getSid());
    }
}

```

### 12.5 åˆ é™¤æ—¥ç¨‹æ•°æ®

+ ShowSchedule.vueä¸­,ä¸ºåˆ é™¤æŒ‰é’®å¢åŠ äº‹ä»¶

``` html
<script setup>
    /* å¼•å…¥axios */
    import request from '../utils/request.js'
    /* å¼•å…¥piniaæ•°æ® */
    import {defineSchedule} from '../store/scheduleStore.js'
    import {defineUser} from '../store/userStore.js'
    let schedule = defineSchedule();
    let sysUser = defineUser()
    /* å¼•å…¥æŒ‚è½½ç”Ÿå‘½å‘¨æœŸ */
    import { onMounted,onUpdated,ref,reactive } from 'vue';
    
    // ç¬¬ä¸€æ¬¡æŒ‚è½½å°±ç«‹åˆ»å‘åç«¯å‘é€è¯·æ±‚,è·å–æœ€æ–°æ•°æ®
    onMounted(async function (){
        // åŠ è½½å®Œæ¯•å,ç«‹åˆ»è°ƒç”¨æŸ¥è¯¢æ•°æ®çš„æ–¹æ³•
        showSchedule()
    })
    async function  showSchedule(){
        let {data} = await request.get("/schedule/findAllSchedule",{params:{"uid":sysUser.uid}})
        schedule.itemList =data.data.itemList
    }

    // æ–°å¢æ—¥ç¨‹
    async function addItem(){
        // ç«‹åˆ»å‘åç«¯å‘é€ä¸€ä¸ªè¯·æ±‚,è®©åç«¯å…ˆä¸ºå½“å‰ç”¨æˆ·åœ¨æ•°æ®åº“ä¸­å¢åŠ ä¸€ä¸ªé»˜è®¤æ ¼å¼çš„ç©ºæ•°æ®
        let {data} = await request.get("/schedule/addDefaultSchedule",{params:{"uid":sysUser.uid}})
        if(data.code == 200){
            // ç„¶åè°ƒç”¨åˆ·æ–°é¡µé¢æ•°æ®æ–¹æ³•,ç«‹åˆ»è·å–æœ€æ–°æ•°æ®
            showSchedule()
        }else{
            alert("æ·»åŠ å¼‚å¸¸")
        }
    }

    // æ›´æ–°æ—¥ç¨‹çš„æ–¹æ³•
    async function updateItem(index){
        // æ ¹æ®ç´¢å¼•è·å–å…ƒç´ 
        
        // å°†å…ƒç´ é€šè¿‡ JSONä¸²çš„å½¢å¼ å‘é€ç»™æœåŠ¡ç«¯
        let {data} =await request.post("/schedule/updateSchedule",schedule.itemList[index])
        if(data.code = 200){
            // æœåŠ¡ç«¯ä¿®æ”¹å®Œæ¯•å,åˆ·æ–°é¡µé¢æ•°æ®
            showSchedule()
        }else{
            alert("æ›´æ–°å¼‚å¸¸")
        }

    }

    // åˆ é™¤æ—¥ç¨‹çš„æ–¹æ³•
    async function removeItem(index){
        // å¼¹çª—æç¤ºæ˜¯å¦åˆ é™¤
        if(confirm("ç¡®å®šè¦åˆ é™¤è¯¥æ¡æ•°æ®")){
            // æ ¹æ®ç´¢å¼•è·å–è¦åˆ é™¤çš„itemçš„id
            let sid = schedule.itemList[index].sid
            // å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚åˆ é™¤å…ƒç´ 
            let{data} = await request.get("/schedule/removeSchedule",{params:{"sid":sid}})
            //æ ¹æ®ä¸šåŠ¡ç åˆ¤æ–­åˆ é™¤æ˜¯å¦æˆåŠŸ
            if(data.code == 200){
                // åˆ é™¤æˆåŠŸ,æ›´æ–°æ•°æ®
                showSchedule()
            }else{
                // åˆ é™¤å¤±è´¥,æç¤ºå¤±è´¥
                alert("åˆ é™¤å¤±è´¥")
            }
        }
    }

</script>

<template>
  <div>
    <h3 class="ht">æ‚¨çš„æ—¥ç¨‹å¦‚ä¸‹</h3>
<table class="tab" cellspacing="0px">
    <tr class="ltr">
        <th>ç¼–å·</th>
        <th>å†…å®¹</th>
        <th>è¿›åº¦</th>
        <th>æ“ä½œ</th>
    </tr>
    <tr class="ltr" v-for="item,index in schedule.itemList" :key="index">
        <td v-text="index+1">
        </td>
        <td>
            <input type="input" v-model="item.title">
        </td>
        <td>
            <input type="radio"   value="1" v-model="item.completed"> å·²å®Œæˆ
            <input type="radio"   value="0" v-model="item.completed"> æœªå®Œæˆ
        </td>
        <td class="buttonContainer">
             <button class="btn1"  @click="removeItem(index)">åˆ é™¤</button>
            <button class="btn1" @click="updateItem(index)">ä¿å­˜ä¿®æ”¹</button>
        </td>
    </tr>
    <tr class="ltr buttonContainer" >
        <td colspan="4">
            <button class="btn1" @click="addItem()">æ–°å¢æ—¥ç¨‹</button>
        </td>

    </tr>
</table>
{{schedule}}
  </div>
</template>

<style scoped>

      .ht{
            text-align: center;
            color: cadetblue;
            font-family: å¹¼åœ†;
        }
        .tab{
            width: 80%;
            border: 5px solid cadetblue;
            margin: 0px auto;
            border-radius: 5px;
            font-family: å¹¼åœ†;
        }
        .ltr td{
            border: 1px solid  powderblue;

        }
        .ipt{
            border: 0px;
            width: 50%;

        }
        .btn1{
            border: 2px solid powderblue;
            border-radius: 4px;
            width:100px;
            background-color: antiquewhite;

        }
        #usernameMsg , #userPwdMsg {
            color: gold;
        }

        .buttonContainer{
            text-align: center;
        }

</style>

```

+ SysScheduleControllerä¸­æ·»åŠ åˆ é™¤ä¸šåŠ¡æ¥å£

``` java
package com.atguigu.schedule.controller;

import com.atguigu.schedule.common.Result;
import com.atguigu.schedule.pojo.SysSchedule;
import com.atguigu.schedule.service.SysScheduleService;
import com.atguigu.schedule.service.impl.SysScheduleServiceImpl;
import com.atguigu.schedule.util.WebUtil;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@WebServlet("/schedule/*")
public class SysScheduleController  extends BaseController{

    private SysScheduleService scheduleService =new SysScheduleServiceImpl();

    /**
     * åˆ é™¤æ—¥ç¨‹ä¸šåŠ¡æ¥å£
     * @param req
     * @param resp
     * @throws ServletException
     * @throws IOException
     */
    protected void removeSchedule(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // è·å–è¦åˆ é™¤çš„æ—¥ç¨‹id
        int sid = Integer.parseInt(req.getParameter("sid"));
        // è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•,åˆ é™¤æ—¥ç¨‹
        scheduleService.removeSchedule(sid);
        // å“åº”200
        WebUtil.writeJson(resp,Result.ok(null));
    }
}
```

+ SysScheduleServiceå±‚å¤„ç†åˆ é™¤ä¸šåŠ¡çš„æ¥å£å’Œå®ç°ç±»

``` java
package com.atguigu.schedule.service;

import com.atguigu.schedule.pojo.SysSchedule;

import java.util.List;

public interface SysScheduleService {
    Integer removeSchedule(int sid);
}
//------------------------------------------------------------------
package com.atguigu.schedule.service.impl;

import com.atguigu.schedule.dao.SysScheduleDao;
import com.atguigu.schedule.dao.impl.SysScheduleDaoImpl;
import com.atguigu.schedule.pojo.SysSchedule;
import com.atguigu.schedule.service.SysScheduleService;

import java.util.List;

public class SysScheduleServiceImpl implements SysScheduleService {
    private SysScheduleDao scheduleDao =new SysScheduleDaoImpl();
    @Override
    public Integer removeSchedule(int sid) {
        return scheduleDao.removeBySid(sid);
    }
}
```

+ SysScheduleDaoæ“ä½œæ•°æ®åº“çš„æ¥å£å’Œå®ç°ç±»

``` java
package com.atguigu.schedule.dao;

import com.atguigu.schedule.pojo.SysSchedule;

import java.util.List;

public interface SysScheduleDao {
    Integer removeBySid(int sid);
}
//---------------------------------------------------------
package com.atguigu.schedule.dao.impl;

import com.atguigu.schedule.dao.BaseDao;
import com.atguigu.schedule.dao.SysScheduleDao;
import com.atguigu.schedule.pojo.SysSchedule;

import java.util.List;

public class SysScheduleDaoImpl extends BaseDao implements SysScheduleDao {
    @Override
    public Integer removeBySid(int sid) {
        String sql ="delete from sys_schedule where sid = ?";

        return baseUpdate(sql,sid);
    }
}

```





## åä¸‰ã€Element-plusç»„ä»¶åº“

### 13.1 Element-plusä»‹ç»

> Element Plus æ˜¯ä¸€å¥—åŸºäº Vue 3 çš„å¼€æº UI ç»„ä»¶åº“ï¼Œæ˜¯ç”±é¥¿äº†ä¹ˆå‰ç«¯å›¢é˜Ÿå¼€å‘çš„å‡çº§ç‰ˆæœ¬ Element UIã€‚Element Plus æä¾›äº†ä¸°å¯Œçš„ UI ç»„ä»¶ã€æ˜“äºä½¿ç”¨çš„ API æ¥å£å’Œçµæ´»çš„ä¸»é¢˜å®šåˆ¶åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºé«˜è´¨é‡çš„ Web åº”ç”¨ç¨‹åºã€‚

+ Element Plus æ”¯æŒæŒ‰éœ€åŠ è½½ï¼Œä¸”ä¸ä¾èµ–äºä»»ä½•ç¬¬ä¸‰æ–¹ CSS åº“ï¼Œå®ƒå¯ä»¥è½»æ¾åœ°é›†æˆåˆ°ä»»ä½• Vue.js é¡¹ç›®ä¸­ã€‚Element Plus çš„æ–‡æ¡£ååˆ†æ¸…æ™°ï¼Œæä¾›äº†å„ç§ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹ä»£ç ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹ã€‚

+ Element Plus ç›®å‰å·²ç»æ¨å‡ºäº†å¤§é‡çš„å¸¸ç”¨ UI ç»„ä»¶ï¼Œå¦‚æŒ‰é’®ã€è¡¨å•ã€è¡¨æ ¼ã€å¯¹è¯æ¡†ã€é€‰é¡¹å¡ç­‰ï¼Œæ­¤å¤–è¿˜æä¾›äº†ä¸€äº›é«˜çº§ç»„ä»¶ï¼Œå¦‚æ—¥æœŸé€‰æ‹©å™¨ã€æ—¶é—´é€‰æ‹©å™¨ã€çº§è”é€‰æ‹©å™¨ã€æ»‘å—ã€é¢œè‰²é€‰æ‹©å™¨ç­‰ã€‚è¿™äº›ç»„ä»¶å…·æœ‰ä¸€è‡´çš„è®¾è®¡å’Œå¯é çš„ä»£ç è´¨é‡ï¼Œå¯ä»¥ä¸ºå¼€å‘è€…æä¾›ç¨³å®šçš„ä½¿ç”¨ä½“éªŒã€‚

+ ä¸ Element UI ç›¸æ¯”ï¼ŒElement Plus é‡‡ç”¨äº†ç°ä»£åŒ–çš„æŠ€æœ¯æ¶æ„å’Œæ›´åŠ å…ˆè¿›çš„è®¾è®¡ç†å¿µï¼ŒåŒæ—¶å…·å¤‡æ›´å¥½çš„æ€§èƒ½å’Œæ›´å¥½çš„å…¼å®¹æ€§ã€‚Element Plus çš„æ›´æ–°è¿­ä»£ä¹Ÿæ›´åŠ é¢‘ç¹ï¼Œå¯ä»¥ä¸ºå¼€å‘è€…æä¾›æ›´å¥½çš„ä½¿ç”¨ä½“éªŒå’Œæ›´å¤šçš„åŠŸèƒ½ç‰¹æ€§ã€‚

+ Element Plus å¯ä»¥åœ¨æ”¯æŒ [ES2018](https://caniuse.com/?feats=mdn-javascript_builtins_regexp_dotall,mdn-javascript_builtins_regexp_lookbehind_assertion,mdn-javascript_builtins_regexp_named_capture_groups,mdn-javascript_builtins_regexp_property_escapes,mdn-javascript_builtins_symbol_asynciterator,mdn-javascript_functions_method_definitions_async_generator_methods,mdn-javascript_grammar_template_literals_template_literal_revision,mdn-javascript_operators_destructuring_rest_in_objects,mdn-javascript_operators_spread_spread_in_destructuring,promise-finally "ES2018") å’Œ [ResizeObserver](https://caniuse.com/resizeobserver "ResizeObserver") çš„æµè§ˆå™¨ä¸Šè¿è¡Œã€‚ å¦‚æœæ‚¨ç¡®å®éœ€è¦æ”¯æŒæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œè¯·è‡ªè¡Œæ·»åŠ  [Babel](https://babeljs.io/ "Babel") å’Œç›¸åº”çš„ Polyfill 

+ å®˜ç½‘https://element-plus.gitee.io/zh-CN/

+ ç”±äº Vue 3 ä¸å†æ”¯æŒ IE11ï¼ŒElement Plus ä¹Ÿä¸å†æ”¯æŒ IE æµè§ˆå™¨ã€‚

![](https://blog-resources.this0.com/image/202403301653704.png?x-oss-process=style/this0-blog )



### 13.2 Element-pluså…¥é—¨æ¡ˆä¾‹

>  1 å‡†å¤‡viteé¡¹ç›®

```shell
npm create vite  // æ³¨æ„é€‰æ‹© vue+typeScript
npm install 
npm install vue-router@4 --save
npm install pinia
npm install axios
```

>  2 å®‰è£…element-plus

```shell
npm install element-plus
```

> 3 å®Œæ•´å¼•å…¥element-plus

+ main.js

```javascript
import { createApp } from 'vue'
//å¯¼å…¥element-plusç›¸å…³å†…å®¹
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

import App from './App.vue'

const app = createApp(App)

app.use(ElementPlus)
app.mount('#app')
```

>  4 å…¥é—¨æ¡ˆä¾‹

+ App.vue

```html
<script setup>
  import { ref } from 'vue'

  const value = ref(true)
</script>

<template>
  <div>
    <!-- ç›´æ¥ä½¿ç”¨element-plusç»„ä»¶å³å¯ -->
    <el-button>æŒ‰é’®</el-button>
    <br>
    <el-switch
      v-model="value"
      size="large"
      active-text="Open"
      inactive-text="Close"
    />
    <br />
    <el-switch v-model="value" active-text="Open" inactive-text="Close" />
    <br />
    <el-switch
      v-model="value"
      size="small"
      active-text="Open"
      inactive-text="Close"
    />
  </div>
</template>

<style scoped>

</style>

```

> 5 å¯åŠ¨æµ‹è¯•

```shell
npm run dev
```

### 13.3 Element-pluså¸¸ç”¨ç»„ä»¶

<https://element-plus.gitee.io/zh-CN/component/button.html>